/*! For license information please see main.ad7988d6.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},153:(e,t,n)=>{var r=n(43),a=Symbol.for("react.element"),i=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,i={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)s.call(t,r)&&!l.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:a,type:e,key:c,ref:u,props:i,_owner:o.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var x=b.prototype=new v;x.constructor=b,m(x,y.prototype),x.isPureReactComponent=!0;var w=Array.isArray,S=Object.prototype.hasOwnProperty,k={current:null},j={key:!0,ref:!0,__self:!0,__source:!0};function _(e,t,r){var a,i={},s=null,o=null;if(null!=t)for(a in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(s=""+t.key),t)S.call(t,a)&&!j.hasOwnProperty(a)&&(i[a]=t[a]);var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(a in l=e.defaultProps)void 0===i[a]&&(i[a]=l[a]);return{$$typeof:n,type:e,key:s,ref:o,props:i,_owner:k.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var N=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function E(e,t,a,i,s){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return s=s(l=e),e=""===i?"."+T(l,0):i,w(s)?(a="",null!=e&&(a=e.replace(N,"$&/")+"/"),E(s,t,a,"",function(e){return e})):null!=s&&(C(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,a+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(N,"$&/")+"/")+e)),t.push(s)),1;if(l=0,i=""===i?".":i+":",w(e))for(var c=0;c<e.length;c++){var u=i+T(o=e[c],c);l+=E(o,t,a,u,s)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=E(o=o.value,t,a,u=i+T(o,c++),s);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function P(e,t,n){if(null==e)return e;var r=[],a=0;return E(e,r,"","",function(e){return t.call(n,e,a++)}),r}function I(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var A={current:null},L={transition:null},O={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:L,ReactCurrentOwner:k};function R(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:P,forEach:function(e,t,n){P(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return P(e,function(){t++}),t},toArray:function(e){return P(e,function(e){return e})||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=a,t.Profiler=s,t.PureComponent=b,t.StrictMode=i,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.act=R,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=m({},e.props),i=e.key,s=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,o=k.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)S.call(t,c)&&!j.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];a.children=l}return{$$typeof:n,type:e.type,key:i,ref:s,props:a,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=_,t.createFactory=function(e){var t=_.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:I}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=L.transition;L.transition={};try{e()}finally{L.transition=t}},t.unstable_act=R,t.useCallback=function(e,t){return A.current.useCallback(e,t)},t.useContext=function(e){return A.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return A.current.useDeferredValue(e)},t.useEffect=function(e,t){return A.current.useEffect(e,t)},t.useId=function(){return A.current.useId()},t.useImperativeHandle=function(e,t,n){return A.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return A.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return A.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return A.current.useMemo(e,t)},t.useReducer=function(e,t,n){return A.current.useReducer(e,t,n)},t.useRef=function(e){return A.current.useRef(e)},t.useState=function(e){return A.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return A.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return A.current.useTransition()},t.version="18.3.1"},210:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=r(n(829)),i=r(n(736)),s=n(745);class o{constructor(e){let{headers:t={},schema:n,fetch:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=Object.assign(Object.assign({},s.DEFAULT_HEADERS),t),this.schemaName=n,this.fetch=r}from(e){const t=new URL("".concat(this.url,"/").concat(e));return new a.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new o(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{head:r=!1,get:a=!1,count:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=new URL("".concat(this.url,"/rpc/").concat(e));let l;r||a?(t=r?"HEAD":"GET",Object.entries(n).filter(e=>{let[t,n]=e;return void 0!==n}).map(e=>{let[t,n]=e;return[t,Array.isArray(n)?"{".concat(n.join(","),"}"):"".concat(n)]}).forEach(e=>{let[t,n]=e;o.searchParams.append(t,n)})):(t="POST",l=n);const c=Object.assign({},this.headers);return s&&(c.Prefer="count=".concat(s)),new i.default({method:t,url:o,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}}t.default=o},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<i(a,t)))break e;e[r]=t,e[n]=a,n=r}}function r(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,s=a>>>1;r<s;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>i(l,n))c<a&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<a&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,p=3,f=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)a(u);else{if(!(t.startTime<=e))break;a(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(g=!1,x(e),!m)if(null!==r(c))m=!0,L(S);else{var t=r(u);null!==t&&O(w,t.startTime-e)}}function S(e,n){m=!1,g&&(g=!1,v(C),C=-1),f=!0;var i=p;try{for(x(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!E());){var s=h.callback;if("function"===typeof s){h.callback=null,p=h.priorityLevel;var o=s(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===r(c)&&a(c),x(n)}else a(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&O(w,d.startTime-n),l=!1}return l}finally{h=null,p=i,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,j=!1,_=null,C=-1,N=5,T=-1;function E(){return!(t.unstable_now()-T<N)}function P(){if(null!==_){var e=t.unstable_now();T=e;var n=!0;try{n=_(!0,e)}finally{n?k():(j=!1,_=null)}}else j=!1}if("function"===typeof b)k=function(){b(P)};else if("undefined"!==typeof MessageChannel){var I=new MessageChannel,A=I.port2;I.port1.onmessage=P,k=function(){A.postMessage(null)}}else k=function(){y(P,0)};function L(e){_=e,j||(j=!0,k())}function O(e,n){C=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,L(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,a,i){var s=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?s+i:s:i=s,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:a,priorityLevel:e,startTime:i,expirationTime:o=i+o,sortIndex:-1},i>s?(e.sortIndex=i,n(u,e),null===r(c)&&e===r(u)&&(g?(v(C),C=-1):g=!0,O(w,i-s))):(e.sortIndex=o,n(c,e),m||f||(m=!0,L(S))),e},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},237:(e,t,n)=>{e.exports=n(365)},286:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=r(n(630)),i=r(n(611));t.default=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:"undefined"===typeof fetch?this.fetch=a.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json");let n=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,n,r;let a=null,s=null,o=null,l=e.status,c=e.statusText;if(e.ok){if("HEAD"!==this.method){const t=await e.text();""===t||(s="text/csv"===this.headers.Accept||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?t:JSON.parse(t))}const r=null===(t=this.headers.Prefer)||void 0===t?void 0:t.match(/count=(exact|planned|estimated)/),i=null===(n=e.headers.get("content-range"))||void 0===n?void 0:n.split("/");r&&i&&i.length>1&&(o=parseInt(i[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(s)&&(s.length>1?(a={code:"PGRST116",details:"Results contain ".concat(s.length," rows, application/vnd.pgrst.object+json requires 1 row"),hint:null,message:"JSON object requested, multiple (or no) rows returned"},s=null,o=null,l=406,c="Not Acceptable"):s=1===s.length?s[0]:null)}else{const t=await e.text();try{a=JSON.parse(t),Array.isArray(a)&&404===e.status&&(s=[],a=null,l=200,c="OK")}catch(u){404===e.status&&""===t?(l=204,c="No Content"):a={message:t}}if(a&&this.isMaybeSingle&&(null===(r=null===a||void 0===a?void 0:a.details)||void 0===r?void 0:r.includes("0 rows"))&&(a=null,l=200,c="OK"),a&&this.shouldThrowOnError)throw new i.default(a)}return{error:a,data:s,count:o,status:l,statusText:c}});return this.shouldThrowOnError||(n=n.catch(e=>{var t,n,r;return{error:{message:"".concat(null!==(t=null===e||void 0===e?void 0:e.name)&&void 0!==t?t:"FetchError",": ").concat(null===e||void 0===e?void 0:e.message),details:"".concat(null!==(n=null===e||void 0===e?void 0:e.stack)&&void 0!==n?n:""),hint:"",code:"".concat(null!==(r=null===e||void 0===e?void 0:e.code)&&void 0!==r?r:"")},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}returns(){return this}overrideTypes(){return this}}},365:(e,t,n)=>{var r=n(43);var a="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},i=r.useSyncExternalStore,s=r.useRef,o=r.useEffect,l=r.useMemo,c=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,u){var d=s(null);if(null===d.current){var h={hasValue:!1,value:null};d.current=h}else h=d.current;d=l(function(){function e(e){if(!o){if(o=!0,i=e,e=r(e),void 0!==u&&h.hasValue){var t=h.value;if(u(t,e))return s=t}return s=e}if(t=s,a(i,e))return t;var n=r(e);return void 0!==u&&u(t,n)?(i=e,t):(i=e,s=n)}var i,s,o=!1,l=void 0===n?null:n;return[function(){return e(t())},null===l?void 0:function(){return e(l())}]},[t,n,r,u]);var p=i(e,d[0],d[1]);return o(function(){h.hasValue=!0,h.value=p},[p]),c(p),p}},374:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=r(n(286));class i extends a.default{select(e){let t=!1;const n=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e){let{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:a=r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=a?"".concat(a,".order"):"order",s=this.url.searchParams.get(i);return this.url.searchParams.set(i,"".concat(s?"".concat(s,","):"").concat(e,".").concat(t?"asc":"desc").concat(void 0===n?"":n?".nullsfirst":".nullslast")),this}limit(e){let{foreignTable:t,referencedTable:n=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r="undefined"===typeof n?"limit":"".concat(n,".limit");return this.url.searchParams.set(r,"".concat(e)),this}range(e,t){let{foreignTable:n,referencedTable:r=n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a="undefined"===typeof r?"offset":"".concat(r,".offset"),i="undefined"===typeof r?"limit":"".concat(r,".limit");return this.url.searchParams.set(a,"".concat(e)),this.url.searchParams.set(i,"".concat(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return"GET"===this.method?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain(){let{analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:a=!1,format:i="text"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var s;const o=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,a?"wal":null].filter(Boolean).join("|"),l=null!==(s=this.headers.Accept)&&void 0!==s?s:"application/json";return this.headers.Accept="application/vnd.pgrst.plan+".concat(i,'; for="').concat(l,'"; options=').concat(o,";"),this}rollback(){var e;return(null!==(e=this.headers.Prefer)&&void 0!==e?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}t.default=i},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},400:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.version=void 0,t.version="0.0.0-automated"},579:(e,t,n)=>{e.exports=n(153)},611:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});class n extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}t.default=n},630:(e,t,n)=>{n.r(t),n.d(t,{Headers:()=>s,Request:()=>o,Response:()=>l,default:()=>i,fetch:()=>a});var r=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("unable to locate global object")}();const a=r.fetch,i=r.fetch.bind(r),s=r.Headers,o=r.Request,l=r.Response},730:(e,t,n)=>{var r=n(43),a=n(853);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)s.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(e,t,n,r,a,i,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=s}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var a=g.hasOwnProperty(t)?g[t]:null;(null!==a?0!==a.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!d.call(f,e)||!d.call(p,e)&&(h.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),S=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),N=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),A=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var L=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function R(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var D,M=Object.assign;function z(e){if(void 0===D)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);D=t&&t[1]||""}return"\n"+D+e}var F=!1;function U(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var a=c.stack.split("\n"),i=r.stack.split("\n"),s=a.length-1,o=i.length-1;1<=s&&0<=o&&a[s]!==i[o];)o--;for(;1<=s&&0<=o;s--,o--)if(a[s]!==i[o]){if(1!==s||1!==o)do{if(s--,0>--o||a[s]!==i[o]){var l="\n"+a[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=o);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function V(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case S:return"Portal";case _:return"Profiler";case j:return"StrictMode";case E:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case N:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case I:return null!==(t=e.displayName||null)?t:q(e.type)||"Memo";case A:t=e._payload,e=e._init;try{return q(e(t))}catch(n){}}return null}function B(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(t);case 8:return t===j?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Q(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function K(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function J(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function X(e,t){Y(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function ie(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(pe).forEach(function(e){fe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]})});var ye=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,ke=null,je=null;function _e(e){if(e=ba(e)){if("function"!==typeof Se)throw Error(i(280));var t=e.stateNode;t&&(t=wa(t),Se(e.stateNode,e.type,t))}}function Ce(e){ke?je?je.push(e):je=[e]:ke=e}function Ne(){if(ke){var e=ke,t=je;if(je=ke=null,_e(e),t)for(e=0;e<t.length;e++)_e(t[e])}}function Te(e,t){return e(t)}function Ee(){}var Pe=!1;function Ie(e,t,n){if(Pe)return e(t,n);Pe=!0;try{return Te(e,t,n)}finally{Pe=!1,(null!==ke||null!==je)&&(Ee(),Ne())}}function Ae(e,t){var n=e.stateNode;if(null===n)return null;var r=wa(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Le=!1;if(u)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Le=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ue){Le=!1}function Re(e,t,n,r,a,i,s,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var De=!1,Me=null,ze=!1,Fe=null,Ue={onError:function(e){De=!0,Me=e}};function Ve(e,t,n,r,a,i,s,o,l){De=!1,Me=null,Re.apply(Ue,arguments)}function qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Be(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(qe(e)!==e)throw Error(i(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var s=a.alternate;if(null===s){if(null!==(r=a.return)){n=r;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===n)return We(a),e;if(s===r)return We(a),t;s=s.sibling}throw Error(i(188))}if(n.return!==r.return)n=a,r=s;else{for(var o=!1,l=a.child;l;){if(l===n){o=!0,n=a,r=s;break}if(l===r){o=!0,r=a,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=a;break}if(l===r){o=!0,r=s,n=a;break}l=l.sibling}if(!o)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e))?Qe(e):null}function Qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Qe(e);if(null!==t)return t;e=e.sibling}return null}var Ge=a.unstable_scheduleCallback,Ke=a.unstable_cancelCallback,Je=a.unstable_shouldYield,$e=a.unstable_requestPaint,Ye=a.unstable_now,Xe=a.unstable_getCurrentPriorityLevel,Ze=a.unstable_ImmediatePriority,et=a.unstable_UserBlockingPriority,tt=a.unstable_NormalPriority,nt=a.unstable_LowPriority,rt=a.unstable_IdlePriority,at=null,it=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,a=e.suspendedLanes,i=e.pingedLanes,s=268435455&n;if(0!==s){var o=s&~a;0!==o?r=dt(o):0!==(i&=s)&&(r=dt(i))}else 0!==(s=n&~a)?r=dt(s):0!==i&&(r=dt(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&a)&&((a=r&-r)>=(i=t&-t)||16===a&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(n=31-st(t)),r|=e[n],t&=~a;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-st(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var bt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,St,kt,jt,_t,Ct=!1,Nt=[],Tt=null,Et=null,Pt=null,It=new Map,At=new Map,Lt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rt(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":Et=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":It.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":At.delete(t.pointerId)}}function Dt(e,t,n,r,a,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},null!==t&&(null!==(t=ba(t))&&St(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Mt(e){var t=va(e.target);if(null!==t){var n=qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Be(n)))return e.blockedOn=t,void _t(e.priority,function(){kt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function zt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ba(n))&&St(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function Ft(e,t,n){zt(e)&&n.delete(t)}function Ut(){Ct=!1,null!==Tt&&zt(Tt)&&(Tt=null),null!==Et&&zt(Et)&&(Et=null),null!==Pt&&zt(Pt)&&(Pt=null),It.forEach(Ft),At.forEach(Ft)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Ut)))}function qt(e){function t(t){return Vt(t,e)}if(0<Nt.length){Vt(Nt[0],e);for(var n=1;n<Nt.length;n++){var r=Nt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Tt&&Vt(Tt,e),null!==Et&&Vt(Et,e),null!==Pt&&Vt(Pt,e),It.forEach(t),At.forEach(t),n=0;n<Lt.length;n++)(r=Lt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Lt.length&&null===(n=Lt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Lt.shift()}var Bt=x.ReactCurrentBatchConfig,Wt=!0;function Ht(e,t,n,r){var a=bt,i=Bt.transition;Bt.transition=null;try{bt=1,Gt(e,t,n,r)}finally{bt=a,Bt.transition=i}}function Qt(e,t,n,r){var a=bt,i=Bt.transition;Bt.transition=null;try{bt=4,Gt(e,t,n,r)}finally{bt=a,Bt.transition=i}}function Gt(e,t,n,r){if(Wt){var a=Jt(e,t,n,r);if(null===a)Wr(e,t,r,Kt,n),Rt(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return Tt=Dt(Tt,e,t,n,r,a),!0;case"dragenter":return Et=Dt(Et,e,t,n,r,a),!0;case"mouseover":return Pt=Dt(Pt,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return It.set(i,Dt(It.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,At.set(i,Dt(At.get(i)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if(Rt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==a;){var i=ba(a);if(null!==i&&wt(i),null===(i=Jt(e,t,n,r))&&Wr(e,t,r,Kt,n),i===a)break;a=i}null!==a&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Kt=null;function Jt(e,t,n,r){if(Kt=null,null!==(e=va(e=we(r))))if(null===(t=qe(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Be(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Yt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,a="value"in Yt?Yt.value:Yt.textContent,i=a.length;for(e=0;e<r&&n[e]===a[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===a[i-t];t++);return Zt=a.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,a,i){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(a):a[s]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=an(cn),dn=M({},cn,{view:0,detail:0}),hn=an(dn),pn=M({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_n,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(sn=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=sn=0,ln=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:on}}),fn=an(pn),mn=an(M({},pn,{dataTransfer:0})),gn=an(M({},dn,{relatedTarget:0})),yn=an(M({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=M({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=an(vn),xn=an(M({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function _n(){return jn}var Cn=M({},dn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_n,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Nn=an(Cn),Tn=an(M({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),En=an(M({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_n})),Pn=an(M({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),In=M({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),An=an(In),Ln=[9,13,27,32],On=u&&"CompositionEvent"in window,Rn=null;u&&"documentMode"in document&&(Rn=document.documentMode);var Dn=u&&"TextEvent"in window&&!Rn,Mn=u&&(!On||Rn&&8<Rn&&11>=Rn),zn=String.fromCharCode(32),Fn=!1;function Un(e,t){switch(e){case"keyup":return-1!==Ln.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var qn=!1;var Bn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Bn[e.type]:"textarea"===t}function Hn(e,t,n,r){Ce(r),0<(t=Qr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Qn=null,Gn=null;function Kn(e){zr(e,0)}function Jn(e){if(G(xa(e)))return e}function $n(e,t){if("change"===e)return t}var Yn=!1;if(u){var Xn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Yn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Qn&&(Qn.detachEvent("onpropertychange",nr),Gn=Qn=null)}function nr(e){if("value"===e.propertyName&&Jn(Gn)){var t=[];Hn(t,Gn,e,we(e)),Ie(Kn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Qn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ar(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(Gn)}function ir(e,t){if("click"===e)return Jn(t)}function sr(e,t){if("input"===e||"change"===e)return Jn(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!d.call(t,a)||!or(e[a],t[a]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=n.textContent.length,i=Math.min(r.start,a);r=void 0===r.end?i:Math.min(r.end,a),!e.extend&&i>r&&(a=r,r=i,i=a),a=ur(n,i);var s=ur(n,r);a&&s&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,br=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==K(r)||("selectionStart"in(r=gr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Qr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},kr={},jr={};function _r(e){if(kr[e])return kr[e];if(!Sr[e])return e;var t,n=Sr[e];for(t in n)if(n.hasOwnProperty(t)&&t in jr)return kr[e]=n[t];return e}u&&(jr=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);var Cr=_r("animationend"),Nr=_r("animationiteration"),Tr=_r("animationstart"),Er=_r("transitionend"),Pr=new Map,Ir="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ar(e,t){Pr.set(e,t),l(t,[e])}for(var Lr=0;Lr<Ir.length;Lr++){var Or=Ir[Lr];Ar(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Ar(Cr,"onAnimationEnd"),Ar(Nr,"onAnimationIteration"),Ar(Tr,"onAnimationStart"),Ar("dblclick","onDoubleClick"),Ar("focusin","onFocus"),Ar("focusout","onBlur"),Ar(Er,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rr));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,a,s,o,l,c){if(Ve.apply(this,arguments),De){if(!De)throw Error(i(198));var u=Me;De=!1,Me=null,ze||(ze=!0,Fe=u)}}(r,t,void 0,e),e.currentTarget=null}function zr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var s=r.length-1;0<=s;s--){var o=r[s],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&a.isPropagationStopped())break e;Mr(a,o,c),i=l}else for(s=0;s<r.length;s++){if(l=(o=r[s]).instance,c=o.currentTarget,o=o.listener,l!==i&&a.isPropagationStopped())break e;Mr(a,o,c),i=l}}}if(ze)throw e=Fe,ze=!1,Fe=null,e}function Fr(e,t){var n=t[ma];void 0===n&&(n=t[ma]=new Set);var r=e+"__bubble";n.has(r)||(Br(t,e,2,!1),n.add(r))}function Ur(e,t,n){var r=0;t&&(r|=4),Br(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function qr(e){if(!e[Vr]){e[Vr]=!0,s.forEach(function(t){"selectionchange"!==t&&(Dr.has(t)||Ur(t,!1,e),Ur(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,Ur("selectionchange",!1,t))}}function Br(e,t,n,r){switch($t(t)){case 1:var a=Ht;break;case 4:a=Qt;break;default:a=Gt}n=a.bind(null,t,n,e),a=void 0,!Le||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,a){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var o=r.stateNode.containerInfo;if(o===a||8===o.nodeType&&o.parentNode===a)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===a||8===l.nodeType&&l.parentNode===a))return;s=s.return}for(;null!==o;){if(null===(s=va(o)))return;if(5===(l=s.tag)||6===l){r=i=s;continue e}o=o.parentNode}}r=r.return}Ie(function(){var r=i,a=we(n),s=[];e:{var o=Pr.get(e);if(void 0!==o){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Nn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=En;break;case Cr:case Nr:case Tr:l=yn;break;case Er:l=Pn;break;case"scroll":l=hn;break;case"wheel":l=An;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Tn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var p,f=r;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==h&&(null!=(m=Ae(f,h))&&u.push(Hr(f,m,p)))),d)break;f=f.return}0<u.length&&(o=new l(o,c,null,n,a),s.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===xe||!(c=n.relatedTarget||n.fromElement)||!va(c)&&!c[fa])&&(l||o)&&(o=a.window===a?a:(o=a.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?va(c):null)&&(c!==(d=qe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=fn,m="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=Tn,m="onPointerLeave",h="onPointerEnter",f="pointer"),d=null==l?o:xa(l),p=null==c?o:xa(c),(o=new u(m,f+"leave",l,n,a)).target=d,o.relatedTarget=p,m=null,va(a)===r&&((u=new u(h,f+"enter",c,n,a)).target=p,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,f=0,p=u=l;p;p=Gr(p))f++;for(p=0,m=h;m;m=Gr(m))p++;for(;0<f-p;)u=Gr(u),f--;for(;0<p-f;)h=Gr(h),p--;for(;f--;){if(u===h||null!==h&&u===h.alternate)break e;u=Gr(u),h=Gr(h)}u=null}else u=null;null!==l&&Kr(s,o,l,u,!1),null!==c&&null!==d&&Kr(s,d,c,u,!0)}if("select"===(l=(o=r?xa(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=$n;else if(Wn(o))if(Yn)g=sr;else{g=ar;var y=rr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=ir);switch(g&&(g=g(e,r))?Hn(s,g,n,a):(y&&y(e,o,r),"focusout"===e&&(y=o._wrapperState)&&y.controlled&&"number"===o.type&&ee(o,"number",o.value)),y=r?xa(r):window,e){case"focusin":(Wn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,xr(s,n,a);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":xr(s,n,a)}var v;if(On)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else qn?Un(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Mn&&"ko"!==n.locale&&(qn||"onCompositionStart"!==b?"onCompositionEnd"===b&&qn&&(v=en()):(Xt="value"in(Yt=a)?Yt.value:Yt.textContent,qn=!0)),0<(y=Qr(r,b)).length&&(b=new xn(b,e,null,n,a),s.push({event:b,listeners:y}),v?b.data=v:null!==(v=Vn(n))&&(b.data=v))),(v=Dn?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(Fn=!0,zn);case"textInput":return(e=t.data)===zn&&Fn?null:e;default:return null}}(e,n):function(e,t){if(qn)return"compositionend"===e||!On&&Un(e,t)?(e=en(),Zt=Xt=Yt=null,qn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Qr(r,"onBeforeInput")).length&&(a=new xn("onBeforeInput","beforeinput",null,n,a),s.push({event:a,listeners:r}),a.data=v))}zr(s,t)})}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Qr(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,i=a.stateNode;5===a.tag&&null!==i&&(a=i,null!=(i=Ae(e,n))&&r.unshift(Hr(e,i,a)),null!=(i=Ae(e,t))&&r.push(Hr(e,i,a))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Kr(e,t,n,r,a){for(var i=t._reactName,s=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,a?null!=(l=Ae(n,i))&&s.unshift(Hr(n,l,o)):a||null!=(l=Ae(n,i))&&s.push(Hr(n,l,o))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Jr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Yr(e){return("string"===typeof e?e:""+e).replace(Jr,"\n").replace($r,"")}function Xr(e,t,n){if(t=Yr(t),Yr(e)!==t&&n)throw Error(i(425))}function Zr(){}var ea=null,ta=null;function na(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ra="function"===typeof setTimeout?setTimeout:void 0,aa="function"===typeof clearTimeout?clearTimeout:void 0,ia="function"===typeof Promise?Promise:void 0,sa="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ia?function(e){return ia.resolve(null).then(e).catch(oa)}:ra;function oa(e){setTimeout(function(){throw e})}function la(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0===r)return e.removeChild(a),void qt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=a}while(n);qt(t)}function ca(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ua(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var da=Math.random().toString(36).slice(2),ha="__reactFiber$"+da,pa="__reactProps$"+da,fa="__reactContainer$"+da,ma="__reactEvents$"+da,ga="__reactListeners$"+da,ya="__reactHandles$"+da;function va(e){var t=e[ha];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fa]||n[ha]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ua(e);null!==e;){if(n=e[ha])return n;e=ua(e)}return t}n=(e=n).parentNode}return null}function ba(e){return!(e=e[ha]||e[fa])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xa(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function wa(e){return e[pa]||null}var Sa=[],ka=-1;function ja(e){return{current:e}}function _a(e){0>ka||(e.current=Sa[ka],Sa[ka]=null,ka--)}function Ca(e,t){ka++,Sa[ka]=e.current,e.current=t}var Na={},Ta=ja(Na),Ea=ja(!1),Pa=Na;function Ia(e,t){var n=e.type.contextTypes;if(!n)return Na;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,i={};for(a in n)i[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Aa(e){return null!==(e=e.childContextTypes)&&void 0!==e}function La(){_a(Ea),_a(Ta)}function Oa(e,t,n){if(Ta.current!==Na)throw Error(i(168));Ca(Ta,t),Ca(Ea,n)}function Ra(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in t))throw Error(i(108,B(e)||"Unknown",a));return M({},n,r)}function Da(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Na,Pa=Ta.current,Ca(Ta,e),Ca(Ea,Ea.current),!0}function Ma(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=Ra(e,t,Pa),r.__reactInternalMemoizedMergedChildContext=e,_a(Ea),_a(Ta),Ca(Ta,e)):_a(Ea),Ca(Ea,n)}var za=null,Fa=!1,Ua=!1;function Va(e){null===za?za=[e]:za.push(e)}function qa(){if(!Ua&&null!==za){Ua=!0;var e=0,t=bt;try{var n=za;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}za=null,Fa=!1}catch(a){throw null!==za&&(za=za.slice(e+1)),Ge(Ze,qa),a}finally{bt=t,Ua=!1}}return null}var Ba=[],Wa=0,Ha=null,Qa=0,Ga=[],Ka=0,Ja=null,$a=1,Ya="";function Xa(e,t){Ba[Wa++]=Qa,Ba[Wa++]=Ha,Ha=e,Qa=t}function Za(e,t,n){Ga[Ka++]=$a,Ga[Ka++]=Ya,Ga[Ka++]=Ja,Ja=e;var r=$a;e=Ya;var a=32-st(r)-1;r&=~(1<<a),n+=1;var i=32-st(t)+a;if(30<i){var s=a-a%5;i=(r&(1<<s)-1).toString(32),r>>=s,a-=s,$a=1<<32-st(t)+a|n<<a|r,Ya=i+e}else $a=1<<i|n<<a|r,Ya=e}function ei(e){null!==e.return&&(Xa(e,1),Za(e,1,0))}function ti(e){for(;e===Ha;)Ha=Ba[--Wa],Ba[Wa]=null,Qa=Ba[--Wa],Ba[Wa]=null;for(;e===Ja;)Ja=Ga[--Ka],Ga[Ka]=null,Ya=Ga[--Ka],Ga[Ka]=null,$a=Ga[--Ka],Ga[Ka]=null}var ni=null,ri=null,ai=!1,ii=null;function si(e,t){var n=Ic(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function oi(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ni=e,ri=ca(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ni=e,ri=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ja?{id:$a,overflow:Ya}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ic(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ni=e,ri=null,!0);default:return!1}}function li(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ci(e){if(ai){var t=ri;if(t){var n=t;if(!oi(e,t)){if(li(e))throw Error(i(418));t=ca(n.nextSibling);var r=ni;t&&oi(e,t)?si(r,n):(e.flags=-4097&e.flags|2,ai=!1,ni=e)}}else{if(li(e))throw Error(i(418));e.flags=-4097&e.flags|2,ai=!1,ni=e}}}function ui(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ni=e}function di(e){if(e!==ni)return!1;if(!ai)return ui(e),ai=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!na(e.type,e.memoizedProps)),t&&(t=ri)){if(li(e))throw hi(),Error(i(418));for(;t;)si(e,t),t=ca(t.nextSibling)}if(ui(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ri=ca(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ri=null}}else ri=ni?ca(e.stateNode.nextSibling):null;return!0}function hi(){for(var e=ri;e;)e=ca(e.nextSibling)}function pi(){ri=ni=null,ai=!1}function fi(e){null===ii?ii=[e]:ii.push(e)}var mi=x.ReactCurrentBatchConfig;function gi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var a=r,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=a.refs;null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function yi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vi(e){return(0,e._init)(e._payload)}function bi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Lc(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Mc(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===k?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===A&&vi(i)===t.type)?((r=a(t,n.props)).ref=gi(e,t,n),r.return=e,r):((r=Oc(n.type,n.key,n.props,null,e.mode,r)).ref=gi(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=zc(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=Rc(n,e.mode,r,i)).return=e,t):((t=a(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Mc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Oc(t.type,t.key,t.props,null,e.mode,n)).ref=gi(e,null,t),n.return=e,n;case S:return(t=zc(t,e.mode,n)).return=e,t;case A:return h(e,(0,t._init)(t._payload),n)}if(te(t)||R(t))return(t=Rc(t,e.mode,n,null)).return=e,t;yi(e,t)}return null}function p(e,t,n,r){var a=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==a?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===a?c(e,t,n,r):null;case S:return n.key===a?u(e,t,n,r):null;case A:return p(e,t,(a=n._init)(n._payload),r)}if(te(n)||R(n))return null!==a?null:d(e,t,n,r,null);yi(e,n)}return null}function f(e,t,n,r,a){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a);case S:return u(t,e=e.get(null===r.key?n:r.key)||null,r,a);case A:return f(e,t,n,(0,r._init)(r._payload),a)}if(te(r)||R(r))return d(t,e=e.get(n)||null,r,a,null);yi(t,r)}return null}function m(a,i,o,l){for(var c=null,u=null,d=i,m=i=0,g=null;null!==d&&m<o.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var y=p(a,d,o[m],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(a,d),i=s(y,i,m),null===u?c=y:u.sibling=y,u=y,d=g}if(m===o.length)return n(a,d),ai&&Xa(a,m),c;if(null===d){for(;m<o.length;m++)null!==(d=h(a,o[m],l))&&(i=s(d,i,m),null===u?c=d:u.sibling=d,u=d);return ai&&Xa(a,m),c}for(d=r(a,d);m<o.length;m++)null!==(g=f(d,a,m,o[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),i=s(g,i,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(a,e)}),ai&&Xa(a,m),c}function g(a,o,l,c){var u=R(l);if("function"!==typeof u)throw Error(i(150));if(null==(l=u.call(l)))throw Error(i(151));for(var d=u=null,m=o,g=o=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=p(a,m,v.value,c);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(a,m),o=s(b,o,g),null===d?u=b:d.sibling=b,d=b,m=y}if(v.done)return n(a,m),ai&&Xa(a,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=h(a,v.value,c))&&(o=s(v,o,g),null===d?u=v:d.sibling=v,d=v);return ai&&Xa(a,g),u}for(m=r(a,m);!v.done;g++,v=l.next())null!==(v=f(m,a,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),o=s(v,o,g),null===d?u=v:d.sibling=v,d=v);return e&&m.forEach(function(e){return t(a,e)}),ai&&Xa(a,g),u}return function e(r,i,s,l){if("object"===typeof s&&null!==s&&s.type===k&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case w:e:{for(var c=s.key,u=i;null!==u;){if(u.key===c){if((c=s.type)===k){if(7===u.tag){n(r,u.sibling),(i=a(u,s.props.children)).return=r,r=i;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===A&&vi(c)===u.type){n(r,u.sibling),(i=a(u,s.props)).ref=gi(r,u,s),i.return=r,r=i;break e}n(r,u);break}t(r,u),u=u.sibling}s.type===k?((i=Rc(s.props.children,r.mode,l,s.key)).return=r,r=i):((l=Oc(s.type,s.key,s.props,null,r.mode,l)).ref=gi(r,i,s),l.return=r,r=l)}return o(r);case S:e:{for(u=s.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===s.containerInfo&&i.stateNode.implementation===s.implementation){n(r,i.sibling),(i=a(i,s.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=zc(s,r.mode,l)).return=r,r=i}return o(r);case A:return e(r,i,(u=s._init)(s._payload),l)}if(te(s))return m(r,i,s,l);if(R(s))return g(r,i,s,l);yi(r,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==i&&6===i.tag?(n(r,i.sibling),(i=a(i,s)).return=r,r=i):(n(r,i),(i=Mc(s,r.mode,l)).return=r,r=i),o(r)):n(r,i)}}var xi=bi(!0),wi=bi(!1),Si=ja(null),ki=null,ji=null,_i=null;function Ci(){_i=ji=ki=null}function Ni(e){var t=Si.current;_a(Si),e._currentValue=t}function Ti(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ei(e,t){ki=e,_i=ji=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bo=!0),e.firstContext=null)}function Pi(e){var t=e._currentValue;if(_i!==e)if(e={context:e,memoizedValue:t,next:null},null===ji){if(null===ki)throw Error(i(308));ji=e,ki.dependencies={lanes:0,firstContext:e}}else ji=ji.next=e;return t}var Ii=null;function Ai(e){null===Ii?Ii=[e]:Ii.push(e)}function Li(e,t,n,r){var a=t.interleaved;return null===a?(n.next=n,Ai(t)):(n.next=a.next,a.next=n),t.interleaved=n,Oi(e,r)}function Oi(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ri=!1;function Di(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Mi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function zi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Fi(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Tl)){var a=r.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),r.pending=t,Oi(e,n)}return null===(a=r.interleaved)?(t.next=t,Ai(r)):(t.next=a.next,a.next=t),r.interleaved=t,Oi(e,n)}function Ui(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Vi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?a=i=s:i=i.next=s,n=n.next}while(null!==n);null===i?a=i=t:i=i.next=t}else a=i=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function qi(e,t,n,r){var a=e.updateQueue;Ri=!1;var i=a.firstBaseUpdate,s=a.lastBaseUpdate,o=a.shared.pending;if(null!==o){a.shared.pending=null;var l=o,c=l.next;l.next=null,null===s?i=c:s.next=c,s=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==i){var d=a.baseState;for(s=0,u=c=l=null,o=i;;){var h=o.lane,p=o.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var f=e,m=o;switch(h=t,p=n,m.tag){case 1:if("function"===typeof(f=m.payload)){d=f.call(p,d,h);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=m.payload)?f.call(p,d,h):f)||void 0===h)break e;d=M({},d,h);break e;case 2:Ri=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=a.effects)?a.effects=[o]:h.push(o))}else p={eventTime:p,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,s|=h;if(null===(o=o.next)){if(null===(o=a.shared.pending))break;o=(h=o).next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}if(null===u&&(l=d),a.baseState=l,a.firstBaseUpdate=c,a.lastBaseUpdate=u,null!==(t=a.shared.interleaved)){a=t;do{s|=a.lane,a=a.next}while(a!==t)}else null===i&&(a.shared.lanes=0);Dl|=s,e.lanes=s,e.memoizedState=d}}function Bi(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=n,"function"!==typeof a)throw Error(i(191,a));a.call(r)}}}var Wi={},Hi=ja(Wi),Qi=ja(Wi),Gi=ja(Wi);function Ki(e){if(e===Wi)throw Error(i(174));return e}function Ji(e,t){switch(Ca(Gi,t),Ca(Qi,e),Ca(Hi,Wi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}_a(Hi),Ca(Hi,t)}function $i(){_a(Hi),_a(Qi),_a(Gi)}function Yi(e){Ki(Gi.current);var t=Ki(Hi.current),n=le(t,e.type);t!==n&&(Ca(Qi,e),Ca(Hi,n))}function Xi(e){Qi.current===e&&(_a(Hi),_a(Qi))}var Zi=ja(0);function es(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ts=[];function ns(){for(var e=0;e<ts.length;e++)ts[e]._workInProgressVersionPrimary=null;ts.length=0}var rs=x.ReactCurrentDispatcher,as=x.ReactCurrentBatchConfig,is=0,ss=null,os=null,ls=null,cs=!1,us=!1,ds=0,hs=0;function ps(){throw Error(i(321))}function fs(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function ms(e,t,n,r,a,s){if(is=s,ss=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,rs.current=null===e||null===e.memoizedState?Xs:Zs,e=n(r,a),us){s=0;do{if(us=!1,ds=0,25<=s)throw Error(i(301));s+=1,ls=os=null,t.updateQueue=null,rs.current=eo,e=n(r,a)}while(us)}if(rs.current=Ys,t=null!==os&&null!==os.next,is=0,ls=os=ss=null,cs=!1,t)throw Error(i(300));return e}function gs(){var e=0!==ds;return ds=0,e}function ys(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ls?ss.memoizedState=ls=e:ls=ls.next=e,ls}function vs(){if(null===os){var e=ss.alternate;e=null!==e?e.memoizedState:null}else e=os.next;var t=null===ls?ss.memoizedState:ls.next;if(null!==t)ls=t,os=e;else{if(null===e)throw Error(i(310));e={memoizedState:(os=e).memoizedState,baseState:os.baseState,baseQueue:os.baseQueue,queue:os.queue,next:null},null===ls?ss.memoizedState=ls=e:ls=ls.next=e}return ls}function bs(e,t){return"function"===typeof t?t(e):t}function xs(e){var t=vs(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=os,a=r.baseQueue,s=n.pending;if(null!==s){if(null!==a){var o=a.next;a.next=s.next,s.next=o}r.baseQueue=a=s,n.pending=null}if(null!==a){s=a.next,r=r.baseState;var l=o=null,c=null,u=s;do{var d=u.lane;if((is&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,o=r):c=c.next=h,ss.lanes|=d,Dl|=d}u=u.next}while(null!==u&&u!==s);null===c?o=r:c.next=l,or(r,t.memoizedState)||(bo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){a=e;do{s=a.lane,ss.lanes|=s,Dl|=s,a=a.next}while(a!==e)}else null===a&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ws(e){var t=vs(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,s=t.memoizedState;if(null!==a){n.pending=null;var o=a=a.next;do{s=e(s,o.action),o=o.next}while(o!==a);or(s,t.memoizedState)||(bo=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Ss(){}function ks(e,t){var n=ss,r=vs(),a=t(),s=!or(r.memoizedState,a);if(s&&(r.memoizedState=a,bo=!0),r=r.queue,Rs(Cs.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||null!==ls&&1&ls.memoizedState.tag){if(n.flags|=2048,Ps(9,_s.bind(null,n,r,a,t),void 0,null),null===El)throw Error(i(349));0!==(30&is)||js(n,t,a)}return a}function js(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ss.updateQueue)?(t={lastEffect:null,stores:null},ss.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function _s(e,t,n,r){t.value=n,t.getSnapshot=r,Ns(t)&&Ts(e)}function Cs(e,t,n){return n(function(){Ns(t)&&Ts(e)})}function Ns(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function Ts(e){var t=Oi(e,1);null!==t&&nc(t,e,1,-1)}function Es(e){var t=ys();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bs,lastRenderedState:e},t.queue=e,e=e.dispatch=Gs.bind(null,ss,e),[t.memoizedState,e]}function Ps(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ss.updateQueue)?(t={lastEffect:null,stores:null},ss.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Is(){return vs().memoizedState}function As(e,t,n,r){var a=ys();ss.flags|=e,a.memoizedState=Ps(1|t,n,void 0,void 0===r?null:r)}function Ls(e,t,n,r){var a=vs();r=void 0===r?null:r;var i=void 0;if(null!==os){var s=os.memoizedState;if(i=s.destroy,null!==r&&fs(r,s.deps))return void(a.memoizedState=Ps(t,n,i,r))}ss.flags|=e,a.memoizedState=Ps(1|t,n,i,r)}function Os(e,t){return As(8390656,8,e,t)}function Rs(e,t){return Ls(2048,8,e,t)}function Ds(e,t){return Ls(4,2,e,t)}function Ms(e,t){return Ls(4,4,e,t)}function zs(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Fs(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ls(4,4,zs.bind(null,t,e),n)}function Us(){}function Vs(e,t){var n=vs();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&fs(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function qs(e,t){var n=vs();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&fs(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Bs(e,t,n){return 0===(21&is)?(e.baseState&&(e.baseState=!1,bo=!0),e.memoizedState=n):(or(n,t)||(n=mt(),ss.lanes|=n,Dl|=n,e.baseState=!0),t)}function Ws(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=as.transition;as.transition={};try{e(!1),t()}finally{bt=n,as.transition=r}}function Hs(){return vs().memoizedState}function Qs(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ks(e))Js(t,n);else if(null!==(n=Li(e,t,n,r))){nc(n,e,r,ec()),$s(n,t,r)}}function Gs(e,t,n){var r=tc(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ks(e))Js(t,a);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var s=t.lastRenderedState,o=i(s,n);if(a.hasEagerState=!0,a.eagerState=o,or(o,s)){var l=t.interleaved;return null===l?(a.next=a,Ai(t)):(a.next=l.next,l.next=a),void(t.interleaved=a)}}catch(c){}null!==(n=Li(e,t,a,r))&&(nc(n,e,r,a=ec()),$s(n,t,r))}}function Ks(e){var t=e.alternate;return e===ss||null!==t&&t===ss}function Js(e,t){us=cs=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function $s(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Ys={readContext:Pi,useCallback:ps,useContext:ps,useEffect:ps,useImperativeHandle:ps,useInsertionEffect:ps,useLayoutEffect:ps,useMemo:ps,useReducer:ps,useRef:ps,useState:ps,useDebugValue:ps,useDeferredValue:ps,useTransition:ps,useMutableSource:ps,useSyncExternalStore:ps,useId:ps,unstable_isNewReconciler:!1},Xs={readContext:Pi,useCallback:function(e,t){return ys().memoizedState=[e,void 0===t?null:t],e},useContext:Pi,useEffect:Os,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,As(4194308,4,zs.bind(null,t,e),n)},useLayoutEffect:function(e,t){return As(4194308,4,e,t)},useInsertionEffect:function(e,t){return As(4,2,e,t)},useMemo:function(e,t){var n=ys();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ys();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Qs.bind(null,ss,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ys().memoizedState=e},useState:Es,useDebugValue:Us,useDeferredValue:function(e){return ys().memoizedState=e},useTransition:function(){var e=Es(!1),t=e[0];return e=Ws.bind(null,e[1]),ys().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ss,a=ys();if(ai){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===El)throw Error(i(349));0!==(30&is)||js(r,t,n)}a.memoizedState=n;var s={value:n,getSnapshot:t};return a.queue=s,Os(Cs.bind(null,r,s,e),[e]),r.flags|=2048,Ps(9,_s.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=ys(),t=El.identifierPrefix;if(ai){var n=Ya;t=":"+t+"R"+(n=($a&~(1<<32-st($a)-1)).toString(32)+n),0<(n=ds++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=hs++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Zs={readContext:Pi,useCallback:Vs,useContext:Pi,useEffect:Rs,useImperativeHandle:Fs,useInsertionEffect:Ds,useLayoutEffect:Ms,useMemo:qs,useReducer:xs,useRef:Is,useState:function(){return xs(bs)},useDebugValue:Us,useDeferredValue:function(e){return Bs(vs(),os.memoizedState,e)},useTransition:function(){return[xs(bs)[0],vs().memoizedState]},useMutableSource:Ss,useSyncExternalStore:ks,useId:Hs,unstable_isNewReconciler:!1},eo={readContext:Pi,useCallback:Vs,useContext:Pi,useEffect:Rs,useImperativeHandle:Fs,useInsertionEffect:Ds,useLayoutEffect:Ms,useMemo:qs,useReducer:ws,useRef:Is,useState:function(){return ws(bs)},useDebugValue:Us,useDeferredValue:function(e){var t=vs();return null===os?t.memoizedState=e:Bs(t,os.memoizedState,e)},useTransition:function(){return[ws(bs)[0],vs().memoizedState]},useMutableSource:Ss,useSyncExternalStore:ks,useId:Hs,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ro={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),a=tc(e),i=zi(r,a);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Fi(e,i,a))&&(nc(t,e,a,r),Ui(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),a=tc(e),i=zi(r,a);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Fi(e,i,a))&&(nc(t,e,a,r),Ui(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),a=zi(n,r);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),null!==(t=Fi(e,a,r))&&(nc(t,e,r,n),Ui(t,e,r))}};function ao(e,t,n,r,a,i,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,s):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(a,i))}function io(e,t,n){var r=!1,a=Na,i=t.contextType;return"object"===typeof i&&null!==i?i=Pi(i):(a=Aa(t)?Pa:Ta.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ia(e,a):Na),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ro,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function so(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ro.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},Di(e);var i=t.contextType;"object"===typeof i&&null!==i?a.context=Pi(i):(i=Aa(t)?Pa:Ta.current,a.context=Ia(e,i)),a.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(no(e,t,i,n),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&ro.enqueueReplaceState(a,a.state,null),qi(e,n,a,r),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",r=t;do{n+=V(r),r=r.return}while(r);var a=n}catch(i){a="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:a,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ho="function"===typeof WeakMap?WeakMap:Map;function po(e,t,n){(n=zi(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wl||(Wl=!0,Hl=r),uo(0,t)},n}function fo(e,t,n){(n=zi(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){uo(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!==typeof r&&(null===Ql?Ql=new Set([this]):Ql.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mo(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ho;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=_c.bind(null,e,t,n),t.then(e,e))}function go(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function yo(e,t,n,r,a){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=zi(-1,1)).tag=2,Fi(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var vo=x.ReactCurrentOwner,bo=!1;function xo(e,t,n,r){t.child=null===e?wi(t,null,n,r):xi(t,e.child,n,r)}function wo(e,t,n,r,a){n=n.render;var i=t.ref;return Ei(t,a),r=ms(e,t,n,r,i,a),n=gs(),null===e||bo?(ai&&n&&ei(t),t.flags|=1,xo(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Wo(e,t,a))}function So(e,t,n,r,a){if(null===e){var i=n.type;return"function"!==typeof i||Ac(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Oc(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,ko(e,t,i,r,a))}if(i=e.child,0===(e.lanes&a)){var s=i.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(s,r)&&e.ref===t.ref)return Wo(e,t,a)}return t.flags|=1,(e=Lc(i,r)).ref=t.ref,e.return=t,t.child=e}function ko(e,t,n,r,a){if(null!==e){var i=e.memoizedProps;if(lr(i,r)&&e.ref===t.ref){if(bo=!1,t.pendingProps=r=i,0===(e.lanes&a))return t.lanes=e.lanes,Wo(e,t,a);0!==(131072&e.flags)&&(bo=!0)}}return Co(e,t,n,r,a)}function jo(e,t,n){var r=t.pendingProps,a=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ca(Ll,Al),Al|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ca(Ll,Al),Al|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,Ca(Ll,Al),Al|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,Ca(Ll,Al),Al|=r;return xo(e,t,a,n),t.child}function _o(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Co(e,t,n,r,a){var i=Aa(n)?Pa:Ta.current;return i=Ia(t,i),Ei(t,a),n=ms(e,t,n,r,i,a),r=gs(),null===e||bo?(ai&&r&&ei(t),t.flags|=1,xo(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Wo(e,t,a))}function No(e,t,n,r,a){if(Aa(n)){var i=!0;Da(t)}else i=!1;if(Ei(t,a),null===t.stateNode)Bo(e,t),io(t,n,r),oo(t,n,r,a),r=!0;else if(null===e){var s=t.stateNode,o=t.memoizedProps;s.props=o;var l=s.context,c=n.contextType;"object"===typeof c&&null!==c?c=Pi(c):c=Ia(t,c=Aa(n)?Pa:Ta.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof s.getSnapshotBeforeUpdate;d||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==r||l!==c)&&so(t,s,r,c),Ri=!1;var h=t.memoizedState;s.state=h,qi(t,r,s,a),l=t.memoizedState,o!==r||h!==l||Ea.current||Ri?("function"===typeof u&&(no(t,n,u,r),l=t.memoizedState),(o=Ri||ao(t,n,o,r,h,l,c))?(d||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=c,r=o):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,Mi(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),s.props=c,d=t.pendingProps,h=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=Pi(l):l=Ia(t,l=Aa(n)?Pa:Ta.current);var p=n.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==d||h!==l)&&so(t,s,r,l),Ri=!1,h=t.memoizedState,s.state=h,qi(t,r,s,a);var f=t.memoizedState;o!==d||h!==f||Ea.current||Ri?("function"===typeof p&&(no(t,n,p,r),f=t.memoizedState),(c=Ri||ao(t,n,c,r,h,f,l)||!1)?(u||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,f,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),s.props=r,s.state=f,s.context=l,r=c):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return To(e,t,n,r,i,a)}function To(e,t,n,r,a,i){_o(e,t);var s=0!==(128&t.flags);if(!r&&!s)return a&&Ma(t,n,!1),Wo(e,t,i);r=t.stateNode,vo.current=t;var o=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=xi(t,e.child,null,i),t.child=xi(t,null,o,i)):xo(e,t,o,i),t.memoizedState=r.state,a&&Ma(t,n,!0),t.child}function Eo(e){var t=e.stateNode;t.pendingContext?Oa(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oa(0,t.context,!1),Ji(e,t.containerInfo)}function Po(e,t,n,r,a){return pi(),fi(a),t.flags|=256,xo(e,t,n,r),t.child}var Io,Ao,Lo,Oo,Ro={dehydrated:null,treeContext:null,retryLane:0};function Do(e){return{baseLanes:e,cachePool:null,transitions:null}}function Mo(e,t,n){var r,a=t.pendingProps,s=Zi.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&s)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Ca(Zi,1&s),null===e)return ci(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=a.children,e=a.fallback,o?(a=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&a)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Dc(l,a,0,null),e=Rc(e,a,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Do(n),t.memoizedState=Ro,e):zo(t,l));if(null!==(s=e.memoizedState)&&null!==(r=s.dehydrated))return function(e,t,n,r,a,s,o){if(n)return 256&t.flags?(t.flags&=-257,Fo(e,t,o,r=co(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,a=t.mode,r=Dc({mode:"visible",children:r.children},a,0,null),(s=Rc(s,a,o,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,0!==(1&t.mode)&&xi(t,e.child,null,o),t.child.memoizedState=Do(o),t.memoizedState=Ro,s);if(0===(1&t.mode))return Fo(e,t,o,null);if("$!"===a.data){if(r=a.nextSibling&&a.nextSibling.dataset)var l=r.dgst;return r=l,Fo(e,t,o,r=co(s=Error(i(419)),r,void 0))}if(l=0!==(o&e.childLanes),bo||l){if(null!==(r=El)){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(r.suspendedLanes|o))?0:a)&&a!==s.retryLane&&(s.retryLane=a,Oi(e,a),nc(r,e,a,-1))}return mc(),Fo(e,t,o,r=co(Error(i(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=Nc.bind(null,e),a._reactRetry=t,null):(e=s.treeContext,ri=ca(a.nextSibling),ni=t,ai=!0,ii=null,null!==e&&(Ga[Ka++]=$a,Ga[Ka++]=Ya,Ga[Ka++]=Ja,$a=e.id,Ya=e.overflow,Ja=t),t=zo(t,r.children),t.flags|=4096,t)}(e,t,l,a,r,s,n);if(o){o=a.fallback,l=t.mode,r=(s=e.child).sibling;var c={mode:"hidden",children:a.children};return 0===(1&l)&&t.child!==s?((a=t.child).childLanes=0,a.pendingProps=c,t.deletions=null):(a=Lc(s,c)).subtreeFlags=14680064&s.subtreeFlags,null!==r?o=Lc(r,o):(o=Rc(o,l,n,null)).flags|=2,o.return=t,a.return=t,a.sibling=o,t.child=a,a=o,o=t.child,l=null===(l=e.child.memoizedState)?Do(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Ro,a}return e=(o=e.child).sibling,a=Lc(o,{mode:"visible",children:a.children}),0===(1&t.mode)&&(a.lanes=n),a.return=t,a.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=a,t.memoizedState=null,a}function zo(e,t){return(t=Dc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Fo(e,t,n,r){return null!==r&&fi(r),xi(t,e.child,null,n),(e=zo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Uo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ti(e.return,t,n)}function Vo(e,t,n,r,a){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=a)}function qo(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;if(xo(e,t,r.children,n),0!==(2&(r=Zi.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Uo(e,n,t);else if(19===e.tag)Uo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ca(Zi,r),0===(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===es(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Vo(t,!1,a,n,i);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===es(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Vo(t,!0,n,null,i);break;case"together":Vo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Bo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Dl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Lc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Lc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ho(e,t){if(!ai)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Qo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=14680064&a.subtreeFlags,r|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Go(e,t,n){var r=t.pendingProps;switch(ti(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qo(t),null;case 1:case 17:return Aa(t.type)&&La(),Qo(t),null;case 3:return r=t.stateNode,$i(),_a(Ea),_a(Ta),ns(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(di(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ii&&(sc(ii),ii=null))),Ao(e,t),Qo(t),null;case 5:Xi(t);var a=Ki(Gi.current);if(n=t.type,null!==e&&null!=t.stateNode)Lo(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return Qo(t),null}if(e=Ki(Hi.current),di(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[ha]=t,r[pa]=s,e=0!==(1&t.mode),n){case"dialog":Fr("cancel",r),Fr("close",r);break;case"iframe":case"object":case"embed":Fr("load",r);break;case"video":case"audio":for(a=0;a<Rr.length;a++)Fr(Rr[a],r);break;case"source":Fr("error",r);break;case"img":case"image":case"link":Fr("error",r),Fr("load",r);break;case"details":Fr("toggle",r);break;case"input":$(r,s),Fr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Fr("invalid",r);break;case"textarea":ae(r,s),Fr("invalid",r)}for(var l in ve(n,s),a=null,s)if(s.hasOwnProperty(l)){var c=s[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==s.suppressHydrationWarning&&Xr(r.textContent,c,e),a=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==s.suppressHydrationWarning&&Xr(r.textContent,c,e),a=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Fr("scroll",r)}switch(n){case"input":Q(r),Z(r,s,!0);break;case"textarea":Q(r),se(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Zr)}r=a,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[ha]=t,e[pa]=r,Io(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Fr("cancel",e),Fr("close",e),a=r;break;case"iframe":case"object":case"embed":Fr("load",e),a=r;break;case"video":case"audio":for(a=0;a<Rr.length;a++)Fr(Rr[a],e);a=r;break;case"source":Fr("error",e),a=r;break;case"img":case"image":case"link":Fr("error",e),Fr("load",e),a=r;break;case"details":Fr("toggle",e),a=r;break;case"input":$(e,r),a=J(e,r),Fr("invalid",e);break;case"option":default:a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=M({},r,{value:void 0}),Fr("invalid",e);break;case"textarea":ae(e,r),a=re(e,r),Fr("invalid",e)}for(s in ve(n,a),c=a)if(c.hasOwnProperty(s)){var u=c[s];"style"===s?ge(e,u):"dangerouslySetInnerHTML"===s?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===s?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(o.hasOwnProperty(s)?null!=u&&"onScroll"===s&&Fr("scroll",e):null!=u&&b(e,s,u,l))}switch(n){case"input":Q(e),Z(e,r,!1);break;case"textarea":Q(e),se(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ne(e,!!r.multiple,s,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Qo(t),null;case 6:if(e&&null!=t.stateNode)Oo(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=Ki(Gi.current),Ki(Hi.current),di(t)){if(r=t.stateNode,n=t.memoizedProps,r[ha]=t,(s=r.nodeValue!==n)&&null!==(e=ni))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}s&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ha]=t,t.stateNode=r}return Qo(t),null;case 13:if(_a(Zi),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ai&&null!==ri&&0!==(1&t.mode)&&0===(128&t.flags))hi(),pi(),t.flags|=98560,s=!1;else if(s=di(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(i(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(i(317));s[ha]=t}else pi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Qo(t),s=!1}else null!==ii&&(sc(ii),ii=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zi.current)?0===Ol&&(Ol=3):mc())),null!==t.updateQueue&&(t.flags|=4),Qo(t),null);case 4:return $i(),Ao(e,t),null===e&&qr(t.stateNode.containerInfo),Qo(t),null;case 10:return Ni(t.type._context),Qo(t),null;case 19:if(_a(Zi),null===(s=t.memoizedState))return Qo(t),null;if(r=0!==(128&t.flags),null===(l=s.rendering))if(r)Ho(s,!1);else{if(0!==Ol||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=es(e))){for(t.flags|=128,Ho(s,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ca(Zi,1&Zi.current|2),t.child}e=e.sibling}null!==s.tail&&Ye()>ql&&(t.flags|=128,r=!0,Ho(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=es(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ho(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!ai)return Qo(t),null}else 2*Ye()-s.renderingStartTime>ql&&1073741824!==n&&(t.flags|=128,r=!0,Ho(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=s.last)?n.sibling=l:t.child=l,s.last=l)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Ye(),t.sibling=null,n=Zi.current,Ca(Zi,r?1&n|2:1&n),t):(Qo(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Al)&&(Qo(t),6&t.subtreeFlags&&(t.flags|=8192)):Qo(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Ko(e,t){switch(ti(t),t.tag){case 1:return Aa(t.type)&&La(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return $i(),_a(Ea),_a(Ta),ns(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Xi(t),null;case 13:if(_a(Zi),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));pi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return _a(Zi),null;case 4:return $i(),null;case 10:return Ni(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Io=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ao=function(){},Lo=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Ki(Hi.current);var i,s=null;switch(n){case"input":a=J(e,a),r=J(e,r),s=[];break;case"select":a=M({},a,{value:void 0}),r=M({},r,{value:void 0}),s=[];break;case"textarea":a=re(e,a),r=re(e,r),s=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ve(n,r),n=null,a)if(!r.hasOwnProperty(u)&&a.hasOwnProperty(u)&&null!=a[u])if("style"===u){var l=a[u];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=a?a[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(s||(s=[]),s.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Fr("scroll",e),s||l===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}},Oo=function(e,t,n,r){n!==r&&(t.flags|=4)};var Jo=!1,$o=!1,Yo="function"===typeof WeakSet?WeakSet:Set,Xo=null;function Zo(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){jc(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){jc(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var a=r=r.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,void 0!==i&&el(t,n,i)}a=a.next}while(a!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function al(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function il(e){var t=e.alternate;null!==t&&(e.alternate=null,il(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ha],delete t[pa],delete t[ma],delete t[ga],delete t[ya])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sl(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,dl=!1;function hl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(at,n)}catch(o){}switch(n.tag){case 5:$o||Zo(n,t);case 6:var r=ul,a=dl;ul=null,hl(e,t,n),dl=a,null!==(ul=r)&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?la(e.parentNode,n):1===e.nodeType&&la(e,n),qt(e)):la(ul,n.stateNode));break;case 4:r=ul,a=dl,ul=n.stateNode.containerInfo,dl=!0,hl(e,t,n),ul=r,dl=a;break;case 0:case 11:case 14:case 15:if(!$o&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){a=r=r.next;do{var i=a,s=i.destroy;i=i.tag,void 0!==s&&(0!==(2&i)||0!==(4&i))&&el(n,t,s),a=a.next}while(a!==r)}hl(e,t,n);break;case 1:if(!$o&&(Zo(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){jc(n,t,o)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?($o=(r=$o)||null!==n.memoizedState,hl(e,t,n),$o=r):hl(e,t,n);break;default:hl(e,t,n)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Yo),t.forEach(function(t){var r=Tc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var a=n[r];try{var s=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(i(160));pl(s,o,a),ul=null,dl=!1;var c=a.alternate;null!==c&&(c.return=null),a.return=null}catch(u){jc(a,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),yl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){jc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){jc(e,e.return,g)}}break;case 1:ml(t,e),yl(e),512&r&&null!==n&&Zo(n,n.return);break;case 5:if(ml(t,e),yl(e),512&r&&null!==n&&Zo(n,n.return),32&e.flags){var a=e.stateNode;try{he(a,"")}catch(g){jc(e,e.return,g)}}if(4&r&&null!=(a=e.stateNode)){var s=e.memoizedProps,o=null!==n?n.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===s.type&&null!=s.name&&Y(a,s),be(l,o);var u=be(l,s);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];"style"===d?ge(a,h):"dangerouslySetInnerHTML"===d?de(a,h):"children"===d?he(a,h):b(a,d,h,u)}switch(l){case"input":X(a,s);break;case"textarea":ie(a,s);break;case"select":var p=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!s.multiple;var f=s.value;null!=f?ne(a,!!s.multiple,f,!1):p!==!!s.multiple&&(null!=s.defaultValue?ne(a,!!s.multiple,s.defaultValue,!0):ne(a,!!s.multiple,s.multiple?[]:"",!1))}a[pa]=s}catch(g){jc(e,e.return,g)}}break;case 6:if(ml(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(i(162));a=e.stateNode,s=e.memoizedProps;try{a.nodeValue=s}catch(g){jc(e,e.return,g)}}break;case 3:if(ml(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{qt(t.containerInfo)}catch(g){jc(e,e.return,g)}break;case 4:default:ml(t,e),yl(e);break;case 13:ml(t,e),yl(e),8192&(a=e.child).flags&&(s=null!==a.memoizedState,a.stateNode.isHidden=s,!s||null!==a.alternate&&null!==a.alternate.memoizedState||(Vl=Ye())),4&r&&fl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?($o=(u=$o)||d,ml(t,e),$o=u):ml(t,e),yl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Xo=e,d=e.child;null!==d;){for(h=Xo=d;null!==Xo;){switch(f=(p=Xo).child,p.tag){case 0:case 11:case 14:case 15:nl(4,p,p.return);break;case 1:Zo(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){r=p,n=p.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){jc(r,n,g)}}break;case 5:Zo(p,p.return);break;case 22:if(null!==p.memoizedState){wl(h);continue}}null!==f?(f.return=p,Xo=f):wl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{a=h.stateNode,u?"function"===typeof(s=a.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",o))}catch(g){jc(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){jc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ml(t,e),yl(e),4&r&&fl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(sl(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var a=r.stateNode;32&r.flags&&(he(a,""),r.flags&=-33),cl(e,ol(e),a);break;case 3:case 4:var s=r.stateNode.containerInfo;ll(e,ol(e),s);break;default:throw Error(i(161))}}catch(o){jc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,n){Xo=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Xo;){var a=Xo,i=a.child;if(22===a.tag&&r){var s=null!==a.memoizedState||Jo;if(!s){var o=a.alternate,l=null!==o&&null!==o.memoizedState||$o;o=Jo;var c=$o;if(Jo=s,($o=l)&&!c)for(Xo=a;null!==Xo;)l=(s=Xo).child,22===s.tag&&null!==s.memoizedState?Sl(a):null!==l?(l.return=s,Xo=l):Sl(a);for(;null!==i;)Xo=i,bl(i,t,n),i=i.sibling;Xo=a,Jo=o,$o=c}xl(e)}else 0!==(8772&a.subtreeFlags)&&null!==i?(i.return=a,Xo=i):xl(e)}}function xl(e){for(;null!==Xo;){var t=Xo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$o||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!$o)if(null===n)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&Bi(t,s,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Bi(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&qt(h)}}}break;default:throw Error(i(163))}$o||512&t.flags&&al(t)}catch(p){jc(t,t.return,p)}}if(t===e){Xo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xo=n;break}Xo=t.return}}function wl(e){for(;null!==Xo;){var t=Xo;if(t===e){Xo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xo=n;break}Xo=t.return}}function Sl(e){for(;null!==Xo;){var t=Xo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){jc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var a=t.return;try{r.componentDidMount()}catch(l){jc(t,a,l)}}var i=t.return;try{al(t)}catch(l){jc(t,i,l)}break;case 5:var s=t.return;try{al(t)}catch(l){jc(t,s,l)}}}catch(l){jc(t,t.return,l)}if(t===e){Xo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Xo=o;break}Xo=t.return}}var kl,jl=Math.ceil,_l=x.ReactCurrentDispatcher,Cl=x.ReactCurrentOwner,Nl=x.ReactCurrentBatchConfig,Tl=0,El=null,Pl=null,Il=0,Al=0,Ll=ja(0),Ol=0,Rl=null,Dl=0,Ml=0,zl=0,Fl=null,Ul=null,Vl=0,ql=1/0,Bl=null,Wl=!1,Hl=null,Ql=null,Gl=!1,Kl=null,Jl=0,$l=0,Yl=null,Xl=-1,Zl=0;function ec(){return 0!==(6&Tl)?Ye():-1!==Xl?Xl:Xl=Ye()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Tl)&&0!==Il?Il&-Il:null!==mi.transition?(0===Zl&&(Zl=mt()),Zl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function nc(e,t,n,r){if(50<$l)throw $l=0,Yl=null,Error(i(185));yt(e,n,r),0!==(2&Tl)&&e===El||(e===El&&(0===(2&Tl)&&(Ml|=n),4===Ol&&oc(e,Il)),rc(e,r),1===n&&0===Tl&&0===(1&t.mode)&&(ql=Ye()+500,Fa&&qa()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var s=31-st(i),o=1<<s,l=a[s];-1===l?0!==(o&n)&&0===(o&r)||(a[s]=pt(o,t)):l<=t&&(e.expiredLanes|=o),i&=~o}}(e,t);var r=ht(e,e===El?Il:0);if(0===r)null!==n&&Ke(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ke(n),1===t)0===e.tag?function(e){Fa=!0,Va(e)}(lc.bind(null,e)):Va(lc.bind(null,e)),sa(function(){0===(6&Tl)&&qa()}),n=null;else{switch(xt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ec(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Xl=-1,Zl=0,0!==(6&Tl))throw Error(i(327));var n=e.callbackNode;if(Sc()&&e.callbackNode!==n)return null;var r=ht(e,e===El?Il:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var a=Tl;Tl|=2;var s=fc();for(El===e&&Il===t||(Bl=null,ql=Ye()+500,hc(e,t));;)try{vc();break}catch(l){pc(e,l)}Ci(),_l.current=s,Tl=a,null!==Pl?t=0:(El=null,Il=0,t=Ol)}if(0!==t){if(2===t&&(0!==(a=ft(e))&&(r=a,t=ic(e,a))),1===t)throw n=Rl,hc(e,0),oc(e,r),rc(e,Ye()),n;if(6===t)oc(e,r);else{if(a=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!or(i(),a))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=gc(e,r))&&(0!==(s=ft(e))&&(r=s,t=ic(e,s))),1===t))throw n=Rl,hc(e,0),oc(e,r),rc(e,Ye()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:wc(e,Ul,Bl);break;case 3:if(oc(e,r),(130023424&r)===r&&10<(t=Vl+500-Ye())){if(0!==ht(e,0))break;if(((a=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ra(wc.bind(null,e,Ul,Bl),t);break}wc(e,Ul,Bl);break;case 4:if(oc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,a=-1;0<r;){var o=31-st(r);s=1<<o,(o=t[o])>a&&(a=o),r&=~s}if(r=a,10<(r=(120>(r=Ye()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*jl(r/1960))-r)){e.timeoutHandle=ra(wc.bind(null,e,Ul,Bl),r);break}wc(e,Ul,Bl);break;default:throw Error(i(329))}}}return rc(e,Ye()),e.callbackNode===n?ac.bind(null,e):null}function ic(e,t){var n=Fl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Ul,Ul=n,null!==t&&sc(t)),e}function sc(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function oc(e,t){for(t&=~zl,t&=~Ml,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Tl))throw Error(i(327));Sc();var t=ht(e,0);if(0===(1&t))return rc(e,Ye()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=ft(e);0!==r&&(t=r,n=ic(e,r))}if(1===n)throw n=Rl,hc(e,0),oc(e,t),rc(e,Ye()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Ul,Bl),rc(e,Ye()),null}function cc(e,t){var n=Tl;Tl|=1;try{return e(t)}finally{0===(Tl=n)&&(ql=Ye()+500,Fa&&qa())}}function uc(e){null!==Kl&&0===Kl.tag&&0===(6&Tl)&&Sc();var t=Tl;Tl|=1;var n=Nl.transition,r=bt;try{if(Nl.transition=null,bt=1,e)return e()}finally{bt=r,Nl.transition=n,0===(6&(Tl=t))&&qa()}}function dc(){Al=Ll.current,_a(Ll)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,aa(n)),null!==Pl)for(n=Pl.return;null!==n;){var r=n;switch(ti(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&La();break;case 3:$i(),_a(Ea),_a(Ta),ns();break;case 5:Xi(r);break;case 4:$i();break;case 13:case 19:_a(Zi);break;case 10:Ni(r.type._context);break;case 22:case 23:dc()}n=n.return}if(El=e,Pl=e=Lc(e.current,null),Il=Al=t,Ol=0,Rl=null,zl=Ml=Dl=0,Ul=Fl=null,null!==Ii){for(t=0;t<Ii.length;t++)if(null!==(r=(n=Ii[t]).interleaved)){n.interleaved=null;var a=r.next,i=n.pending;if(null!==i){var s=i.next;i.next=a,r.next=s}n.pending=r}Ii=null}return e}function pc(e,t){for(;;){var n=Pl;try{if(Ci(),rs.current=Ys,cs){for(var r=ss.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}cs=!1}if(is=0,ls=os=ss=null,us=!1,ds=0,Cl.current=null,null===n||null===n.return){Ol=1,Rl=t,Pl=null;break}e:{var s=e,o=n.return,l=n,c=t;if(t=Il,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=go(o);if(null!==f){f.flags&=-257,yo(f,o,l,0,t),1&f.mode&&mo(s,u,t),c=u;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){mo(s,u,t),mc();break e}c=Error(i(426))}else if(ai&&1&l.mode){var y=go(o);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),yo(y,o,l,0,t),fi(lo(c,l));break e}}s=c=lo(c,l),4!==Ol&&(Ol=2),null===Fl?Fl=[s]:Fl.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Vi(s,po(0,c,t));break e;case 1:l=c;var v=s.type,b=s.stateNode;if(0===(128&s.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Ql||!Ql.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t,Vi(s,fo(s,l,t));break e}}s=s.return}while(null!==s)}xc(n)}catch(x){t=x,Pl===n&&null!==n&&(Pl=n=n.return);continue}break}}function fc(){var e=_l.current;return _l.current=Ys,null===e?Ys:e}function mc(){0!==Ol&&3!==Ol&&2!==Ol||(Ol=4),null===El||0===(268435455&Dl)&&0===(268435455&Ml)||oc(El,Il)}function gc(e,t){var n=Tl;Tl|=2;var r=fc();for(El===e&&Il===t||(Bl=null,hc(e,t));;)try{yc();break}catch(a){pc(e,a)}if(Ci(),Tl=n,_l.current=r,null!==Pl)throw Error(i(261));return El=null,Il=0,Ol}function yc(){for(;null!==Pl;)bc(Pl)}function vc(){for(;null!==Pl&&!Je();)bc(Pl)}function bc(e){var t=kl(e.alternate,e,Al);e.memoizedProps=e.pendingProps,null===t?xc(e):Pl=t,Cl.current=null}function xc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Go(n,t,Al)))return void(Pl=n)}else{if(null!==(n=Ko(n,t)))return n.flags&=32767,void(Pl=n);if(null===e)return Ol=6,void(Pl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pl=t);Pl=t=e}while(null!==t);0===Ol&&(Ol=5)}function wc(e,t,n){var r=bt,a=Nl.transition;try{Nl.transition=null,bt=1,function(e,t,n,r){do{Sc()}while(null!==Kl);if(0!==(6&Tl))throw Error(i(327));n=e.finishedWork;var a=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-st(n),i=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~i}}(e,s),e===El&&(Pl=El=null,Il=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gl||(Gl=!0,Ec(tt,function(){return Sc(),null})),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=Nl.transition,Nl.transition=null;var o=bt;bt=1;var l=Tl;Tl|=4,Cl.current=null,function(e,t){if(ea=Wt,pr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var a=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(w){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,p=null;t:for(;;){for(var f;h!==n||0!==a&&3!==h.nodeType||(l=o+a),h!==s||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===n&&++u===a&&(l=o),p===s&&++d===r&&(c=o),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ta={focusedElem:e,selectionRange:n},Wt=!1,Xo=t;null!==Xo;)if(e=(t=Xo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xo=e;else for(;null!==Xo;){t=Xo;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:to(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(i(163))}}catch(w){jc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Xo=e;break}Xo=t.return}m=tl,tl=!1}(e,n),gl(n,e),fr(ta),Wt=!!ea,ta=ea=null,e.current=n,vl(n,e,a),$e(),Tl=l,bt=o,Nl.transition=s}else e.current=n;if(Gl&&(Gl=!1,Kl=e,Jl=a),s=e.pendingLanes,0===s&&(Ql=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(at,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Ye()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(Wl)throw Wl=!1,e=Hl,Hl=null,e;0!==(1&Jl)&&0!==e.tag&&Sc(),s=e.pendingLanes,0!==(1&s)?e===Yl?$l++:($l=0,Yl=e):$l=0,qa()}(e,t,n,r)}finally{Nl.transition=a,bt=r}return null}function Sc(){if(null!==Kl){var e=xt(Jl),t=Nl.transition,n=bt;try{if(Nl.transition=null,bt=16>e?16:e,null===Kl)var r=!1;else{if(e=Kl,Kl=null,Jl=0,0!==(6&Tl))throw Error(i(331));var a=Tl;for(Tl|=4,Xo=e.current;null!==Xo;){var s=Xo,o=s.child;if(0!==(16&Xo.flags)){var l=s.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Xo=u;null!==Xo;){var d=Xo;switch(d.tag){case 0:case 11:case 15:nl(8,d,s)}var h=d.child;if(null!==h)h.return=d,Xo=h;else for(;null!==Xo;){var p=(d=Xo).sibling,f=d.return;if(il(d),d===u){Xo=null;break}if(null!==p){p.return=f,Xo=p;break}Xo=f}}}var m=s.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Xo=s}}if(0!==(2064&s.subtreeFlags)&&null!==o)o.return=s,Xo=o;else e:for(;null!==Xo;){if(0!==(2048&(s=Xo).flags))switch(s.tag){case 0:case 11:case 15:nl(9,s,s.return)}var v=s.sibling;if(null!==v){v.return=s.return,Xo=v;break e}Xo=s.return}}var b=e.current;for(Xo=b;null!==Xo;){var x=(o=Xo).child;if(0!==(2064&o.subtreeFlags)&&null!==x)x.return=o,Xo=x;else e:for(o=b;null!==Xo;){if(0!==(2048&(l=Xo).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(S){jc(l,l.return,S)}if(l===o){Xo=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Xo=w;break e}Xo=l.return}}if(Tl=a,qa(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(at,e)}catch(S){}r=!0}return r}finally{bt=n,Nl.transition=t}}return!1}function kc(e,t,n){e=Fi(e,t=po(0,t=lo(n,t),1),1),t=ec(),null!==e&&(yt(e,1,t),rc(e,t))}function jc(e,t,n){if(3===e.tag)kc(e,e,n);else for(;null!==t;){if(3===t.tag){kc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ql||!Ql.has(r))){t=Fi(t,e=fo(t,e=lo(n,e),1),1),e=ec(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function _c(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,El===e&&(Il&n)===n&&(4===Ol||3===Ol&&(130023424&Il)===Il&&500>Ye()-Vl?hc(e,0):zl|=n),rc(e,t)}function Cc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Oi(e,t))&&(yt(e,t,n),rc(e,n))}function Nc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cc(e,n)}function Tc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),Cc(e,n)}function Ec(e,t){return Ge(e,t)}function Pc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ic(e,t,n,r){return new Pc(e,t,n,r)}function Ac(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Lc(e,t){var n=e.alternate;return null===n?((n=Ic(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Oc(e,t,n,r,a,s){var o=2;if(r=e,"function"===typeof e)Ac(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case k:return Rc(n.children,a,s,t);case j:o=8,a|=8;break;case _:return(e=Ic(12,n,t,2|a)).elementType=_,e.lanes=s,e;case E:return(e=Ic(13,n,t,a)).elementType=E,e.lanes=s,e;case P:return(e=Ic(19,n,t,a)).elementType=P,e.lanes=s,e;case L:return Dc(n,a,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:o=10;break e;case N:o=9;break e;case T:o=11;break e;case I:o=14;break e;case A:o=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Ic(o,n,t,a)).elementType=e,t.type=r,t.lanes=s,t}function Rc(e,t,n,r){return(e=Ic(7,e,r,t)).lanes=n,e}function Dc(e,t,n,r){return(e=Ic(22,e,r,t)).elementType=L,e.lanes=n,e.stateNode={isHidden:!1},e}function Mc(e,t,n){return(e=Ic(6,e,null,t)).lanes=n,e}function zc(e,t,n){return(t=Ic(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Fc(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Uc(e,t,n,r,a,i,s,o,l){return e=new Fc(e,t,n,o,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Ic(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Di(i),e}function Vc(e){if(!e)return Na;e:{if(qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Aa(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Aa(n))return Ra(e,n,t)}return t}function qc(e,t,n,r,a,i,s,o,l){return(e=Uc(n,r,!0,e,0,i,0,o,l)).context=Vc(null),n=e.current,(i=zi(r=ec(),a=tc(n))).callback=void 0!==t&&null!==t?t:null,Fi(n,i,a),e.current.lanes=a,yt(e,a,r),rc(e,r),e}function Bc(e,t,n,r){var a=t.current,i=ec(),s=tc(a);return n=Vc(n),null===t.context?t.context=n:t.pendingContext=n,(t=zi(i,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Fi(a,t,s))&&(nc(e,a,s,i),Ui(e,a,s)),s}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Qc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}kl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ea.current)bo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bo=!1,function(e,t,n){switch(t.tag){case 3:Eo(t),pi();break;case 5:Yi(t);break;case 1:Aa(t.type)&&Da(t);break;case 4:Ji(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Ca(Si,r._currentValue),r._currentValue=a;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ca(Zi,1&Zi.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Mo(e,t,n):(Ca(Zi,1&Zi.current),null!==(e=Wo(e,t,n))?e.sibling:null);Ca(Zi,1&Zi.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qo(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ca(Zi,Zi.current),r)break;return null;case 22:case 23:return t.lanes=0,jo(e,t,n)}return Wo(e,t,n)}(e,t,n);bo=0!==(131072&e.flags)}else bo=!1,ai&&0!==(1048576&t.flags)&&Za(t,Qa,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Bo(e,t),e=t.pendingProps;var a=Ia(t,Ta.current);Ei(t,n),a=ms(null,t,r,e,a,n);var s=gs();return t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Aa(r)?(s=!0,Da(t)):s=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Di(t),a.updater=ro,t.stateNode=a,a._reactInternals=t,oo(t,r,e,n),t=To(null,t,r,!0,s,n)):(t.tag=0,ai&&s&&ei(t),xo(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Bo(e,t),e=t.pendingProps,r=(a=r._init)(r._payload),t.type=r,a=t.tag=function(e){if("function"===typeof e)return Ac(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===I)return 14}return 2}(r),e=to(r,e),a){case 0:t=Co(null,t,r,e,n);break e;case 1:t=No(null,t,r,e,n);break e;case 11:t=wo(null,t,r,e,n);break e;case 14:t=So(null,t,r,to(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,Co(e,t,r,a=t.elementType===r?a:to(r,a),n);case 1:return r=t.type,a=t.pendingProps,No(e,t,r,a=t.elementType===r?a:to(r,a),n);case 3:e:{if(Eo(t),null===e)throw Error(i(387));r=t.pendingProps,a=(s=t.memoizedState).element,Mi(e,t),qi(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Po(e,t,r,n,a=lo(Error(i(423)),t));break e}if(r!==a){t=Po(e,t,r,n,a=lo(Error(i(424)),t));break e}for(ri=ca(t.stateNode.containerInfo.firstChild),ni=t,ai=!0,ii=null,n=wi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(pi(),r===a){t=Wo(e,t,n);break e}xo(e,t,r,n)}t=t.child}return t;case 5:return Yi(t),null===e&&ci(t),r=t.type,a=t.pendingProps,s=null!==e?e.memoizedProps:null,o=a.children,na(r,a)?o=null:null!==s&&na(r,s)&&(t.flags|=32),_o(e,t),xo(e,t,o,n),t.child;case 6:return null===e&&ci(t),null;case 13:return Mo(e,t,n);case 4:return Ji(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=xi(t,null,r,n):xo(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,wo(e,t,r,a=t.elementType===r?a:to(r,a),n);case 7:return xo(e,t,t.pendingProps,n),t.child;case 8:case 12:return xo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,s=t.memoizedProps,o=a.value,Ca(Si,r._currentValue),r._currentValue=o,null!==s)if(or(s.value,o)){if(s.children===a.children&&!Ea.current){t=Wo(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){o=s.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===s.tag){(c=zi(-1,n&-n)).tag=2;var u=s.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),Ti(s.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===s.tag)o=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(o=s.return))throw Error(i(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ti(o,n,t),o=s.sibling}else o=s.child;if(null!==o)o.return=s;else for(o=s;null!==o;){if(o===t){o=null;break}if(null!==(s=o.sibling)){s.return=o.return,o=s;break}o=o.return}s=o}xo(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,Ei(t,n),r=r(a=Pi(a)),t.flags|=1,xo(e,t,r,n),t.child;case 14:return a=to(r=t.type,t.pendingProps),So(e,t,r,a=to(r.type,a),n);case 15:return ko(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:to(r,a),Bo(e,t),t.tag=1,Aa(r)?(e=!0,Da(t)):e=!1,Ei(t,n),io(t,r,a),oo(t,r,a,n),To(null,t,r,!0,e,n);case 19:return qo(e,t,n);case 22:return jo(e,t,n)}throw Error(i(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function Kc(e){this._internalRoot=e}function Jc(e){this._internalRoot=e}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xc(){}function Zc(e,t,n,r,a){var i=n._reactRootContainer;if(i){var s=i;if("function"===typeof a){var o=a;a=function(){var e=Wc(s);o.call(e)}}Bc(t,s,e,a)}else s=function(e,t,n,r,a){if(a){if("function"===typeof r){var i=r;r=function(){var e=Wc(s);i.call(e)}}var s=qc(t,r,e,0,null,!1,0,"",Xc);return e._reactRootContainer=s,e[fa]=s.current,qr(8===e.nodeType?e.parentNode:e),uc(),s}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof r){var o=r;r=function(){var e=Wc(l);o.call(e)}}var l=Uc(e,0,!1,null,0,!1,0,"",Xc);return e._reactRootContainer=l,e[fa]=l.current,qr(8===e.nodeType?e.parentNode:e),uc(function(){Bc(t,l,n,r)}),l}(n,t,e,a,r);return Wc(s)}Jc.prototype.render=Kc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Bc(e,t,null,null)},Jc.prototype.unmount=Kc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc(function(){Bc(null,e,null,null)}),t[fa]=null}},Jc.prototype.unstable_scheduleHydration=function(e){if(e){var t=jt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Lt.length&&0!==t&&t<Lt[n].priority;n++);Lt.splice(n,0,e),0===n&&Mt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(vt(t,1|n),rc(t,Ye()),0===(6&Tl)&&(ql=Ye()+500,qa()))}break;case 13:uc(function(){var t=Oi(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),Qc(e,1)}},St=function(e){if(13===e.tag){var t=Oi(e,134217728);if(null!==t)nc(t,e,134217728,ec());Qc(e,134217728)}},kt=function(e){if(13===e.tag){var t=tc(e),n=Oi(e,t);if(null!==n)nc(n,e,t,ec());Qc(e,t)}},jt=function(){return bt},_t=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},Se=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=wa(r);if(!a)throw Error(i(90));G(r),X(r,a)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Te=cc,Ee=uc;var eu={usingClientEntryPoint:!1,Events:[ba,xa,wa,Ce,Ne,cc]},tu={findFiberByHostInstance:va,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{at=ru.inject(nu),it=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$c(t))throw Error(i(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!$c(e))throw Error(i(299));var n=!1,r="",a=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=Uc(e,1,!1,null,0,n,0,r,a),e[fa]=t.current,qr(8===e.nodeType?e.parentNode:e),new Kc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Yc(t))throw Error(i(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$c(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,a=!1,s="",o=Gc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(a=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,a,0,s,o),e[fa]=t.current,qr(e),r)for(e=0;e<r.length;e++)a=(a=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Jc(t)},t.render=function(e,t,n){if(!Yc(t))throw Error(i(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Yc(e))throw Error(i(40));return!!e._reactRootContainer&&(uc(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[fa]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Yc(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return Zc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},736:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=r(n(374));class i extends a.default{eq(e,t){return this.url.searchParams.append(e,"eq.".concat(t)),this}neq(e,t){return this.url.searchParams.append(e,"neq.".concat(t)),this}gt(e,t){return this.url.searchParams.append(e,"gt.".concat(t)),this}gte(e,t){return this.url.searchParams.append(e,"gte.".concat(t)),this}lt(e,t){return this.url.searchParams.append(e,"lt.".concat(t)),this}lte(e,t){return this.url.searchParams.append(e,"lte.".concat(t)),this}like(e,t){return this.url.searchParams.append(e,"like.".concat(t)),this}likeAllOf(e,t){return this.url.searchParams.append(e,"like(all).{".concat(t.join(","),"}")),this}likeAnyOf(e,t){return this.url.searchParams.append(e,"like(any).{".concat(t.join(","),"}")),this}ilike(e,t){return this.url.searchParams.append(e,"ilike.".concat(t)),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,"ilike(all).{".concat(t.join(","),"}")),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,"ilike(any).{".concat(t.join(","),"}")),this}is(e,t){return this.url.searchParams.append(e,"is.".concat(t)),this}in(e,t){const n=Array.from(new Set(t)).map(e=>"string"===typeof e&&new RegExp("[,()]").test(e)?'"'.concat(e,'"'):"".concat(e)).join(",");return this.url.searchParams.append(e,"in.(".concat(n,")")),this}contains(e,t){return"string"===typeof t?this.url.searchParams.append(e,"cs.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cs.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cs.".concat(JSON.stringify(t))),this}containedBy(e,t){return"string"===typeof t?this.url.searchParams.append(e,"cd.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cd.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cd.".concat(JSON.stringify(t))),this}rangeGt(e,t){return this.url.searchParams.append(e,"sr.".concat(t)),this}rangeGte(e,t){return this.url.searchParams.append(e,"nxl.".concat(t)),this}rangeLt(e,t){return this.url.searchParams.append(e,"sl.".concat(t)),this}rangeLte(e,t){return this.url.searchParams.append(e,"nxr.".concat(t)),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,"adj.".concat(t)),this}overlaps(e,t){return"string"===typeof t?this.url.searchParams.append(e,"ov.".concat(t)):this.url.searchParams.append(e,"ov.{".concat(t.join(","),"}")),this}textSearch(e,t){let{config:n,type:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a="";"plain"===r?a="pl":"phrase"===r?a="ph":"websearch"===r&&(a="w");const i=void 0===n?"":"(".concat(n,")");return this.url.searchParams.append(e,"".concat(a,"fts").concat(i,".").concat(t)),this}match(e){return Object.entries(e).forEach(e=>{let[t,n]=e;this.url.searchParams.append(t,"eq.".concat(n))}),this}not(e,t,n){return this.url.searchParams.append(e,"not.".concat(t,".").concat(n)),this}or(e){let{foreignTable:t,referencedTable:n=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=n?"".concat(n,".or"):"or";return this.url.searchParams.append(r,"(".concat(e,")")),this}filter(e,t,n){return this.url.searchParams.append(e,"".concat(t,".").concat(n)),this}}t.default=i},745:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_HEADERS=void 0;const r=n(400);t.DEFAULT_HEADERS={"X-Client-Info":"postgrest-js/".concat(r.version)}},829:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=r(n(736));t.default=class{constructor(e,t){let{headers:n={},schema:r,fetch:a}=t;this.url=e,this.headers=n,this.schema=r,this.fetch=a}select(e){let{head:t=!1,count:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=t?"HEAD":"GET";let i=!1;const s=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!i?"":('"'===e&&(i=!i),e)).join("");return this.url.searchParams.set("select",s),n&&(this.headers.Prefer="count=".concat(n)),new a.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e){let{count:t,defaultToNull:n=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=[];if(this.headers.Prefer&&r.push(this.headers.Prefer),t&&r.push("count=".concat(t)),n||r.push("missing=default"),this.headers.Prefer=r.join(","),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>'"'.concat(e,'"'));this.url.searchParams.set("columns",e.join(","))}}return new a.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e){let{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=["resolution=".concat(n?"ignore":"merge","-duplicates")];if(void 0!==t&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&s.push(this.headers.Prefer),r&&s.push("count=".concat(r)),i||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>'"'.concat(e,'"'));this.url.searchParams.set("columns",e.join(","))}}return new a.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e){let{count:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),t&&n.push("count=".concat(t)),this.headers.Prefer=n.join(","),new a.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete(){let{count:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=[];return e&&t.push("count=".concat(e)),this.headers.Prefer&&t.unshift(this.headers.Prefer),this.headers.Prefer=t.join(","),new a.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},980:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PostgrestError=t.PostgrestBuilder=t.PostgrestTransformBuilder=t.PostgrestFilterBuilder=t.PostgrestQueryBuilder=t.PostgrestClient=void 0;const a=r(n(210));t.PostgrestClient=a.default;const i=r(n(829));t.PostgrestQueryBuilder=i.default;const s=r(n(736));t.PostgrestFilterBuilder=s.default;const o=r(n(374));t.PostgrestTransformBuilder=o.default;const l=r(n(286));t.PostgrestBuilder=l.default;const c=r(n(611));t.PostgrestError=c.default,t.default={PostgrestClient:a.default,PostgrestQueryBuilder:i.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:l.default,PostgrestError:c.default}}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r=n(43),a=n(391),i=n(237);function s(e){e()}var o={notify(){},get:()=>[]};function l(e,t){let n,r=o,a=0,i=!1;function l(){d.onStateChange&&d.onStateChange()}function c(){a++,n||(n=t?t.addNestedSub(l):e.subscribe(l),r=function(){let e=null,t=null;return{clear(){e=null,t=null},notify(){s(()=>{let t=e;for(;t;)t.callback(),t=t.next})},get(){const t=[];let n=e;for(;n;)t.push(n),n=n.next;return t},subscribe(n){let r=!0;const a=t={callback:n,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){r&&null!==e&&(r=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}())}function u(){a--,n&&0===a&&(n(),n=void 0,r.clear(),r=o)}const d={addNestedSub:function(e){c();const t=r.subscribe(e);let n=!1;return()=>{n||(n=!0,t(),u())}},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:l,isSubscribed:function(){return i},trySubscribe:function(){i||(i=!0,c())},tryUnsubscribe:function(){i&&(i=!1,u())},getListeners:()=>r};return d}var c=(()=>!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement))(),u=(()=>"undefined"!==typeof navigator&&"ReactNative"===navigator.product)(),d=(()=>c||u?r.useLayoutEffect:r.useEffect)();Object.defineProperty,Object.getOwnPropertyNames,Object.getOwnPropertySymbols,Object.getOwnPropertyDescriptor,Object.getPrototypeOf,Object.prototype;var h=Symbol.for("react-redux-context"),p="undefined"!==typeof globalThis?globalThis:{};function f(){var e;if(!r.createContext)return{};const t=null!==(e=p[h])&&void 0!==e?e:p[h]=new Map;let n=t.get(r.createContext);return n||(n=r.createContext(null),t.set(r.createContext,n)),n}var m=f();var g=function(e){const{children:t,context:n,serverState:a,store:i}=e,s=r.useMemo(()=>{const e=l(i);return{store:i,subscription:e,getServerState:a?()=>a:void 0}},[i,a]),o=r.useMemo(()=>i.getState(),[i]);d(()=>{const{subscription:e}=s;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),o!==i.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}},[s,o]);const c=n||m;return r.createElement(c.Provider,{value:s},t)};function y(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m;return function(){return r.useContext(e)}}var v=y();function b(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m;const t=e===m?v:y(e),n=()=>{const{store:e}=t();return e};return Object.assign(n,{withTypes:()=>n}),n}var x=b();function w(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m;const t=e===m?x:b(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var S=w(),k=(e,t)=>e===t;function j(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m;const t=e===m?v:y(e),n=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{equalityFn:a=k}="function"===typeof n?{equalityFn:n}:n;const s=t(),{store:o,subscription:l,getServerState:c}=s,u=(r.useRef(!0),r.useCallback({[e.name]:t=>e(t)}[e.name],[e])),d=(0,i.useSyncExternalStoreWithSelector)(l.addNestedSub,o.getState,c||o.getState,u,a);return r.useDebugValue(d),d};return Object.assign(n,{withTypes:()=>n}),n}var _=j();function C(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function N(e){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(e)}function T(e){var t=function(e,t){if("object"!=N(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=N(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==N(t)?t:t+""}function E(e,t,n){return(t=T(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach(function(t){E(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function A(e){return"Minified Redux error #".concat(e,"; visit https://redux.js.org/Errors?code=").concat(e," for the full message or use the non-minified dev environment for full errors. ")}var L=(()=>"function"===typeof Symbol&&Symbol.observable||"@@observable")(),O=()=>Math.random().toString(36).substring(7).split("").join("."),R={INIT:"@@redux/INIT".concat(O()),REPLACE:"@@redux/REPLACE".concat(O()),PROBE_UNKNOWN_ACTION:()=>"@@redux/PROBE_UNKNOWN_ACTION".concat(O())};function D(e){if("object"!==typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function M(e,t,n){if("function"!==typeof e)throw new Error(A(2));if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(A(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(A(1));return n(M)(e,t)}let r=e,a=t,i=new Map,s=i,o=0,l=!1;function c(){s===i&&(s=new Map,i.forEach((e,t)=>{s.set(t,e)}))}function u(){if(l)throw new Error(A(3));return a}function d(e){if("function"!==typeof e)throw new Error(A(4));if(l)throw new Error(A(5));let t=!0;c();const n=o++;return s.set(n,e),function(){if(t){if(l)throw new Error(A(6));t=!1,c(),s.delete(n),i=null}}}function h(e){if(!D(e))throw new Error(A(7));if("undefined"===typeof e.type)throw new Error(A(8));if("string"!==typeof e.type)throw new Error(A(17));if(l)throw new Error(A(9));try{l=!0,a=r(a,e)}finally{l=!1}return(i=s).forEach(e=>{e()}),e}h({type:R.INIT});return{dispatch:h,subscribe:d,getState:u,replaceReducer:function(e){if("function"!==typeof e)throw new Error(A(10));r=e,h({type:R.REPLACE})},[L]:function(){const e=d;return{subscribe(t){if("object"!==typeof t||null===t)throw new Error(A(11));function n(){const e=t;e.next&&e.next(u())}n();return{unsubscribe:e(n)}},[L](){return this}}}}}function z(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const r=t[s];0,"function"===typeof e[r]&&(n[r]=e[r])}const r=Object.keys(n);let a;try{!function(e){Object.keys(e).forEach(t=>{const n=e[t];if("undefined"===typeof n(void 0,{type:R.INIT}))throw new Error(A(12));if("undefined"===typeof n(void 0,{type:R.PROBE_UNKNOWN_ACTION()}))throw new Error(A(13))})}(n)}catch(i){a=i}return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(a)throw a;let i=!1;const s={};for(let a=0;a<r.length;a++){const o=r[a],l=n[o],c=e[o],u=l(c,t);if("undefined"===typeof u){t&&t.type;throw new Error(A(14))}s[o]=u,i=i||u!==c}return i=i||r.length!==Object.keys(e).length,i?s:e}}function F(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?e=>e:1===t.length?t[0]:t.reduce((e,t)=>function(){return e(t(...arguments))})}function U(e){return t=>{let{dispatch:n,getState:r}=t;return t=>a=>"function"===typeof a?a(n,r,e):t(a)}}var V=U(),q=U,B=Symbol.for("immer-nothing"),W=Symbol.for("immer-draftable"),H=Symbol.for("immer-state");function Q(e){throw new Error("[Immer] minified error nr: ".concat(e,". Full error at: https://bit.ly/3cXEKWf"))}var G=Object.getPrototypeOf;function K(e){return!!e&&!!e[H]}function J(e){var t;return!!e&&(Y(e)||Array.isArray(e)||!!e[W]||!(null===(t=e.constructor)||void 0===t||!t[W])||ne(e)||re(e))}var $=Object.prototype.constructor.toString();function Y(e){if(!e||"object"!==typeof e)return!1;const t=G(e);if(null===t)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===$}function X(e,t){0===Z(e)?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function Z(e){const t=e[H];return t?t.type_:Array.isArray(e)?1:ne(e)?2:re(e)?3:0}function ee(e,t){return 2===Z(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function te(e,t,n){const r=Z(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function ne(e){return e instanceof Map}function re(e){return e instanceof Set}function ae(e){return e.copy_||e.base_}function ie(e,t){if(ne(e))return new Map(e);if(re(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=Y(e);if(!0===t||"class_only"===t&&!n){const t=Object.getOwnPropertyDescriptors(e);delete t[H];let n=Reflect.ownKeys(t);for(let r=0;r<n.length;r++){const a=n[r],i=t[a];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[a]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[a]})}return Object.create(G(e),t)}{const t=G(e);if(null!==t&&n)return I({},e);const r=Object.create(t);return Object.assign(r,e)}}function se(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return le(e)||K(e)||!J(e)||(Z(e)>1&&(e.set=e.add=e.clear=e.delete=oe),Object.freeze(e),t&&Object.entries(e).forEach(e=>{let[t,n]=e;return se(n,!0)})),e}function oe(){Q(2)}function le(e){return Object.isFrozen(e)}var ce,ue={};function de(e){const t=ue[e];return t||Q(0),t}function he(){return ce}function pe(e,t){t&&(de("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function fe(e){me(e),e.drafts_.forEach(ye),e.drafts_=null}function me(e){e===ce&&(ce=e.parent_)}function ge(e){return ce={drafts_:[],parent_:ce,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function ye(e){const t=e[H];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function ve(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return void 0!==e&&e!==n?(n[H].modified_&&(fe(t),Q(4)),J(e)&&(e=be(t,e),t.parent_||we(t,e)),t.patches_&&de("Patches").generateReplacementPatches_(n[H].base_,e,t.patches_,t.inversePatches_)):e=be(t,n,[]),fe(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==B?e:void 0}function be(e,t,n){if(le(t))return t;const r=t[H];if(!r)return X(t,(a,i)=>xe(e,r,t,a,i,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return we(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const t=r.copy_;let a=t,i=!1;3===r.type_&&(a=new Set(t),t.clear(),i=!0),X(a,(a,s)=>xe(e,r,t,a,s,n,i)),we(e,t,!1),n&&e.patches_&&de("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function xe(e,t,n,r,a,i,s){if(K(a)){const s=be(e,a,i&&t&&3!==t.type_&&!ee(t.assigned_,r)?i.concat(r):void 0);if(te(n,r,s),!K(s))return;e.canAutoFreeze_=!1}else s&&n.add(a);if(J(a)&&!le(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;be(e,a),t&&t.scope_.parent_||"symbol"===typeof r||!Object.prototype.propertyIsEnumerable.call(n,r)||we(e,a)}}function we(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&se(t,n)}var Se={get(e,t){if(t===H)return e;const n=ae(e);if(!ee(n,t))return function(e,t,n){var r;const a=_e(t,n);return a?"value"in a?a.value:null===(r=a.get)||void 0===r?void 0:r.call(e.draft_):void 0}(e,n,t);const r=n[t];return e.finalized_||!J(r)?r:r===je(e.base_,t)?(Ne(e),e.copy_[t]=Te(r,e)):r},has:(e,t)=>t in ae(e),ownKeys:e=>Reflect.ownKeys(ae(e)),set(e,t,n){const r=_e(ae(e),t);if(null!==r&&void 0!==r&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const r=je(ae(e),t),s=null===r||void 0===r?void 0:r[H];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(((a=n)===(i=r)?0!==a||1/a===1/i:a!==a&&i!==i)&&(void 0!==n||ee(e.base_,t)))return!0;Ne(e),Ce(e)}var a,i;return e.copy_[t]===n&&(void 0!==n||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==je(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,Ne(e),Ce(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const n=ae(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty(){Q(11)},getPrototypeOf:e=>G(e.base_),setPrototypeOf(){Q(12)}},ke={};function je(e,t){const n=e[H];return(n?ae(n):e)[t]}function _e(e,t){if(!(t in e))return;let n=G(e);for(;n;){const e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=G(n)}}function Ce(e){e.modified_||(e.modified_=!0,e.parent_&&Ce(e.parent_))}function Ne(e){e.copy_||(e.copy_=ie(e.base_,e.scope_.immer_.useStrictShallowCopy_))}X(Se,(e,t)=>{ke[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),ke.deleteProperty=function(e,t){return ke.set.call(this,e,t,void 0)},ke.set=function(e,t,n){return Se.set.call(this,e[0],t,n,e[0])};function Te(e,t){const n=ne(e)?de("MapSet").proxyMap_(e,t):re(e)?de("MapSet").proxySet_(e,t):function(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:he(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=r,i=Se;n&&(a=[r],i=ke);const{revoke:s,proxy:o}=Proxy.revocable(a,i);return r.draft_=o,r.revoke_=s,o}(e,t);return(t?t.scope_:he()).drafts_.push(n),n}function Ee(e){if(!J(e)||le(e))return e;const t=e[H];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=ie(e,t.scope_.immer_.useStrictShallowCopy_)}else n=ie(e,!0);return X(n,(e,t)=>{te(n,e,Ee(t))}),t&&(t.finalized_=!1),n}var Pe=new class{constructor(e){var t=this;this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,n)=>{if("function"===typeof e&&"function"!==typeof t){const n=t;t=e;const r=this;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;for(var a=arguments.length,i=new Array(a>1?a-1:0),s=1;s<a;s++)i[s-1]=arguments[s];return r.produce(e,e=>t.call(this,e,...i))}}let r;if("function"!==typeof t&&Q(6),void 0!==n&&"function"!==typeof n&&Q(7),J(e)){const a=ge(this),i=Te(e,void 0);let s=!0;try{r=t(i),s=!1}finally{s?fe(a):me(a)}return pe(a,n),ve(r,a)}if(!e||"object"!==typeof e){if(r=t(e),void 0===r&&(r=e),r===B&&(r=void 0),this.autoFreeze_&&se(r,!0),n){const t=[],a=[];de("Patches").generateReplacementPatches_(e,r,t,a),n(t,a)}return r}Q(1)},this.produceWithPatches=(e,n)=>{if("function"===typeof e)return function(n){for(var r=arguments.length,a=new Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];return t.produceWithPatches(n,t=>e(t,...a))};let r,a;return[this.produce(e,n,(e,t)=>{r=e,a=t}),r,a]},"boolean"===typeof(null===e||void 0===e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),"boolean"===typeof(null===e||void 0===e?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){J(e)||Q(8),K(e)&&(e=function(e){K(e)||Q(10);return Ee(e)}(e));const t=ge(this),n=Te(e,void 0);return n[H].isManual_=!0,me(t),n}finishDraft(e,t){const n=e&&e[H];n&&n.isManual_||Q(9);const{scope_:r}=n;return pe(r,t),ve(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));const r=de("Patches").applyPatches_;return K(e)?r(e,t):this.produce(e,e=>r(e,t))}},Ie=Pe.produce;Pe.produceWithPatches.bind(Pe),Pe.setAutoFreeze.bind(Pe),Pe.setUseStrictShallowCopy.bind(Pe),Pe.applyPatches.bind(Pe),Pe.createDraft.bind(Pe),Pe.finishDraft.bind(Pe);const Ae=["reducerPath"];var Le="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?F:F.apply(null,arguments)},Oe=("undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__,e=>e&&"function"===typeof e.match);function Re(e,t){function n(){if(t){let n=t(...arguments);if(!n)throw new Error(ht(0));return I(I({type:e,payload:n.payload},"meta"in n&&{meta:n.meta}),"error"in n&&{error:n.error})}return{type:e,payload:arguments.length<=0?void 0:arguments[0]}}return n.toString=()=>"".concat(e),n.type=e,n.match=t=>function(e){return D(e)&&"type"in e&&"string"===typeof e.type}(t)&&t.type===e,n}var De=class e extends Array{constructor(){super(...arguments),Object.setPrototypeOf(this,e.prototype)}static get[Symbol.species](){return e}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return super.concat.apply(this,t)}prepend(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return 1===n.length&&Array.isArray(n[0])?new e(...n[0].concat(this)):new e(...n.concat(this))}};function Me(e){return J(e)?Ie(e,()=>{}):e}function ze(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}var Fe="RTK_autoBatch",Ue=e=>t=>{setTimeout(t,e)},Ve=e=>function(t){const{autoBatch:n=!0}=null!==t&&void 0!==t?t:{};let r=new De(e);return n&&r.push(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"raf"};return t=>function(){const n=t(...arguments);let r=!0,a=!1,i=!1;const s=new Set,o="tick"===e.type?queueMicrotask:"raf"===e.type?"undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:Ue(10):"callback"===e.type?e.queueNotification:Ue(e.timeout),l=()=>{i=!1,a&&(a=!1,s.forEach(e=>e()))};return Object.assign({},n,{subscribe(e){const t=n.subscribe(()=>r&&e());return s.add(e),()=>{t(),s.delete(e)}},dispatch(e){try{var t;return r=!(null!==e&&void 0!==e&&null!==(t=e.meta)&&void 0!==t&&t[Fe]),a=!r,a&&(i||(i=!0,o(l))),n.dispatch(e)}finally{r=!0}}})}}("object"===typeof n?n:void 0)),r};function qe(e){const t={},n=[];let r;const a={addCase(e,n){const r="string"===typeof e?e:e.type;if(!r)throw new Error(ht(28));if(r in t)throw new Error(ht(29));return t[r]=n,a},addMatcher:(e,t)=>(n.push({matcher:e,reducer:t}),a),addDefaultCase:e=>(r=e,a)};return e(a),[t,n,r]}var Be=(e,t)=>Oe(e)?e.match(t):e(t);function We(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>t.some(t=>Be(t,e))}var He=function(){let e="",t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;for(;t--;)e+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return e},Qe=["name","message","stack","code"],Ge=class{constructor(e,t){E(this,"_type",void 0),this.payload=e,this.meta=t}},Ke=class{constructor(e,t){E(this,"_type",void 0),this.payload=e,this.meta=t}},Je=e=>{if("object"===typeof e&&null!==e){const t={};for(const n of Qe)"string"===typeof e[n]&&(t[n]=e[n]);return t}return{message:String(e)}},$e="External signal was aborted",Ye=(()=>{function e(e,t,n){const r=Re(e+"/fulfilled",(e,t,n,r)=>({payload:e,meta:I(I({},r||{}),{},{arg:n,requestId:t,requestStatus:"fulfilled"})})),a=Re(e+"/pending",(e,t,n)=>({payload:void 0,meta:I(I({},n||{}),{},{arg:t,requestId:e,requestStatus:"pending"})})),i=Re(e+"/rejected",(e,t,r,a,i)=>({payload:a,error:(n&&n.serializeError||Je)(e||"Rejected"),meta:I(I({},i||{}),{},{arg:r,requestId:t,rejectedWithValue:!!a,requestStatus:"rejected",aborted:"AbortError"===(null===e||void 0===e?void 0:e.name),condition:"ConditionError"===(null===e||void 0===e?void 0:e.name)})}));return Object.assign(function(e){let{signal:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(o,l,c)=>{const u=null!==n&&void 0!==n&&n.idGenerator?n.idGenerator(e):He(),d=new AbortController;let h,p;function f(e){p=e,d.abort()}s&&(s.aborted?f($e):s.addEventListener("abort",()=>f($e),{once:!0}));const m=async function(){let s;try{var m,g;let i=null===n||void 0===n||null===(m=n.condition)||void 0===m?void 0:m.call(n,e,{getState:l,extra:c});if(null!==(y=i)&&"object"===typeof y&&"function"===typeof y.then&&(i=await i),!1===i||d.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const v=new Promise((e,t)=>{h=()=>{t({name:"AbortError",message:p||"Aborted"})},d.signal.addEventListener("abort",h)});o(a(u,e,null===n||void 0===n||null===(g=n.getPendingMeta)||void 0===g?void 0:g.call(n,{requestId:u,arg:e},{getState:l,extra:c}))),s=await Promise.race([v,Promise.resolve(t(e,{dispatch:o,getState:l,extra:c,requestId:u,signal:d.signal,abort:f,rejectWithValue:(e,t)=>new Ge(e,t),fulfillWithValue:(e,t)=>new Ke(e,t)})).then(t=>{if(t instanceof Ge)throw t;return t instanceof Ke?r(t.payload,u,e,t.meta):r(t,u,e)})])}catch(v){s=v instanceof Ge?i(null,u,e,v.payload,v.meta):i(v,u,e)}finally{h&&d.signal.removeEventListener("abort",h)}var y;return n&&!n.dispatchConditionRejection&&i.match(s)&&s.meta.condition||o(s),s}();return Object.assign(m,{abort:f,requestId:u,arg:e,unwrap:()=>m.then(Xe)})}},{pending:a,rejected:i,fulfilled:r,settled:We(i,r),typePrefix:e})}return e.withTypes=()=>e,e})();function Xe(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}var Ze=Symbol.for("rtk-slice-createasyncthunk");function et(e,t){return"".concat(e,"/").concat(t)}function tt(){var e;let{creators:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=null===t||void 0===t||null===(e=t.asyncThunk)||void 0===e?void 0:e[Ze];return function(e){const{name:t,reducerPath:r=t}=e;if(!t)throw new Error(ht(11));const a=("function"===typeof e.reducers?e.reducers(function(){function e(e,t){return I({_reducerDefinitionType:"asyncThunk",payloadCreator:e},t)}return e.withTypes=()=>e,{reducer:e=>Object.assign({[e.name](){return e(...arguments)}}[e.name],{_reducerDefinitionType:"reducer"}),preparedReducer:(e,t)=>({_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}),asyncThunk:e}}()):e.reducers)||{},i=Object.keys(a),s={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},o={addCase(e,t){const n="string"===typeof e?e:e.type;if(!n)throw new Error(ht(12));if(n in s.sliceCaseReducersByType)throw new Error(ht(13));return s.sliceCaseReducersByType[n]=t,o},addMatcher:(e,t)=>(s.sliceMatchers.push({matcher:e,reducer:t}),o),exposeAction:(e,t)=>(s.actionCreators[e]=t,o),exposeCaseReducer:(e,t)=>(s.sliceCaseReducersByName[e]=t,o)};function l(){const[t={},n=[],r]="function"===typeof e.extraReducers?qe(e.extraReducers):[e.extraReducers],a=I(I({},t),s.sliceCaseReducersByType);return function(e,t){let n,[r,a,i]=qe(t);if("function"===typeof e)n=()=>Me(e());else{const t=Me(e);n=()=>t}function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n(),t=arguments.length>1?arguments[1]:void 0,s=[r[t.type],...a.filter(e=>{let{matcher:n}=e;return n(t)}).map(e=>{let{reducer:t}=e;return t})];return 0===s.filter(e=>!!e).length&&(s=[i]),s.reduce((e,n)=>{if(n){if(K(e)){const r=n(e,t);return void 0===r?e:r}if(J(e))return Ie(e,e=>n(e,t));{const r=n(e,t);if(void 0===r){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}}return e},e)}return s.getInitialState=n,s}(e.initialState,e=>{for(let t in a)e.addCase(t,a[t]);for(let t of s.sliceMatchers)e.addMatcher(t.matcher,t.reducer);for(let t of n)e.addMatcher(t.matcher,t.reducer);r&&e.addDefaultCase(r)})}i.forEach(r=>{const i=a[r],s={reducerName:r,type:et(t,r),createNotation:"function"===typeof e.reducers};!function(e){return"asyncThunk"===e._reducerDefinitionType}(i)?function(e,t,n){let r,a,{type:i,reducerName:s,createNotation:o}=e;if("reducer"in t){if(o&&!function(e){return"reducerWithPrepare"===e._reducerDefinitionType}(t))throw new Error(ht(17));r=t.reducer,a=t.prepare}else r=t;n.addCase(i,r).exposeCaseReducer(s,r).exposeAction(s,a?Re(i,a):Re(i))}(s,i,o):function(e,t,n,r){let{type:a,reducerName:i}=e;if(!r)throw new Error(ht(18));const{payloadCreator:s,fulfilled:o,pending:l,rejected:c,settled:u,options:d}=t,h=r(a,s,d);n.exposeAction(i,h),o&&n.addCase(h.fulfilled,o);l&&n.addCase(h.pending,l);c&&n.addCase(h.rejected,c);u&&n.addMatcher(h.settled,u);n.exposeCaseReducer(i,{fulfilled:o||at,pending:l||at,rejected:c||at,settled:u||at})}(s,i,o,n)});const c=e=>e,u=new Map,d=new WeakMap;let h;function p(e,t){return h||(h=l()),h(e,t)}function f(){return h||(h=l()),h.getInitialState()}function m(t){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function r(e){let a=e[t];return"undefined"===typeof a&&n&&(a=ze(d,r,f)),a}function a(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c;const r=ze(u,n,()=>new WeakMap);return ze(r,t,()=>{const r={};for(const[i,s]of Object.entries(null!==(a=e.selectors)&&void 0!==a?a:{})){var a;r[i]=nt(s,t,()=>ze(d,t,f),n)}return r})}return{reducerPath:t,getSelectors:a,get selectors(){return a(r)},selectSlice:r}}const g=I(I({name:t,reducer:p,actions:s.actionCreators,caseReducers:s.sliceCaseReducersByName,getInitialState:f},m(r)),{},{injectInto(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{reducerPath:n}=t,a=C(t,Ae);const i=null!==n&&void 0!==n?n:r;return e.inject({reducerPath:i,reducer:p},a),I(I({},g),m(i,!0))}});return g}}function nt(e,t,n,r){function a(a){let i=t(a);"undefined"===typeof i&&r&&(i=n());for(var s=arguments.length,o=new Array(s>1?s-1:0),l=1;l<s;l++)o[l-1]=arguments[l];return e(i,...o)}return a.unwrapped=e,a}var rt=tt();function at(){}var it="listener",st="completed",ot="cancelled";"task-".concat(ot),"task-".concat(st),"".concat(it,"-").concat(ot),"".concat(it,"-").concat(st);var{assign:lt}=Object,ct="listenerMiddleware",ut=lt(Re("".concat(ct,"/add")),{withTypes:()=>ut}),dt=("".concat(ct,"/removeAll"),lt(Re("".concat(ct,"/remove")),{withTypes:()=>dt}));Symbol.for("rtk-state-proxy-original");function ht(e){return"Minified Redux Toolkit error #".concat(e,"; visit https://redux-toolkit.js.org/Errors?code=").concat(e," for the full message or use the non-minified dev environment for full errors. ")}class pt extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FunctionsError",n=arguments.length>2?arguments[2]:void 0;super(e),this.name=t,this.context=n}}class ft extends pt{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class mt extends pt{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class gt extends pt{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var yt;!function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"}(yt||(yt={}));var vt=function(e,t,n,r){return new(n||(n=Promise))(function(a,i){function s(e){try{l(r.next(e))}catch(t){i(t)}}function o(e){try{l(r.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,o)}l((r=r.apply(e,t||[])).next())})};class bt{constructor(e){let{headers:t={},customFetch:r,region:a=yt.Any}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=t,this.region=a,this.fetch=(e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}})(r)}setAuth(e){this.headers.Authorization="Bearer ".concat(e)}invoke(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;return vt(this,void 0,void 0,function*(){try{const{headers:r,method:a,body:i}=t;let s,o={},{region:l}=t;l||(l=this.region),l&&"any"!==l&&(o["x-region"]=l),i&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&("undefined"!==typeof Blob&&i instanceof Blob||i instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",s=i):"string"===typeof i?(o["Content-Type"]="text/plain",s=i):"undefined"!==typeof FormData&&i instanceof FormData?s=i:(o["Content-Type"]="application/json",s=JSON.stringify(i)));const c=yield this.fetch("".concat(this.url,"/").concat(e),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),r),body:s}).catch(e=>{throw new ft(e)}),u=c.headers.get("x-relay-error");if(u&&"true"===u)throw new mt(c);if(!c.ok)throw new gt(c);let d,h=(null!==(n=c.headers.get("Content-Type"))&&void 0!==n?n:"text/plain").split(";")[0].trim();return d="application/json"===h?yield c.json():"application/octet-stream"===h?yield c.blob():"text/event-stream"===h?c:"multipart/form-data"===h?yield c.formData():yield c.text(),{data:d,error:null}}catch(r){return{data:null,error:r}}})}}var xt=n(980);const{PostgrestClient:wt,PostgrestQueryBuilder:St,PostgrestFilterBuilder:kt,PostgrestTransformBuilder:jt,PostgrestBuilder:_t,PostgrestError:Ct}=xt;const Nt=function(){if("undefined"!==typeof WebSocket)return WebSocket;if("undefined"!==typeof global.WebSocket)return global.WebSocket;if("undefined"!==typeof window.WebSocket)return window.WebSocket;if("undefined"!==typeof self.WebSocket)return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}(),Tt="realtime-js/".concat("2.11.15");var Et,Pt,It,At,Lt,Ot;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(Et||(Et={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(Pt||(Pt={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(It||(It={})),function(e){e.websocket="websocket"}(At||(At={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(Lt||(Lt={}));class Rt{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"===typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const r=t.getUint8(1),a=t.getUint8(2);let i=this.HEADER_LENGTH+2;const s=n.decode(e.slice(i,i+r));i+=r;const o=n.decode(e.slice(i,i+a));i+=a;return{ref:null,topic:s,event:o,payload:JSON.parse(n.decode(e.slice(i,e.byteLength)))}}}class Dt{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(Ot||(Ot={}));const Mt=function(e,t){var n;const r=null!==(n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipTypes)&&void 0!==n?n:[];return Object.keys(t).reduce((n,a)=>(n[a]=zt(a,e,t,r),n),{})},zt=(e,t,n,r)=>{const a=t.find(t=>t.name===e),i=null===a||void 0===a?void 0:a.type,s=n[e];return i&&!r.includes(i)?Ft(i,s):Ut(s)},Ft=(e,t)=>{if("_"===e.charAt(0)){const n=e.slice(1,e.length);return Wt(t,n)}switch(e){case Ot.bool:return Vt(t);case Ot.float4:case Ot.float8:case Ot.int2:case Ot.int4:case Ot.int8:case Ot.numeric:case Ot.oid:return qt(t);case Ot.json:case Ot.jsonb:return Bt(t);case Ot.timestamp:return Ht(t);case Ot.abstime:case Ot.date:case Ot.daterange:case Ot.int4range:case Ot.int8range:case Ot.money:case Ot.reltime:case Ot.text:case Ot.time:case Ot.timestamptz:case Ot.timetz:case Ot.tsrange:case Ot.tstzrange:default:return Ut(t)}},Ut=e=>e,Vt=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},qt=e=>{if("string"===typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Bt=e=>{if("string"===typeof e)try{return JSON.parse(e)}catch(t){return console.log("JSON parse error: ".concat(t)),e}return e},Wt=(e,t)=>{if("string"!==typeof e)return e;const n=e.length-1,r=e[n];if("{"===e[0]&&"}"===r){let r;const i=e.slice(1,n);try{r=JSON.parse("["+i+"]")}catch(a){r=i?i.split(","):[]}return r.map(e=>Ft(t,e))}return e},Ht=e=>"string"===typeof e?e.replace(" ","T"):e,Qt=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class Gt{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e4;this.channel=e,this.event=t,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t(null===(n=this.receivedResp)||void 0===n?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive(e){let{status:t,response:n}=e;this.recHooks.filter(e=>e.status===t).forEach(e=>e.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Kt,Jt,$t,Yt;!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(Kt||(Kt={}));class Xt{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(null===t||void 0===t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Xt.syncState(this.state,e,t,n),this.pendingDiffs.forEach(e=>{this.state=Xt.syncDiff(this.state,e,t,n)}),this.pendingDiffs=[],r()}),this.channel._on(n.diff,{},e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=Xt.syncDiff(this.state,e,t,n),r())}),this.onJoin((e,t,n)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:n})}),this.onLeave((e,t,n)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:n})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,r){const a=this.cloneDeep(e),i=this.transformState(t),s={},o={};return this.map(a,(e,t)=>{i[e]||(o[e]=t)}),this.map(i,(e,t)=>{const n=a[e];if(n){const r=t.map(e=>e.presence_ref),a=n.map(e=>e.presence_ref),i=t.filter(e=>a.indexOf(e.presence_ref)<0),l=n.filter(e=>r.indexOf(e.presence_ref)<0);i.length>0&&(s[e]=i),l.length>0&&(o[e]=l)}else s[e]=t}),this.syncDiff(a,{joins:s,leaves:o},n,r)}static syncDiff(e,t,n,r){const{joins:a,leaves:i}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(a,(t,r)=>{var a;const i=null!==(a=e[t])&&void 0!==a?a:[];if(e[t]=this.cloneDeep(r),i.length>0){const n=e[t].map(e=>e.presence_ref),r=i.filter(e=>n.indexOf(e.presence_ref)<0);e[t].unshift(...r)}n(t,i,r)}),this.map(i,(t,n)=>{let a=e[t];if(!a)return;const i=n.map(e=>e.presence_ref);a=a.filter(e=>i.indexOf(e.presence_ref)<0),e[t]=a,r(t,a,n),0===a.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const r=e[n];return t[n]="metas"in r?r.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(Jt||(Jt={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"}($t||($t={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(Yt||(Yt={}));class Zt{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}},n=arguments.length>2?arguments[2]:void 0;this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=Pt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Gt(this,It.join,this.params,this.timeout),this.rejoinTimer=new Dt(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Pt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel","close ".concat(this.topic," ").concat(this._joinRef())),this.state=Pt.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel","error ".concat(this.topic),e),this.state=Pt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel","timeout ".concat(this.topic),this.joinPush.timeout),this.state=Pt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(It.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new Xt(this),this.broadcastEndpointURL=Qt(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeout;var n,r;if(this.socket.isConnected()||this.socket.connect(),this.state==Pt.closed){const{config:{broadcast:a,presence:i,private:s}}=this.params;this._onError(t=>null===e||void 0===e?void 0:e(Yt.CHANNEL_ERROR,t)),this._onClose(()=>null===e||void 0===e?void 0:e(Yt.CLOSED));const o={},l={broadcast:a,presence:i,postgres_changes:null!==(r=null===(n=this.bindings.postgres_changes)||void 0===n?void 0:n.map(e=>e.filter))&&void 0!==r?r:[],private:s};this.socket.accessTokenValue&&(o.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:l},o)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async t=>{let{postgres_changes:n}=t;var r;if(this.socket.setAuth(),void 0!==n){const t=this.bindings.postgres_changes,a=null!==(r=null===t||void 0===t?void 0:t.length)&&void 0!==r?r:0,i=[];for(let r=0;r<a;r++){const a=t[r],{filter:{event:s,schema:o,table:l,filter:c}}=a,u=n&&n[r];if(!u||u.event!==s||u.schema!==o||u.table!==l||u.filter!==c)return this.unsubscribe(),this.state=Pt.errored,void(null===e||void 0===e||e(Yt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));i.push(Object.assign(Object.assign({},a),{id:u.id}))}return this.bindings.postgres_changes=i,void(e&&e(Yt.SUBSCRIBED))}null===e||void 0===e||e(Yt.SUBSCRIBED)}).receive("error",t=>{this.state=Pt.errored,null===e||void 0===e||e(Yt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null===e||void 0===e||e(Yt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this._on(e,t,n)}async send(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,r;if(this._canPush()||"broadcast"!==e.type)return new Promise(n=>{var r,a,i;const s=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(i=null===(a=null===(r=this.params)||void 0===r?void 0:r.config)||void 0===a?void 0:a.broadcast)||void 0===i?void 0:i.ack)||n("ok"),s.receive("ok",()=>n("ok")),s.receive("error",()=>n("error")),s.receive("timeout",()=>n("timed out"))});{const{event:i,payload:s}=e,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?"Bearer ".concat(this.socket.accessTokenValue):"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:s,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,o,null!==(n=t.timeout)&&void 0!==n?n:this.timeout);return await(null===(r=e.body)||void 0===r?void 0:r.cancel()),e.ok?"ok":"error"}catch(a){return"AbortError"===a.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.state=Pt.leaving;const t=()=>{this.socket.log("channel","leave ".concat(this.topic)),this._trigger(It.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(r=>{n=new Gt(this,It.leave,{},e),n.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{null===n||void 0===n||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,t,n){const r=new AbortController,a=setTimeout(()=>r.abort(),n),i=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(a),i}_push(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(!this.joinedOnce)throw"tried to push '".concat(e,"' to '").concat(this.topic,"' before joining. Use channel.subscribe() before pushing events");let r=new Gt(this,e,t,n);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var r,a;const i=e.toLocaleLowerCase(),{close:s,error:o,leave:l,join:c}=It;if(n&&[s,o,l,c].indexOf(i)>=0&&n!==this._joinRef())return;let u=this._onMessage(i,t,n);if(t&&!u)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?null===(r=this.bindings.postgres_changes)||void 0===r||r.filter(e=>{var t,n,r;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(r=null===(n=e.filter)||void 0===n?void 0:n.event)||void 0===r?void 0:r.toLocaleLowerCase())===i}).map(e=>e.callback(u,n)):null===(a=this.bindings[i])||void 0===a||a.filter(e=>{var n,r,a,s,o,l;if(["broadcast","presence","postgres_changes"].includes(i)){if("id"in e){const i=e.id,s=null===(n=e.filter)||void 0===n?void 0:n.event;return i&&(null===(r=t.ids)||void 0===r?void 0:r.includes(i))&&("*"===s||(null===s||void 0===s?void 0:s.toLocaleLowerCase())===(null===(a=t.data)||void 0===a?void 0:a.type.toLocaleLowerCase()))}{const n=null===(o=null===(s=null===e||void 0===e?void 0:e.filter)||void 0===s?void 0:s.event)||void 0===o?void 0:o.toLocaleLowerCase();return"*"===n||n===(null===(l=null===t||void 0===t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===i}).map(e=>{if("object"===typeof u&&"ids"in u){const e=u.data,{schema:t,table:n,commit_timestamp:r,type:a,errors:i}=e,s={schema:t,table:n,commit_timestamp:r,eventType:a,new:{},old:{},errors:i};u=Object.assign(Object.assign({},s),this._getPayloadRecords(e))}e.callback(u,n)})}_isClosed(){return this.state===Pt.closed}_isJoined(){return this.state===Pt.joined}_isJoining(){return this.state===Pt.joining}_isLeaving(){return this.state===Pt.leaving}_replyEventName(e){return"chan_reply_".concat(e)}_on(e,t,n){const r=e.toLocaleLowerCase(),a={type:r,filter:t,callback:n};return this.bindings[r]?this.bindings[r].push(a):this.bindings[r]=[a],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(e=>{var r;return!((null===(r=e.type)||void 0===r?void 0:r.toLocaleLowerCase())===n&&Zt.isEqual(e.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(It.close,{},e)}_onError(e){this._on(It.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Pt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=Mt(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=Mt(e.columns,e.old_record)),t}}const en=()=>{};class tn{constructor(e,t){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=1e4,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=en,this.ref=0,this.logger=en,this.conn=null,this.sendBuffer=[],this.serializer=new Rt,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}},this.endPoint="".concat(e,"/").concat(At.websocket),this.httpEndpoint=Qt(e),(null===t||void 0===t?void 0:t.transport)?this.transport=t.transport:this.transport=null,(null===t||void 0===t?void 0:t.params)&&(this.params=t.params),(null===t||void 0===t?void 0:t.timeout)&&(this.timeout=t.timeout),(null===t||void 0===t?void 0:t.logger)&&(this.logger=t.logger),((null===t||void 0===t?void 0:t.logLevel)||(null===t||void 0===t?void 0:t.log_level))&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),(null===t||void 0===t?void 0:t.heartbeatIntervalMs)&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const a=null===(r=null===t||void 0===t?void 0:t.params)||void 0===r?void 0:r.apikey;if(a&&(this.accessTokenValue=a,this.apiKey=a),this.reconnectAfterMs=(null===t||void 0===t?void 0:t.reconnectAfterMs)?t.reconnectAfterMs:e=>[1e3,2e3,5e3,1e4][e-1]||1e4,this.encode=(null===t||void 0===t?void 0:t.encode)?t.encode:(e,t)=>t(JSON.stringify(e)),this.decode=(null===t||void 0===t?void 0:t.decode)?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Dt(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(null===t||void 0===t?void 0:t.fetch),null===t||void 0===t?void 0:t.worker){if("undefined"!==typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(null===t||void 0===t?void 0:t.worker)||!1,this.workerUrl=null===t||void 0===t?void 0:t.workerUrl}this.accessToken=(null===t||void 0===t?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=Nt),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,null!==t&&void 0!==t?t:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(e=>e.teardown()))}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Et.connecting:return Lt.Connecting;case Et.open:return Lt.Open;case Et.closing:return Lt.Closing;default:return Lt.Closed}}isConnected(){return this.connectionState()===Lt.Open}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};const n="realtime:".concat(e),r=this.getChannels().find(e=>e.topic===n);if(r)return r;{const n=new Zt("realtime:".concat(e),t,this);return this.channels.push(n),n}}push(e){const{topic:t,event:n,payload:r,ref:a}=e,i=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push","".concat(t," ").concat(n," (").concat(a,")"),r),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(){let e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=e&&(this.accessTokenValue=e,this.channels.forEach(t=>{const n={access_token:e,version:Tt};e&&t.updateJoinPayload(n),t.joinedOnce&&t._isJoined()&&t._push(It.access_token,{access_token:e})}))}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),void(null===(e=this.conn)||void 0===e||e.close(1e3,"hearbeat timeout"));this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}else this.heartbeatCallback("disconnected")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",'leaving duplicate topic "'.concat(e,'"')),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,e=>{let{topic:t,event:n,payload:r,ref:a}=e;"phoenix"===t&&"phx_reply"===n&&this.heartbeatCallback("ok"==e.payload.status?"ok":"error"),a&&a===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive","".concat(r.status||""," ").concat(t," ").concat(n," ").concat(a&&"("+a+")"||""),r),Array.from(this.channels).filter(e=>e._isMember(t)).forEach(e=>e._trigger(n,r,a)),this.stateChangeCallbacks.message.forEach(t=>t(e))})}_onConnOpen(){this.log("transport","connected to ".concat(this.endpointURL())),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker","starting worker for from ".concat(this.workerUrl)):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport","".concat(e)),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(It.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const n=e.match(/\?/)?"&":"?",r=new URLSearchParams(t);return"".concat(e).concat(n).concat(r)}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}}class nn extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function rn(e){return"object"===typeof e&&null!==e&&"__isStorageError"in e}class an extends nn{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class sn extends nn{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var on=function(e,t,n,r){return new(n||(n=Promise))(function(a,i){function s(e){try{l(r.next(e))}catch(t){i(t)}}function o(e){try{l(r.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,o)}l((r=r.apply(e,t||[])).next())})};const ln=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}},cn=e=>{if(Array.isArray(e))return e.map(e=>cn(e));if("function"===typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(e=>{let[n,r]=e;const a=n.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[a]=cn(r)}),t};var un=function(e,t,n,r){return new(n||(n=Promise))(function(a,i){function s(e){try{l(r.next(e))}catch(t){i(t)}}function o(e){try{l(r.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,o)}l((r=r.apply(e,t||[])).next())})};const dn=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),hn=(e,t,r)=>un(void 0,void 0,void 0,function*(){const a=yield on(void 0,void 0,void 0,function*(){return"undefined"===typeof Response?(yield Promise.resolve().then(n.bind(n,630))).Response:Response});e instanceof a&&!(null===r||void 0===r?void 0:r.noResolveJson)?e.json().then(n=>{t(new an(dn(n),e.status||500))}).catch(e=>{t(new sn(dn(e),e))}):t(new sn(dn(e),e))});function pn(e,t,n,r,a,i){return un(this,void 0,void 0,function*(){return new Promise((s,o)=>{e(n,((e,t,n,r)=>{const a={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"===e?a:(a.headers=Object.assign({"Content-Type":"application/json"},null===t||void 0===t?void 0:t.headers),r&&(a.body=JSON.stringify(r)),Object.assign(Object.assign({},a),n))})(t,r,a,i)).then(e=>{if(!e.ok)throw e;return(null===r||void 0===r?void 0:r.noResolveJson)?e:e.json()}).then(e=>s(e)).catch(e=>hn(e,o,r))})})}function fn(e,t,n,r){return un(this,void 0,void 0,function*(){return pn(e,"GET",t,n,r)})}function mn(e,t,n,r,a){return un(this,void 0,void 0,function*(){return pn(e,"POST",t,r,a,n)})}function gn(e,t,n,r,a){return un(this,void 0,void 0,function*(){return pn(e,"DELETE",t,r,a,n)})}var yn=function(e,t,n,r){return new(n||(n=Promise))(function(a,i){function s(e){try{l(r.next(e))}catch(t){i(t)}}function o(e){try{l(r.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,o)}l((r=r.apply(e,t||[])).next())})};const vn={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},bn={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class xn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;this.url=e,this.headers=t,this.bucketId=n,this.fetch=ln(r)}uploadOrUpdate(e,t,n,r){return yn(this,void 0,void 0,function*(){try{let a;const i=Object.assign(Object.assign({},bn),r);let s=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(i.upsert)});const o=i.metadata;"undefined"!==typeof Blob&&n instanceof Blob?(a=new FormData,a.append("cacheControl",i.cacheControl),o&&a.append("metadata",this.encodeMetadata(o)),a.append("",n)):"undefined"!==typeof FormData&&n instanceof FormData?(a=n,a.append("cacheControl",i.cacheControl),o&&a.append("metadata",this.encodeMetadata(o))):(a=n,s["cache-control"]="max-age=".concat(i.cacheControl),s["content-type"]=i.contentType,o&&(s["x-metadata"]=this.toBase64(this.encodeMetadata(o)))),(null===r||void 0===r?void 0:r.headers)&&(s=Object.assign(Object.assign({},s),r.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),u=yield this.fetch("".concat(this.url,"/object/").concat(c),Object.assign({method:e,body:a,headers:s},(null===i||void 0===i?void 0:i.duplex)?{duplex:i.duplex}:{})),d=yield u.json();if(u.ok)return{data:{path:l,id:d.Id,fullPath:d.Key},error:null};return{data:null,error:d}}catch(a){if(rn(a))return{data:null,error:a};throw a}})}upload(e,t,n){return yn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,r){return yn(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),i=this._getFinalPath(a),s=new URL(this.url+"/object/upload/sign/".concat(i));s.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:bn.upsert},r),i=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!==typeof Blob&&n instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",n)):"undefined"!==typeof FormData&&n instanceof FormData?(e=n,e.append("cacheControl",t.cacheControl)):(e=n,i["cache-control"]="max-age=".concat(t.cacheControl),i["content-type"]=t.contentType);const o=yield this.fetch(s.toString(),{method:"PUT",body:e,headers:i}),l=yield o.json();if(o.ok)return{data:{path:a,fullPath:l.Key},error:null};return{data:null,error:l}}catch(o){if(rn(o))return{data:null,error:o};throw o}})}createSignedUploadUrl(e,t){return yn(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const r=Object.assign({},this.headers);(null===t||void 0===t?void 0:t.upsert)&&(r["x-upsert"]="true");const a=yield mn(this.fetch,"".concat(this.url,"/object/upload/sign/").concat(n),{},{headers:r}),i=new URL(this.url+a.url),s=i.searchParams.get("token");if(!s)throw new nn("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:s},error:null}}catch(n){if(rn(n))return{data:null,error:n};throw n}})}update(e,t,n){return yn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return yn(this,void 0,void 0,function*(){try{return{data:yield mn(this.fetch,"".concat(this.url,"/object/move"),{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===n||void 0===n?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(rn(r))return{data:null,error:r};throw r}})}copy(e,t,n){return yn(this,void 0,void 0,function*(){try{return{data:{path:(yield mn(this.fetch,"".concat(this.url,"/object/copy"),{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===n||void 0===n?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(rn(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,n){return yn(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),a=yield mn(this.fetch,"".concat(this.url,"/object/sign/").concat(r),Object.assign({expiresIn:t},(null===n||void 0===n?void 0:n.transform)?{transform:n.transform}:{}),{headers:this.headers});const i=(null===n||void 0===n?void 0:n.download)?"&download=".concat(!0===n.download?"":n.download):"";return a={signedUrl:encodeURI("".concat(this.url).concat(a.signedURL).concat(i))},{data:a,error:null}}catch(r){if(rn(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,n){return yn(this,void 0,void 0,function*(){try{const r=yield mn(this.fetch,"".concat(this.url,"/object/sign/").concat(this.bucketId),{expiresIn:t,paths:e},{headers:this.headers}),a=(null===n||void 0===n?void 0:n.download)?"&download=".concat(!0===n.download?"":n.download):"";return{data:r.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI("".concat(this.url).concat(e.signedURL).concat(a)):null})),error:null}}catch(r){if(rn(r))return{data:null,error:r};throw r}})}download(e,t){return yn(this,void 0,void 0,function*(){const n="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image/authenticated":"object",r=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{}),a=r?"?".concat(r):"";try{const t=this._getFinalPath(e),r=yield fn(this.fetch,"".concat(this.url,"/").concat(n,"/").concat(t).concat(a),{headers:this.headers,noResolveJson:!0});return{data:yield r.blob(),error:null}}catch(i){if(rn(i))return{data:null,error:i};throw i}})}info(e){return yn(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield fn(this.fetch,"".concat(this.url,"/object/info/").concat(t),{headers:this.headers});return{data:cn(e),error:null}}catch(n){if(rn(n))return{data:null,error:n};throw n}})}exists(e){return yn(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,n,r){return un(this,void 0,void 0,function*(){return pn(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}(this.fetch,"".concat(this.url,"/object/").concat(t),{headers:this.headers}),{data:!0,error:null}}catch(n){if(rn(n)&&n instanceof sn){const e=n.originalError;if([400,404].includes(null===e||void 0===e?void 0:e.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],a=(null===t||void 0===t?void 0:t.download)?"download=".concat(!0===t.download?"":t.download):"";""!==a&&r.push(a);const i="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image":"object",s=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{});""!==s&&r.push(s);let o=r.join("&");return""!==o&&(o="?".concat(o)),{data:{publicUrl:encodeURI("".concat(this.url,"/").concat(i,"/public/").concat(n).concat(o))}}}remove(e){return yn(this,void 0,void 0,function*(){try{return{data:yield gn(this.fetch,"".concat(this.url,"/object/").concat(this.bucketId),{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(rn(t))return{data:null,error:t};throw t}})}list(e,t,n){return yn(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},vn),t),{prefix:e||""});return{data:yield mn(this.fetch,"".concat(this.url,"/object/list/").concat(this.bucketId),r,{headers:this.headers},n),error:null}}catch(r){if(rn(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!==typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return"".concat(this.bucketId,"/").concat(e)}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push("width=".concat(e.width)),e.height&&t.push("height=".concat(e.height)),e.resize&&t.push("resize=".concat(e.resize)),e.format&&t.push("format=".concat(e.format)),e.quality&&t.push("quality=".concat(e.quality)),t.join("&")}}const wn={"X-Client-Info":"storage-js/".concat("2.7.1")};var Sn=function(e,t,n,r){return new(n||(n=Promise))(function(a,i){function s(e){try{l(r.next(e))}catch(t){i(t)}}function o(e){try{l(r.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,o)}l((r=r.apply(e,t||[])).next())})};class kn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;this.url=e,this.headers=Object.assign(Object.assign({},wn),t),this.fetch=ln(n)}listBuckets(){return Sn(this,void 0,void 0,function*(){try{return{data:yield fn(this.fetch,"".concat(this.url,"/bucket"),{headers:this.headers}),error:null}}catch(e){if(rn(e))return{data:null,error:e};throw e}})}getBucket(e){return Sn(this,void 0,void 0,function*(){try{return{data:yield fn(this.fetch,"".concat(this.url,"/bucket/").concat(e),{headers:this.headers}),error:null}}catch(t){if(rn(t))return{data:null,error:t};throw t}})}createBucket(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{public:!1};return Sn(this,void 0,void 0,function*(){try{return{data:yield mn(this.fetch,"".concat(this.url,"/bucket"),{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(rn(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return Sn(this,void 0,void 0,function*(){try{const n=yield function(e,t,n,r,a){return un(this,void 0,void 0,function*(){return pn(e,"PUT",t,r,a,n)})}(this.fetch,"".concat(this.url,"/bucket/").concat(e),{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers});return{data:n,error:null}}catch(n){if(rn(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Sn(this,void 0,void 0,function*(){try{return{data:yield mn(this.fetch,"".concat(this.url,"/bucket/").concat(e,"/empty"),{},{headers:this.headers}),error:null}}catch(t){if(rn(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Sn(this,void 0,void 0,function*(){try{return{data:yield gn(this.fetch,"".concat(this.url,"/bucket/").concat(e),{},{headers:this.headers}),error:null}}catch(t){if(rn(t))return{data:null,error:t};throw t}})}}class jn extends kn{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2?arguments[2]:void 0)}from(e){return new xn(this.url,this.headers,e,this.fetch)}}let _n="";_n="undefined"!==typeof Deno?"deno":"undefined"!==typeof document?"web":"undefined"!==typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const Cn={headers:{"X-Client-Info":"supabase-js-".concat(_n,"/").concat("2.50.2")}},Nn={schema:"public"},Tn={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},En={};var Pn=n(630),In=function(e,t,n,r){return new(n||(n=Promise))(function(a,i){function s(e){try{l(r.next(e))}catch(t){i(t)}}function o(e){try{l(r.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,o)}l((r=r.apply(e,t||[])).next())})};const An=e=>{let t;return t=e||("undefined"===typeof fetch?Pn.default:fetch),function(){return t(...arguments)}},Ln=(e,t,n)=>{const r=An(n),a="undefined"===typeof Headers?Pn.Headers:Headers;return(n,i)=>In(void 0,void 0,void 0,function*(){var s;const o=null!==(s=yield t())&&void 0!==s?s:e;let l=new a(null===i||void 0===i?void 0:i.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization","Bearer ".concat(o)),r(n,Object.assign(Object.assign({},i),{headers:l}))})};var On=function(e,t,n,r){return new(n||(n=Promise))(function(a,i){function s(e){try{l(r.next(e))}catch(t){i(t)}}function o(e){try{l(r.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,o)}l((r=r.apply(e,t||[])).next())})};const Rn="2.70.0",Dn=3e4,Mn=9e4,zn={"X-Client-Info":"gotrue-js/".concat(Rn)},Fn="X-Supabase-Api-Version",Un={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},Vn=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class qn extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function Bn(e){return"object"===typeof e&&null!==e&&"__isAuthError"in e}class Wn extends qn{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}class Hn extends qn{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Qn extends qn{constructor(e,t,n,r){super(e,n,r),this.name=t,this.status=n}}class Gn extends Qn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Kn extends Qn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Jn extends Qn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class $n extends Qn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Yn extends Qn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Xn extends Qn{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Zn(e){return Bn(e)&&"AuthRetryableFetchError"===e.name}class er extends Qn{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class tr extends Qn{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const nr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),rr=" \t\n\r=".split(""),ar=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<rr.length;t+=1)e[rr[t].charCodeAt(0)]=-2;for(let t=0;t<nr.length;t+=1)e[nr[t].charCodeAt(0)]=t;return e})();function ir(e,t,n){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(nr[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(nr[e]),t.queuedBits-=6}}function sr(e,t,n){const r=ar[e];if(!(r>-1)){if(-2===r)return;throw new Error('Invalid Base64-URL character "'.concat(String.fromCharCode(e),'"'))}for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function or(e){const t=[],n=e=>{t.push(String.fromCodePoint(e))},r={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=e=>{!function(e,t,n){if(0===t.utf8seq){if(e<=127)return void n(e);for(let n=1;n<6;n+=1)if(0===(e>>7-n&1)){t.utf8seq=n;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&n(t.codepoint)}}(e,r,n)};for(let s=0;s<e.length;s+=1)sr(e.charCodeAt(s),a,i);return t.join("")}function lr(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error("Unrecognized Unicode codepoint: ".concat(e.toString(16)))}t(e)}function cr(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const t=1024*(r-55296)&65535;r=65536+(e.charCodeAt(n+1)-56320&65535|t),n+=1}lr(r,t)}}function ur(e){const t=[],n={queue:0,queuedBits:0},r=e=>{t.push(e)};for(let a=0;a<e.length;a+=1)sr(e.charCodeAt(a),n,r);return new Uint8Array(t)}function dr(e){const t=[],n={queue:0,queuedBits:0},r=e=>{t.push(e)};return e.forEach(e=>ir(e,n,r)),ir(null,n,r),t.join("")}const hr=()=>"undefined"!==typeof window&&"undefined"!==typeof document,pr={tested:!1,writable:!1},fr=()=>{if(!hr())return!1;try{if("object"!==typeof globalThis.localStorage)return!1}catch(t){return!1}if(pr.tested)return pr.writable;const e="lswt-".concat(Math.random()).concat(Math.random());try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),pr.tested=!0,pr.writable=!0}catch(t){pr.tested=!0,pr.writable=!1}return pr.writable};const mr=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}},gr=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},yr=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch(r){return n}},vr=async(e,t)=>{await e.removeItem(t)};class br{constructor(){this.promise=new br.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function xr(e){const t=e.split(".");if(3!==t.length)throw new tr("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!Vn.test(t[n]))throw new tr("JWT not in base64url format");return{header:JSON.parse(or(t[0])),payload:JSON.parse(or(t[1])),signature:ur(t[2]),raw:{header:t[0],payload:t[1]}}}function wr(e){return("0"+e.toString(16)).substr(-2)}async function Sr(e){if(!("undefined"!==typeof crypto&&"undefined"!==typeof crypto.subtle&&"undefined"!==typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),n=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(n);return Array.from(r).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function kr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=function(){const e=new Uint32Array(56);if("undefined"===typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let n="";for(let r=0;r<56;r++)n+=e.charAt(Math.floor(Math.random()*t));return n}return crypto.getRandomValues(e),Array.from(e,wr).join("")}();let a=r;n&&(a+="/PASSWORD_RECOVERY"),await gr(e,"".concat(t,"-code-verifier"),a);const i=await Sr(r);return[i,r===i?"plain":"s256"]}br.promiseConstructor=Promise;const jr=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const _r=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Cr(e){if(!_r.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var Nr=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};const Tr=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Er=[502,503,504];async function Pr(e){var t,n;if(!("object"===typeof(n=e)&&null!==n&&"status"in n&&"ok"in n&&"json"in n&&"function"===typeof n.json))throw new Xn(Tr(e),0);if(Er.includes(e.status))throw new Xn(Tr(e),e.status);let r,a;try{r=await e.json()}catch(s){throw new Hn(Tr(s),s)}const i=function(e){const t=e.headers.get(Fn);if(!t)return null;if(!t.match(jr))return null;try{return new Date("".concat(t,"T00:00:00.0Z"))}catch(s){return null}}(e);if(i&&i.getTime()>=Un.timestamp&&"object"===typeof r&&r&&"string"===typeof r.code?a=r.code:"object"===typeof r&&r&&"string"===typeof r.error_code&&(a=r.error_code),a){if("weak_password"===a)throw new er(Tr(r),e.status,(null===(t=r.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===a)throw new Gn}else if("object"===typeof r&&r&&"object"===typeof r.weak_password&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0))throw new er(Tr(r),e.status,r.weak_password.reasons);throw new Wn(Tr(r),e.status||500,a)}async function Ir(e,t,n,r){var a;const i=Object.assign({},null===r||void 0===r?void 0:r.headers);i[Fn]||(i[Fn]=Un.name),(null===r||void 0===r?void 0:r.jwt)&&(i.Authorization="Bearer ".concat(r.jwt));const s=null!==(a=null===r||void 0===r?void 0:r.query)&&void 0!==a?a:{};(null===r||void 0===r?void 0:r.redirectTo)&&(s.redirect_to=r.redirectTo);const o=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",l=await async function(e,t,n,r,a,i){const s=((e,t,n,r)=>{const a={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"===e?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null===t||void 0===t?void 0:t.headers),a.body=JSON.stringify(r),Object.assign(Object.assign({},a),n))})(t,r,a,i);let o;try{o=await e(n,Object.assign({},s))}catch(l){throw console.error(l),new Xn(Tr(l),0)}o.ok||await Pr(o);if(null===r||void 0===r?void 0:r.noResolveJson)return o;try{return await o.json()}catch(l){await Pr(l)}}(e,t,n+o,{headers:i,noResolveJson:null===r||void 0===r?void 0:r.noResolveJson},{},null===r||void 0===r?void 0:r.body);return(null===r||void 0===r?void 0:r.xform)?null===r||void 0===r?void 0:r.xform(l):{data:Object.assign({},l),error:null}}function Ar(e){var t;let n=null;var r;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=(r=e.expires_in,Math.round(Date.now()/1e3)+r)));return{data:{session:n,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Lr(e){const t=Ar(e);return!t.error&&e.weak_password&&"object"===typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"===typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function Or(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Rr(e){return{data:e,error:null}}function Dr(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:a,verification_type:i}=e,s=Nr(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:n,hashed_token:r,redirect_to:a,verification_type:i},user:Object.assign({},s)},error:null}}function Mr(e){return e}const zr=["global","local","others"];var Fr=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};class Ur{constructor(e){let{url:t="",headers:n={},fetch:r}=e;this.url=t,this.headers=n,this.fetch=mr(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:zr[0];if(zr.indexOf(t)<0)throw new Error("@supabase/auth-js: Parameter scope must be one of ".concat(zr.join(", ")));try{return await Ir(this.fetch,"POST","".concat(this.url,"/logout?scope=").concat(t),{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Bn(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await Ir(this.fetch,"POST","".concat(this.url,"/invite"),{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Or})}catch(n){if(Bn(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=Fr(e,["options"]),r=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(r.new_email=null===n||void 0===n?void 0:n.newEmail,delete r.newEmail),await Ir(this.fetch,"POST","".concat(this.url,"/admin/generate_link"),{body:r,headers:this.headers,xform:Dr,redirectTo:null===t||void 0===t?void 0:t.redirectTo})}catch(t){if(Bn(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Ir(this.fetch,"POST","".concat(this.url,"/admin/users"),{body:e,headers:this.headers,xform:Or})}catch(t){if(Bn(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,r,a,i,s,o;try{const l={nextPage:null,lastPage:0,total:0},c=await Ir(this.fetch,"GET","".concat(this.url,"/admin/users"),{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(t=null===e||void 0===e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",per_page:null!==(a=null===(r=null===e||void 0===e?void 0:e.perPage)||void 0===r?void 0:r.toString())&&void 0!==a?a:""},xform:Mr});if(c.error)throw c.error;const u=await c.json(),d=null!==(i=c.headers.get("x-total-count"))&&void 0!==i?i:0,h=null!==(o=null===(s=c.headers.get("link"))||void 0===s?void 0:s.split(","))&&void 0!==o?o:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(e.split(";")[1].split("=")[1]);l["".concat(n,"Page")]=t}),l.total=parseInt(d)),{data:Object.assign(Object.assign({},u),l),error:null}}catch(l){if(Bn(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){Cr(e);try{return await Ir(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,xform:Or})}catch(t){if(Bn(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Cr(e);try{return await Ir(this.fetch,"PUT","".concat(this.url,"/admin/users/").concat(e),{body:t,headers:this.headers,xform:Or})}catch(n){if(Bn(n))return{data:{user:null},error:n};throw n}}async deleteUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Cr(e);try{return await Ir(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,body:{should_soft_delete:t},xform:Or})}catch(n){if(Bn(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Cr(e.userId);try{const{data:t,error:n}=await Ir(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e.userId,"/factors"),{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:n}}catch(t){if(Bn(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Cr(e.userId),Cr(e.id);try{return{data:await Ir(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e.userId,"/factors/").concat(e.id),{headers:this.headers}),error:null}}catch(t){if(Bn(t))return{data:null,error:t};throw t}}}const Vr={getItem:e=>fr()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{fr()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{fr()&&globalThis.localStorage.removeItem(e)}};function qr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const Br=!!(globalThis&&fr()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class Wr extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Hr extends Wr{}async function Qr(e,t,n){Br&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Br&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async r=>{if(!r){if(0===t)throw Br&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Hr('Acquiring an exclusive Navigator LockManager lock "'.concat(e,'" immediately failed'));if(Br)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}Br&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,r.name);try{return await n()}finally{Br&&console.log("@supabase/gotrue-js: navigatorLock: released",e,r.name)}}))}!function(){if("object"!==typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!==typeof self&&(self.globalThis=self)}}();const Gr={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:zn,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Kr(e,t,n){return await n()}class Jr{constructor(e){var t,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Jr.nextInstanceID,Jr.nextInstanceID+=1,this.instanceID>0&&hr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},Gr),e);if(this.logDebugMessages=!!r.debug,"function"===typeof r.debug&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new Ur({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=mr(r.fetch),this.lock=r.lock||Kr,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:hr()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=Qr:this.lock=Kr,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?r.storage?this.storage=r.storage:fr()?this.storage=Vr:(this.memoryStorage={},this.storage=qr(this.memoryStorage)):(this.memoryStorage={},this.storage=qr(this.memoryStorage)),hr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}null===(n=this.broadcastChannel)||void 0===n||n.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}_debug(){if(this.logDebugMessages){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger("GoTrueClient@".concat(this.instanceID," (").concat(Rn,") ").concat((new Date).toISOString()),...t)}return this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{const t=function(e){const t={},n=new URL(e);if(n.hash&&"#"===n.hash[0])try{new URLSearchParams(n.hash.substring(1)).forEach((e,n)=>{t[n]=e})}catch(r){}return n.searchParams.forEach((e,n)=>{t[n]=e}),t}(window.location.href);let n="none";if(this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce"),hr()&&this.detectSessionInUrl&&"none"!==n){const{data:r,error:a}=await this._getSessionFromURL(t,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),function(e){return Bn(e)&&"AuthImplicitGrantRedirectError"===e.name}(a)){const t=null===(e=a.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:a}}return await this._removeSession(),{error:a}}const{session:i,redirectType:s}=r;return this._debug("#_initialize()","detected session in URL",i,"redirect type",s),await this._saveSession(i),setTimeout(async()=>{"recovery"===s?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Bn(t)?{error:t}:{error:new Hn("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,r;try{const a=await Ir(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{data:null!==(n=null===(t=null===e||void 0===e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==n?n:{},gotrue_meta_security:{captcha_token:null===(r=null===e||void 0===e?void 0:e.options)||void 0===r?void 0:r.captchaToken}},xform:Ar}),{data:i,error:s}=a;if(s||!i)return{data:{user:null,session:null},error:s};const o=i.session,l=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(a){if(Bn(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var t,n,r;try{let a;if("email"in e){const{email:n,password:r,options:i}=e;let s=null,o=null;"pkce"===this.flowType&&([s,o]=await kr(this.storage,this.storageKey)),a=await Ir(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,redirectTo:null===i||void 0===i?void 0:i.emailRedirectTo,body:{email:n,password:r,data:null!==(t=null===i||void 0===i?void 0:i.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken},code_challenge:s,code_challenge_method:o},xform:Ar})}else{if(!("phone"in e))throw new Jn("You must provide either an email or phone number and a password");{const{phone:t,password:i,options:s}=e;a=await Ir(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{phone:t,password:i,data:null!==(n=null===s||void 0===s?void 0:s.data)&&void 0!==n?n:{},channel:null!==(r=null===s||void 0===s?void 0:s.channel)&&void 0!==r?r:"sms",gotrue_meta_security:{captcha_token:null===s||void 0===s?void 0:s.captchaToken}},xform:Ar})}}const{data:i,error:s}=a;if(s||!i)return{data:{user:null,session:null},error:s};const o=i.session,l=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(a){if(Bn(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let t;if("email"in e){const{email:n,password:r,options:a}=e;t=await Ir(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{email:n,password:r,gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken}},xform:Lr})}else{if(!("phone"in e))throw new Jn("You must provide either an email or phone number and a password");{const{phone:n,password:r,options:a}=e;t=await Ir(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{phone:n,password:r,gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken}},xform:Lr})}}const{data:n,error:r}=t;return r?{data:{user:null,session:null},error:r}:n&&n.session&&n.user?(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r}):{data:{user:null,session:null},error:new Kn}}catch(t){if(Bn(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,r,a;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(r=e.options)||void 0===r?void 0:r.queryParams,skipBrowserRedirect:null===(a=e.options)||void 0===a?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if("solana"===t)return await this.signInWithSolana(e);throw new Error('@supabase/auth-js: Unsupported chain "'.concat(t,'"'))}async signInWithSolana(e){var t,n,r,a,i,s,o,l,c,u,d,h;let p,f;if("message"in e)p=e.message,f=e.signature;else{const{chain:d,wallet:h,statement:m,options:g}=e;let y;if(hr())if("object"===typeof h)y=h;else{const e=window;if(!("solana"in e)||"object"!==typeof e.solana||!("signIn"in e.solana&&"function"===typeof e.solana.signIn||"signMessage"in e.solana&&"function"===typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");y=e.solana}else{if("object"!==typeof h||!(null===g||void 0===g?void 0:g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");y=h}const v=new URL(null!==(t=null===g||void 0===g?void 0:g.url)&&void 0!==t?t:window.location.href);if("signIn"in y&&y.signIn){const e=await y.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null===g||void 0===g?void 0:g.signInWithSolana),{version:"1",domain:v.host,uri:v.href}),m?{statement:m}:null));let t;if(Array.isArray(e)&&e[0]&&"object"===typeof e[0])t=e[0];else{if(!(e&&"object"===typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"===typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");p="string"===typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),f=t.signature}else{if(!("signMessage"in y)||"function"!==typeof y.signMessage||!("publicKey"in y)||"object"!==typeof y||!y.publicKey||!("toBase58"in y.publicKey)||"function"!==typeof y.publicKey.toBase58)throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=["".concat(v.host," wants you to sign in with your Solana account:"),y.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1","URI: ".concat(v.href),"Issued At: ".concat(null!==(r=null===(n=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===n?void 0:n.issuedAt)&&void 0!==r?r:(new Date).toISOString()),...(null===(a=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===a?void 0:a.notBefore)?["Not Before: ".concat(g.signInWithSolana.notBefore)]:[],...(null===(i=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===i?void 0:i.expirationTime)?["Expiration Time: ".concat(g.signInWithSolana.expirationTime)]:[],...(null===(s=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===s?void 0:s.chainId)?["Chain ID: ".concat(g.signInWithSolana.chainId)]:[],...(null===(o=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===o?void 0:o.nonce)?["Nonce: ".concat(g.signInWithSolana.nonce)]:[],...(null===(l=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===l?void 0:l.requestId)?["Request ID: ".concat(g.signInWithSolana.requestId)]:[],...(null===(u=null===(c=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===u?void 0:u.length)?["Resources",...g.signInWithSolana.resources.map(e=>"- ".concat(e))]:[]].join("\n");const e=await y.signMessage((new TextEncoder).encode(p),"utf8");if(!e||!(e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");f=e}}try{const{data:t,error:n}=await Ir(this.fetch,"POST","".concat(this.url,"/token?grant_type=web3"),{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:dr(f)},(null===(d=e.options)||void 0===d?void 0:d.captchaToken)?{gotrue_meta_security:{captcha_token:null===(h=e.options)||void 0===h?void 0:h.captchaToken}}:null),xform:Ar});if(n)throw n;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:n}):{data:{user:null,session:null},error:new Kn}}catch(m){if(Bn(m))return{data:{user:null,session:null},error:m};throw m}}async _exchangeCodeForSession(e){const t=await yr(this.storage,"".concat(this.storageKey,"-code-verifier")),[n,r]=(null!==t&&void 0!==t?t:"").split("/");try{const{data:t,error:a}=await Ir(this.fetch,"POST","".concat(this.url,"/token?grant_type=pkce"),{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Ar});if(await vr(this.storage,"".concat(this.storageKey,"-code-verifier")),a)throw a;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!==r&&void 0!==r?r:null}),error:a}):{data:{user:null,session:null,redirectType:null},error:new Kn}}catch(a){if(Bn(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:t,provider:n,token:r,access_token:a,nonce:i}=e,s=await Ir(this.fetch,"POST","".concat(this.url,"/token?grant_type=id_token"),{headers:this.headers,body:{provider:n,id_token:r,access_token:a,nonce:i,gotrue_meta_security:{captcha_token:null===t||void 0===t?void 0:t.captchaToken}},xform:Ar}),{data:o,error:l}=s;return l?{data:{user:null,session:null},error:l}:o&&o.session&&o.user?(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:l}):{data:{user:null,session:null},error:new Kn}}catch(t){if(Bn(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,r,a,i;try{if("email"in e){const{email:r,options:a}=e;let i=null,s=null;"pkce"===this.flowType&&([i,s]=await kr(this.storage,this.storageKey));const{error:o}=await Ir(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{email:r,data:null!==(t=null===a||void 0===a?void 0:a.data)&&void 0!==t?t:{},create_user:null===(n=null===a||void 0===a?void 0:a.shouldCreateUser)||void 0===n||n,gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken},code_challenge:i,code_challenge_method:s},redirectTo:null===a||void 0===a?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:o}}if("phone"in e){const{phone:t,options:n}=e,{data:s,error:o}=await Ir(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{phone:t,data:null!==(r=null===n||void 0===n?void 0:n.data)&&void 0!==r?r:{},create_user:null===(a=null===n||void 0===n?void 0:n.shouldCreateUser)||void 0===a||a,gotrue_meta_security:{captcha_token:null===n||void 0===n?void 0:n.captchaToken},channel:null!==(i=null===n||void 0===n?void 0:n.channel)&&void 0!==i?i:"sms"}});return{data:{user:null,session:null,messageId:null===s||void 0===s?void 0:s.message_id},error:o}}throw new Jn("You must provide either an email or phone number.")}catch(s){if(Bn(s))return{data:{user:null,session:null},error:s};throw s}}async verifyOtp(e){var t,n;try{let r,a;"options"in e&&(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo,a=null===(n=e.options)||void 0===n?void 0:n.captchaToken);const{data:i,error:s}=await Ir(this.fetch,"POST","".concat(this.url,"/verify"),{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:r,xform:Ar});if(s)throw s;if(!i)throw new Error("An error occurred on token verification.");const o=i.session,l=i.user;return(null===o||void 0===o?void 0:o.access_token)&&(await this._saveSession(o),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(r){if(Bn(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var t,n,r;try{let a=null,i=null;return"pkce"===this.flowType&&([a,i]=await kr(this.storage,this.storageKey)),await Ir(this.fetch,"POST","".concat(this.url,"/sso"),{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==n?n:void 0}),(null===(r=null===e||void 0===e?void 0:e.options)||void 0===r?void 0:r.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:i}),headers:this.headers,xform:Rr})}catch(a){if(Bn(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new Gn;const{error:r}=await Ir(this.fetch,"GET","".concat(this.url,"/reauthenticate"),{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(Bn(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t="".concat(this.url,"/resend");if("email"in e){const{email:n,type:r,options:a}=e,{error:i}=await Ir(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken}},redirectTo:null===a||void 0===a?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:i}}if("phone"in e){const{phone:n,type:r,options:a}=e,{data:i,error:s}=await Ir(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:null===i||void 0===i?void 0:i.message_id},error:s}}throw new Jn("You must provide either an email or phone number and a type")}catch(t){if(Bn(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch(e){}})()),n}return await this.lock("lock:".concat(this.storageKey),e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(t){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await yr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=!!e.expires_at&&1e3*e.expires_at-Date.now()<Mn;if(this._debug("#__loadSession()","session has".concat(n?"":" not"," expired"),"expires_at",e.expires_at),!n){if(this.storage.isServer){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,n,r)=>(t||"user"!==n||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,n,r))})}return{data:{session:e},error:null}}const{session:r,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,async()=>await this._getUser())}async _getUser(e){try{return e?await Ir(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:e,xform:Or}):await this._useSession(async e=>{var t,n,r;const{data:a,error:i}=e;if(i)throw i;return(null===(t=a.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await Ir(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:null!==(r=null===(n=a.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0,xform:Or}):{data:{user:null},error:new Gn}})}catch(t){if(Bn(t))return function(e){return Bn(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await vr(this.storage,"".concat(this.storageKey,"-code-verifier"))),{data:{user:null},error:t};throw t}}async updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await this._useSession(async n=>{const{data:r,error:a}=n;if(a)throw a;if(!r.session)throw new Gn;const i=r.session;let s=null,o=null;"pkce"===this.flowType&&null!=e.email&&([s,o]=await kr(this.storage,this.storageKey));const{data:l,error:c}=await Ir(this.fetch,"PUT","".concat(this.url,"/user"),{headers:this.headers,redirectTo:null===t||void 0===t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:s,code_challenge_method:o}),jwt:i.access_token,xform:Or});if(c)throw c;return i.user=l.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(n){if(Bn(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Gn;const t=Date.now()/1e3;let n=t,r=!0,a=null;const{payload:i}=xr(e.access_token);if(i.exp&&(n=i.exp,r=n<=t),r){const{session:t,error:n}=await this._callRefreshToken(e.refresh_token);if(n)return{data:{user:null,session:null},error:n};if(!t)return{data:{user:null,session:null},error:null};a=t}else{const{data:r,error:i}=await this._getUser(e.access_token);if(i)throw i;a={access_token:e.access_token,refresh_token:e.refresh_token,user:r.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(t){if(Bn(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:r,error:a}=t;if(a)throw a;e=null!==(n=r.session)&&void 0!==n?n:void 0}if(!(null===e||void 0===e?void 0:e.refresh_token))throw new Gn;const{session:r,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Bn(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!hr())throw new $n("No browser detected.");if(e.error||e.error_description||e.error_code)throw new $n(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new Yn("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new $n("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Yn("No code detected.");const{data:t,error:n}=await this._exchangeCodeForSession(e.code);if(n)throw n;const r=new URL(window.location.href);return r.searchParams.delete("code"),window.history.replaceState(window.history.state,"",r.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:r,access_token:a,refresh_token:i,expires_in:s,expires_at:o,token_type:l}=e;if(!a||!s||!i||!l)throw new $n("No session defined in URL");const c=Math.round(Date.now()/1e3),u=parseInt(s);let d=c+u;o&&(d=parseInt(o));const h=d-c;1e3*h<=Dn&&console.warn("@supabase/gotrue-js: Session as retrieved from URL expires in ".concat(h,"s, should have been closer to ").concat(u,"s"));const p=d-u;c-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,d,c):c-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,d,c);const{data:f,error:m}=await this._getUser(a);if(m)throw m;const g={provider_token:n,provider_refresh_token:r,access_token:a,expires_in:u,expires_at:d,refresh_token:i,token_type:l,user:f.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:e.type},error:null}}catch(n){if(Bn(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await yr(this.storage,"".concat(this.storageKey,"-code-verifier"));return!(!e.code||!t)}async signOut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut(){let{scope:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this._useSession(async t=>{var n;const{data:r,error:a}=t;if(a)return{error:a};const i=null===(n=r.session)||void 0===n?void 0:n.access_token;if(i){const{error:t}=await this.admin.signOut(i,e);if(t&&(!function(e){return Bn(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await vr(this.storage,"".concat(this.storageKey,"-code-verifier"))),{error:null}})}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,r;try{const{data:{session:r},error:a}=t;if(a)throw a;await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",r)),this._debug("INITIAL_SESSION","callback id",e,"session",r)}catch(a){await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,r=null;"pkce"===this.flowType&&([n,r]=await kr(this.storage,this.storageKey,!0));try{return await Ir(this.fetch,"POST","".concat(this.url,"/recover"),{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(a){if(Bn(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(t){if(Bn(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:n,error:r}=await this._useSession(async t=>{var n,r,a,i,s;const{data:o,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider("".concat(this.url,"/user/identities/authorize"),e.provider,{redirectTo:null===(n=e.options)||void 0===n?void 0:n.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(a=e.options)||void 0===a?void 0:a.queryParams,skipBrowserRedirect:!0});return await Ir(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(s=null===(i=o.session)||void 0===i?void 0:i.access_token)&&void 0!==s?s:void 0})});if(r)throw r;return hr()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null===n||void 0===n?void 0:n.url),{data:{provider:e.provider,url:null===n||void 0===n?void 0:n.url},error:null}}catch(n){if(Bn(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,r;const{data:a,error:i}=t;if(i)throw i;return await Ir(this.fetch,"DELETE","".concat(this.url,"/user/identities/").concat(e.identity_id),{headers:this.headers,jwt:null!==(r=null===(n=a.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0})})}catch(t){if(Bn(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t="#_refreshAccessToken(".concat(e.substring(0,5),"...)");this._debug(t,"begin");try{const a=Date.now();return await(n=async n=>(n>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await Ir(this.fetch,"POST","".concat(this.url,"/token?grant_type=refresh_token"),{body:{refresh_token:e},headers:this.headers,xform:Ar})),r=(e,t)=>{const n=200*Math.pow(2,e);return t&&Zn(t)&&Date.now()+n-a<Dn},new Promise((e,t)=>{(async()=>{for(let i=0;i<1/0;i++)try{const t=await n(i);if(!r(i,null,t))return void e(t)}catch(a){if(!r(i,a))return void t(a)}})()}))}catch(a){if(this._debug(t,"error",a),Bn(a))return{data:{session:null,user:null},error:a};throw a}finally{this._debug(t,"end")}var n,r}_isValidSession(e){return"object"===typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider("".concat(this.url,"/authorize"),e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),hr()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const n=await yr(this.storage,this.storageKey);if(this._debug(t,"session from storage",n),!this._isValidSession(n))return this._debug(t,"session is not valid"),void(null!==n&&await this._removeSession());const r=1e3*(null!==(e=n.expires_at)&&void 0!==e?e:1/0)-Date.now()<Mn;if(this._debug(t,"session has".concat(r?"":" not"," expired with margin of ").concat(Mn,"s")),r){if(this.autoRefreshToken&&n.refresh_token){const{error:e}=await this._callRefreshToken(n.refresh_token);e&&(console.error(e),Zn(e)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){return this._debug(t,"error",n),void console.error(n)}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new Gn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r="#_callRefreshToken(".concat(e.substring(0,5),"...)");this._debug(r,"begin");try{this.refreshingDeferred=new br;const{data:t,error:n}=await this._refreshAccessToken(e);if(n)throw n;if(!t.session)throw new Gn;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const r={session:t.session,error:null};return this.refreshingDeferred.resolve(r),r}catch(a){if(this._debug(r,"error",a),Bn(a)){const e={session:null,error:a};return Zn(a)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(n=this.refreshingDeferred)||void 0===n||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r="#_notifyAllSubscribers(".concat(e,")");this._debug(r,"begin",t,"broadcast = ".concat(n));try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const r=[],a=Array.from(this.stateChangeEmitters.values()).map(async n=>{try{await n.callback(e,t)}catch(a){r.push(a)}});if(await Promise.all(a),r.length>0){for(let e=0;e<r.length;e+=1)console.error(r[e]);throw r[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await gr(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await vr(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&hr()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Dn);this.autoRefreshTicker=e,e&&"object"===typeof e&&"function"===typeof e.unref?e.unref():"undefined"!==typeof Deno&&"function"===typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async e=>{const{data:{session:n}}=e;if(!n||!n.refresh_token||!n.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const r=Math.floor((1e3*n.expires_at-t)/Dn);this._debug("#_autoRefreshTokenTick()","access token expires in ".concat(r," ticks, a tick lasts ").concat(Dn,"ms, refresh threshold is ").concat(3," ticks")),r<=3&&await this._callRefreshToken(n.refresh_token)})}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(!(e.isAcquireTimeout||e instanceof Wr))throw e;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!hr()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t="#_onVisibilityChanged(".concat(e,")");this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const r=["provider=".concat(encodeURIComponent(t))];if((null===n||void 0===n?void 0:n.redirectTo)&&r.push("redirect_to=".concat(encodeURIComponent(n.redirectTo))),(null===n||void 0===n?void 0:n.scopes)&&r.push("scopes=".concat(encodeURIComponent(n.scopes))),"pkce"===this.flowType){const[e,t]=await kr(this.storage,this.storageKey),n=new URLSearchParams({code_challenge:"".concat(encodeURIComponent(e)),code_challenge_method:"".concat(encodeURIComponent(t))});r.push(n.toString())}if(null===n||void 0===n?void 0:n.queryParams){const e=new URLSearchParams(n.queryParams);r.push(e.toString())}return(null===n||void 0===n?void 0:n.skipBrowserRedirect)&&r.push("skip_http_redirect=".concat(n.skipBrowserRedirect)),"".concat(e,"?").concat(r.join("&"))}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:r,error:a}=t;return a?{data:null,error:a}:await Ir(this.fetch,"DELETE","".concat(this.url,"/factors/").concat(e.factorId),{headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token})})}catch(t){if(Bn(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,r;const{data:a,error:i}=t;if(i)return{data:null,error:i};const s=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:o,error:l}=await Ir(this.fetch,"POST","".concat(this.url,"/factors"),{body:s,headers:this.headers,jwt:null===(n=null===a||void 0===a?void 0:a.session)||void 0===n?void 0:n.access_token});return l?{data:null,error:l}:("totp"===e.factorType&&(null===(r=null===o||void 0===o?void 0:o.totp)||void 0===r?void 0:r.qr_code)&&(o.totp.qr_code="data:image/svg+xml;utf-8,".concat(o.totp.qr_code)),{data:o,error:null})})}catch(t){if(Bn(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:a}=t;if(a)return{data:null,error:a};const{data:i,error:s}=await Ir(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/verify"),{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token});return s?{data:null,error:s}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:s})})}catch(t){if(Bn(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:a}=t;return a?{data:null,error:a}:await Ir(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/challenge"),{body:{channel:e.channel},headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token})})}catch(t){if(Bn(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=(null===e||void 0===e?void 0:e.factors)||[],r=n.filter(e=>"totp"===e.factor_type&&"verified"===e.status),a=n.filter(e=>"phone"===e.factor_type&&"verified"===e.status);return{data:{all:n,totp:r,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,n;const{data:{session:r},error:a}=e;if(a)return{data:null,error:a};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=xr(r.access_token);let s=null;i.aal&&(s=i.aal);let o=s;(null!==(n=null===(t=r.user.factors)||void 0===t?void 0:t.filter(e=>"verified"===e.status))&&void 0!==n?n:[]).length>0&&(o="aal2");return{data:{currentLevel:s,nextLevel:o,currentAuthenticationMethods:i.amr||[]},error:null}}))}async fetchJwk(e){let t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keys:[]}).keys.find(t=>t.kid===e);if(t)return t;if(t=this.jwks.keys.find(t=>t.kid===e),t&&this.jwks_cached_at+6e5>Date.now())return t;const{data:n,error:r}=await Ir(this.fetch,"GET","".concat(this.url,"/.well-known/jwks.json"),{headers:this.headers});if(r)throw r;if(!n.keys||0===n.keys.length)throw new tr("JWKS is empty");if(this.jwks=n,this.jwks_cached_at=Date.now(),t=n.keys.find(t=>t.kid===e),!t)throw new tr("No matching signing key found in JWKS");return t}async getClaims(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keys:[]};try{let n=e;if(!n){const{data:e,error:t}=await this.getSession();if(t||!e.session)return{data:null,error:t};n=e.session.access_token}const{header:r,payload:a,signature:i,raw:{header:s,payload:o}}=xr(n);if(function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(a.exp),!r.kid||"HS256"===r.alg||!("crypto"in globalThis)||!("subtle"in globalThis.crypto)){const{error:e}=await this.getUser(n);if(e)throw e;return{data:{claims:a,header:r,signature:i},error:null}}const l=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(r.alg),c=await this.fetchJwk(r.kid,t),u=await crypto.subtle.importKey("jwk",c,l,!0,["verify"]);if(!await crypto.subtle.verify(l,u,i,function(e){const t=[];return cr(e,e=>t.push(e)),new Uint8Array(t)}("".concat(s,".").concat(o))))throw new tr("Invalid JWT signature");return{data:{claims:a,header:r,signature:i},error:null}}catch(n){if(Bn(n))return{data:null,error:n};throw n}}}Jr.nextInstanceID=0;const $r=Jr;class Yr extends $r{constructor(e){super(e)}}var Xr=function(e,t,n,r){return new(n||(n=Promise))(function(a,i){function s(e){try{l(r.next(e))}catch(t){i(t)}}function o(e){try{l(r.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,o)}l((r=r.apply(e,t||[])).next())})};class Zr{constructor(e,t,n){var r,a,i;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const s=(o=e).endsWith("/")?o:o+"/";var o;const l=new URL(s);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c="sb-".concat(l.hostname.split(".")[0],"-auth-token"),u=function(e,t){var n,r;const{db:a,auth:i,realtime:s,global:o}=e,{db:l,auth:c,realtime:u,global:d}=t,h={db:Object.assign(Object.assign({},l),a),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},u),s),global:Object.assign(Object.assign(Object.assign({},d),o),{headers:Object.assign(Object.assign({},null!==(n=null===d||void 0===d?void 0:d.headers)&&void 0!==n?n:{}),null!==(r=null===o||void 0===o?void 0:o.headers)&&void 0!==r?r:{})}),accessToken:()=>On(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}(null!==n&&void 0!==n?n:{},{db:Nn,realtime:En,auth:Object.assign(Object.assign({},Tn),{storageKey:c}),global:Cn});this.storageKey=null!==(r=u.auth.storageKey)&&void 0!==r?r:"",this.headers=null!==(a=u.global.headers)&&void 0!==a?a:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error("@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.".concat(String(t)," is not possible"))}})):this.auth=this._initSupabaseAuthClient(null!==(i=u.auth)&&void 0!==i?i:{},this.headers,u.global.fetch),this.fetch=Ln(t,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new wt(new URL("rest/v1",l).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),u.accessToken||this._listenForAuthEvents()}get functions(){return new bt(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new jn(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.rest.rpc(e,t,n)}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Xr(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return null!==(t=null===(e=n.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:null})}_initSupabaseAuthClient(e,t,n){let{autoRefreshToken:r,persistSession:a,detectSessionInUrl:i,storage:s,storageKey:o,flowType:l,lock:c,debug:u}=e;const d={Authorization:"Bearer ".concat(this.supabaseKey),apikey:"".concat(this.supabaseKey)};return new Yr({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),t),storageKey:o,autoRefreshToken:r,persistSession:a,detectSessionInUrl:i,storage:s,flowType:l,lock:c,debug:u,fetch:n,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new tn(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null===e||void 0===e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null===t||void 0===t?void 0:t.access_token)})}_handleTokenChanged(e,t,n){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===n?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):this.changedAccessToken=n}}const ea="https://czdtrrxwoonaryalnkbc.supabase.co",ta="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN6ZHRycnh3b29uYXJ5YWxua2JjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE0MzYyMDYsImV4cCI6MjA2NzAxMjIwNn0.4IVXaxMtjhaJIIrd_70EAx72B8cIkKZvc2UWWrUIhgA";const na=((e,t,n)=>new Zr(e,t,n))(ea,ta,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0},global:{headers:{"X-Client-Info":"supabase-js-web"}}}),ra={1:{primary:"simplified",secondary:"visual",tertiary:"reading",characteristics:{contentChunking:"small",visualSupport:"extensive",pacing:"slow",repetition:"high",complexity:"single",navigation:"linear"},uiElements:{fontSize:"large",animations:"slow",colors:"calming",interactionLevel:"simple"}},2:{primary:"visual",secondary:"reading",tertiary:"simplified",characteristics:{contentChunking:"small",visualSupport:"extensive",pacing:"slow",repetition:"medium",complexity:"single",navigation:"guided"},uiElements:{fontSize:"large",animations:"standard",colors:"calming",interactionLevel:"moderate"}},3:{primary:"visual",secondary:"kinesthetic",tertiary:"reading",characteristics:{contentChunking:"medium",visualSupport:"moderate",pacing:"medium",repetition:"medium",complexity:"moderate",navigation:"guided"},uiElements:{fontSize:"standard",animations:"standard",colors:"vibrant",interactionLevel:"moderate"}},4:{primary:"reading",secondary:"conversational",tertiary:"kinesthetic",characteristics:{contentChunking:"medium",visualSupport:"moderate",pacing:"fast",repetition:"low",complexity:"multiple",navigation:"free"},uiElements:{fontSize:"standard",animations:"quick",colors:"professional",interactionLevel:"complex"}},5:{primary:"conversational",secondary:"kinesthetic",tertiary:"reading",characteristics:{contentChunking:"large",visualSupport:"minimal",pacing:"fast",repetition:"low",complexity:"multiple",navigation:"free"},uiElements:{fontSize:"compact",animations:"quick",colors:"professional",interactionLevel:"complex"}}},aa=e=>ra[e.toString()]||ra[3],ia=(e,t)=>{const n=aa(t);return{text:sa(e,n),visualElements:da(n),interactions:ha(n),pacing:pa(n.characteristics.pacing),complexity:n.characteristics.complexity}},sa=(e,t)=>{const{contentChunking:n,repetition:r}=t.characteristics;switch(n){case"small":return oa(e,"high"===r);case"medium":return la(e);case"large":return ca(e);default:return e}},oa=(e,t)=>{const n=e.split(". ").map(e=>e.replace(/\b(approximately|approximately|essentially|fundamentally)\b/gi,"").replace(/\b(therefore|consequently|furthermore)\b/gi,"So").replace(/\b(utilize|implement)\b/gi,"use"));return t?n.map(e=>"".concat(e,". ").concat(ua(e))).join(" "):n.join(". ")},la=e=>e.replace(/\. /g,". \n\n**Next:** ").replace(/\n\n\*\*Next:\*\* $/,""),ca=e=>e.replace(/gravity/gi,"gravitational force (the fundamental interaction that attracts objects with mass)").replace(/photosynthesis/gi,"photosynthesis (the complex biochemical process by which plants convert light energy into chemical energy)"),ua=e=>{const t=["This means","In other words","Simply put","To put it another way"],n=t[Math.floor(Math.random()*t.length)];return"".concat(n,", this is important to remember.")},da=e=>{const t=[];return"visual"!==e.primary&&"visual"!==e.secondary||t.push("diagrams","illustrations","infographics"),"simplified"===e.primary&&t.push("large-icons","simple-diagrams","color-coding"),"extensive"===e.characteristics.visualSupport&&t.push("animations","step-by-step-visuals","interactive-images"),t},ha=e=>{const t=[];switch(e.uiElements.interactionLevel){case"simple":t.push("click-to-reveal","simple-navigation");break;case"moderate":t.push("drag-drop","interactive-quizzes","hover-effects");break;case"complex":t.push("simulations","chat-interface","advanced-controls")}return"kinesthetic"===e.primary&&t.push("hands-on-activities","manipulatives"),"conversational"===e.primary&&t.push("ai-chat","question-prompts","exploration-tools"),t},pa=e=>{switch(e){case"slow":return.5;case"medium":default:return 1;case"fast":return 1.5}},fa=e=>{const t=aa(e);return{layout:ma(t),components:ga(t),styling:ya(t),behavior:va(t)}},ma=e=>"simplified"===e.primary?"single-column-large":"visual"===e.primary?"image-focused":"reading"===e.primary?"text-focused":"conversational"===e.primary?"chat-interface":"balanced-layout",ga=e=>{const t=["content-area"];return"minimal"!==e.characteristics.visualSupport&&t.push("visual-area"),"conversational"===e.primary&&t.push("chat-area"),"kinesthetic"===e.secondary&&t.push("interactive-area"),"linear"===e.characteristics.navigation?t.push("simple-navigation"):t.push("advanced-navigation"),t},ya=e=>({fontSize:e.uiElements.fontSize,colorScheme:e.uiElements.colors,animationSpeed:e.uiElements.animations,spacing:"small"===e.characteristics.contentChunking?"large":"normal",contrast:"calming"===e.uiElements.colors?"high":"normal"}),va=e=>({autoAdvance:"fast"===e.characteristics.pacing,showHints:"high"===e.characteristics.repetition,allowSkipping:"free"===e.characteristics.navigation,pauseOnInteraction:"slow"===e.characteristics.pacing});async function ba(e){if(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e))return e;const{data:t,error:n}=await na.from("topics").select("id").eq("slug",e).single();if(n||!t)throw new Error("Topic not found for slug: ".concat(e));return t.id}const xa={async signUp(e,t,n){const{data:r,error:a}=await na.auth.signUp({email:e,password:t,options:{data:{name:n.name,learning_speed:n.learning_speed,avatar:n.avatar}}});if(a)throw a;if(r.user&&r.session){console.log("\ud83d\udd04 Waiting for session to be fully established..."),await new Promise(e=>setTimeout(e,1e3));const{data:{session:e}}=await na.auth.getSession();e||(console.warn("\u26a0\ufe0f Session not immediately available, waiting longer..."),await new Promise(e=>setTimeout(e,2e3)))}return r},async signIn(e,t){const{data:n,error:r}=await na.auth.signInWithPassword({email:e,password:t});if(r)throw r;return n},async signOut(){const{error:e}=await na.auth.signOut();if(e)throw e},async getCurrentUser(){const{data:{user:e},error:t}=await na.auth.getUser();if(t)throw t;return e},onAuthStateChange:e=>na.auth.onAuthStateChange(e)},wa={async getProfile(e){try{const{data:{session:t}}=await na.auth.getSession();if(console.log("Current session for profile fetch:",t?"Valid":"None"),!t)throw console.warn("No active session found for profile fetch"),new Error("No active session - please sign in again");const{data:n,error:r}=await na.from("users").select("*").eq("id",e);if(r&&"PGRST116"!==r.code)throw console.error("Profile fetch error:",r),console.error("Error details:",{code:r.code,message:r.message,details:r.details,hint:r.hint,userId:e,hasSession:!!t}),new Error("Failed to fetch profile: ".concat(r.message));return(null===n||void 0===n?void 0:n[0])||null}catch(n){var t;if(null!==(t=n.message)&&void 0!==t&&t.includes("406"))throw console.error("406 Not Acceptable error detected:",n),new Error("Authentication error - please try signing in again");throw n}},async createProfile(e,t){const{data:n,error:r}=await na.from("users").insert({id:e,email:t.email,name:t.name,learning_speed:t.learning_speed,avatar:t.avatar,preferences:t.preferences||{explanationDetail:"detailed",exampleCount:2,repeatCount:1}}).select().single();if(r)throw console.error("Profile creation error:",r),new Error("Failed to create profile: ".concat(r.message));return n},async updateProfile(e,t){const{data:n,error:r}=await na.from("users").update(I(I({},t),{},{updated_at:(new Date).toISOString()})).eq("id",e).select().single();if(r)throw r;return n},async updateLastActive(e){const{error:t}=await na.from("users").update({last_active_at:(new Date).toISOString()}).eq("id",e);if(t)throw t},async logActivity(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{error:r}=await na.from("user_activities").insert({user_id:e,activity_type:t,activity_data:n});if(r)throw r}},Sa={async getAllTopics(){const{data:e,error:t}=await na.from("topics").select("*").eq("is_active",!0).order("difficulty",{ascending:!0});if(t)throw t;return e||[]},async getTopicBySlug(e){const{data:t,error:n}=await na.from("topics").select("*").eq("slug",e).eq("is_active",!0).single();if(n&&"PGRST116"!==n.code)throw n;return t},async getTopicById(e){const{data:t,error:n}=await na.from("topics").select("*").eq("id",e).eq("is_active",!0).single();if(n&&"PGRST116"!==n.code)throw n;return t},async getLessons(e,t){const n=await ba(e),{data:r,error:a}=await na.from("lessons").select("*").eq("topic_id",n).eq("learning_speed_target",t).order("section_number",{ascending:!0});if(a)throw a;return r||[]},async saveLesson(e){const t=await ba(e.topic_id),{data:n,error:r}=await na.from("lessons").upsert(I(I({},e),{},{topic_id:t}),{onConflict:"topic_id,section_number,learning_speed_target",ignoreDuplicates:!1}).select().single();if(r){if("23505"===r.code)return console.log("\u2139\ufe0f Lesson already exists: topic=".concat(t,", section=").concat(e.section_number,", speed=").concat(e.learning_speed_target)),{id:"existing-lesson",topic_id:t,section_number:e.section_number,title:e.title,content:e.content,tip:e.tip,interactive_type:e.interactive_type,image:e.image,learning_speed_target:e.learning_speed_target,created_at:(new Date).toISOString()};throw console.error("Failed to save lesson:",r.message),r}return n}},ka={async getUserProgress(e){const{data:t,error:n}=await na.from("user_progress").select("\n        *,\n        topics:topic_id (\n          slug,\n          title,\n          icon,\n          color\n        )\n      ").eq("user_id",e).order("last_accessed_at",{ascending:!1});if(n)throw n;return t||[]},async getTopicProgress(e,t){const n=await ba(t),{data:r,error:a}=await na.from("user_progress").select("*").eq("user_id",e).eq("topic_id",n).single();if(a&&"PGRST116"!==a.code)throw a;return r},async updateProgress(e,t,n){const r=await ba(t),a=I({user_id:e,topic_id:r,last_accessed_at:(new Date).toISOString()},n),{data:i,error:s}=await na.from("user_progress").upsert(a,{onConflict:"user_id,topic_id",ignoreDuplicates:!1}).select().single();if(s){if("23505"===s.code)return console.log("\u2139\ufe0f Progress record already exists: user=".concat(e,", topic=").concat(r)),{id:"existing-progress",user_id:e,topic_id:r,progress_percentage:n.progress_percentage,completed:n.completed||!1,time_spent_seconds:n.time_spent_seconds||0,last_accessed_at:(new Date).toISOString(),started_at:(new Date).toISOString()};throw console.error("Failed to update progress:",s.message),s}return i},async completeTopicStory(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.updateProgress(e,t,{progress_percentage:100,completed:!0,time_spent_seconds:n})},async getLessonProgress(e,t){const{data:n,error:r}=await na.from("lesson_progress").select("*").eq("user_id",e).eq("lesson_id",t).single();if(r&&"PGRST116"!==r.code)throw r;return n},async updateLessonProgress(e,t,n){const r=I({user_id:e,lesson_id:t},n),{data:a,error:i}=await na.from("lesson_progress").upsert(r,{onConflict:"user_id,lesson_id",ignoreDuplicates:!1}).select().single();if(i){if("23505"===i.code)return console.log("\u2139\ufe0f Lesson progress already exists: user=".concat(e,", lesson=").concat(t)),{id:"existing-lesson-progress",user_id:e,lesson_id:t,completed:n.completed||!1,progress_percentage:n.progress_percentage||0,time_spent_seconds:n.time_spent_seconds||0,started_at:(new Date).toISOString()};throw console.error("Failed to update lesson progress:",i.message),i}return a}},ja={async getChatHistory(e,t){let n=na.from("chat_messages").select("*").eq("user_id",e).order("created_at",{ascending:!0});t&&(n=n.eq("topic_id",t));const{data:r,error:a}=await n;if(a)throw a;return r||[]},async sendMessage(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const{data:i,error:s}=await na.from("chat_messages").insert({user_id:e,topic_id:r,message:t,sender:n,metadata:a}).select().single();if(s)throw s;return i},async clearChatHistory(e,t){let n=na.from("chat_messages").delete().eq("user_id",e);t&&(n=n.eq("topic_id",t));const{error:r}=await n;if(r)throw r}},_a={async getQuizQuestions(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;const r=await ba(e),{data:a,error:i}=await na.from("quiz_questions").select("*").eq("topic_id",r).eq("learning_speed_target",t).limit(n);if(i)throw i;return a||[]},async saveQuizAttempt(e,t){const n=await ba(t.topic_id),{data:r,error:a}=await na.from("quiz_attempts").insert(I(I({user_id:e},t),{},{topic_id:n})).select().single();if(a)throw a;return r},async getQuizHistory(e){const{data:t,error:n}=await na.from("quiz_attempts").select("\n        *,\n        topics:topic_id (\n          title,\n          icon\n        )\n      ").eq("user_id",e).order("created_at",{ascending:!1});if(n)throw n;return t||[]},async getBestScore(e,t){const n=await ba(t),{data:r,error:a}=await na.from("quiz_attempts").select("score, total_questions").eq("user_id",e).eq("topic_id",n).eq("completed",!0).order("score",{ascending:!1}).limit(1).single();if(a&&"PGRST116"!==a.code)throw a;return r}},Ca={async getAllAchievements(){try{const{data:e,error:t}=await na.from("achievements").select("*").eq("is_active",!0).order("category",{ascending:!0});if(t){if(console.error("Achievements API error:",t),"42P01"===t.code||"406"===t.code||t.message.includes("relation")||t.message.includes("table"))return console.warn("\u26a0\ufe0f Achievements table not found or inaccessible. Please run the seed data script."),[];throw t}return e||[]}catch(e){return console.error("Failed to load achievements:",e),[]}},async getUserAchievements(e){try{const{data:t,error:n}=await na.from("user_achievements").select("\n          *,\n          achievements:achievement_id (*)\n        ").eq("user_id",e);if(n){if(console.error("User achievements API error:",n),"42P01"===n.code||"406"===n.code||n.message.includes("relation")||n.message.includes("table"))return console.warn("\u26a0\ufe0f User achievements table not found or inaccessible."),[];throw n}return t||[]}catch(t){return console.error("Failed to load user achievements:",t),[]}},async updateAchievementProgress(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a={user_id:e,achievement_id:t,current_progress:n};r&&(a.unlocked=!0,a.unlocked_at=(new Date).toISOString());const{data:i,error:s}=await na.from("user_achievements").upsert(a,{onConflict:"user_id,achievement_id",ignoreDuplicates:!1}).select("\n        *,\n        achievements:achievement_id (*)\n      ").single();if(s){if("23505"===s.code)return console.log("\u2139\ufe0f Achievement progress already exists: user=".concat(e,", achievement=").concat(t)),{id:"existing-achievement",user_id:e,achievement_id:t,current_progress:n,unlocked:r,unlocked_at:r?(new Date).toISOString():null};throw console.error("Failed to update achievement progress:",s.message),s}return i},async getAchievementByKey(e){try{const{data:t,error:n}=await na.from("achievements").select("*").eq("achievement_key",e).eq("is_active",!0).single();if(n){if("PGRST116"===n.code)return console.warn("\u26a0\ufe0f Achievement not found: ".concat(e)),null;if("42P01"===n.code||"406"===n.code||n.message.includes("relation")||n.message.includes("table"))return console.warn("\u26a0\ufe0f Achievements table not found or inaccessible."),null;throw n}return t}catch(t){return console.error("Failed to get achievement ".concat(e,":"),t),null}}},Na={async getUserDashboard(e){const{data:t,error:n}=await na.from("user_dashboard").select("*").eq("id",e).single();if(n&&"PGRST116"!==n.code)throw n;return t},async getRecentActivity(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;const{data:n,error:r}=await na.from("user_activities").select("*").eq("user_id",e).order("created_at",{ascending:!1}).limit(t);if(r)throw r;return n||[]},async getLearningStats(e){const[t,n,r]=await Promise.all([ka.getUserProgress(e),_a.getQuizHistory(e),Ca.getUserAchievements(e)]);return{totalTopics:t.length,completedTopics:t.filter(e=>e.completed).length,totalQuizzes:n.length,averageScore:n.length>0?n.reduce((e,t)=>e+t.score/t.total_questions*100,0)/n.length:0,unlockedAchievements:r.filter(e=>e.unlocked).length,totalTime:t.reduce((e,t)=>e+t.time_spent_seconds,0)}}},Ta={async getTodaysGoal(e){const t=(new Date).toISOString().split("T")[0],{data:n,error:r}=await na.from("daily_goals").select("*").eq("user_id",e).eq("goal_date",t).single();if(r&&"PGRST116"!==r.code)throw r;return n},async setDailyGoal(e,t){const n=(new Date).toISOString().split("T")[0],{data:r,error:a}=await na.from("daily_goals").upsert({user_id:e,goal_date:n,lessons_goal:t,lessons_completed:0,goal_achieved:!1},{onConflict:"user_id,goal_date",ignoreDuplicates:!1}).select().single();if(a){if("23505"===a.code)return console.log("\u2139\ufe0f Daily goal already exists: user=".concat(e,", date=").concat(n)),{id:"existing-goal",user_id:e,goal_date:n,lessons_goal:t,lessons_completed:0,goal_achieved:!1};throw console.error("Failed to set daily goal:",a.message),a}return r},async updateDailyProgress(e,t){const n=(new Date).toISOString().split("T")[0],{data:r,error:a}=await na.from("daily_goals").upsert({user_id:e,goal_date:n,lessons_completed:t},{onConflict:"user_id,goal_date",ignoreDuplicates:!1}).select().single();if(a){if("23505"===a.code)return console.log("\u2139\ufe0f Daily progress already exists: user=".concat(e,", date=").concat(n)),{id:"existing-progress",user_id:e,goal_date:n,lessons_completed:t,goal_achieved:!1};throw console.error("Failed to update daily progress:",a.message),a}return r}},Ea={auth:xa,user:wa,topics:Sa,progress:ka,chat:ja,quiz:_a,achievements:Ca,analytics:Na,goals:Ta,adaptive:{async getAdaptiveLesson(e,t,n){try{const{data:r,error:a}=await na.from("lessons").select("*").eq("id",e).single();if(a)throw a;let i=await this.getCachedAdaptation(e,n);i||(i=ia(r.content,n),await this.cacheAdaptation(e,n,i));const s=fa(n),o=await this.createTrackingRecord(t,e,n);return{lesson:I(I({},r),{},{adaptedContent:i}),adaptedContent:i,uiConfig:s,trackingId:o}}catch(r){throw console.error("Error getting adaptive lesson:",r),r}},async getCachedAdaptation(e,t){try{const{data:n,error:r}=await na.from("content_adaptations").select("adapted_content, effectiveness_score").eq("lesson_id",e).eq("user_speed",t).eq("adaptation_type","auto").order("effectiveness_score",{ascending:!1}).limit(1);return r||!n.length?null:n[0].adapted_content}catch(n){return console.warn("Failed to get cached adaptation:",n),null}},async cacheAdaptation(e,t,n){try{await na.from("content_adaptations").insert({lesson_id:e,user_speed:t,adapted_content:n,adaptation_type:"auto",effectiveness_score:0,usage_count:0})}catch(r){console.warn("Failed to cache adaptation:",r)}},async createTrackingRecord(e,t,n){try{const{data:r,error:a}=await na.from("user_content_interactions").insert({user_id:e,lesson_id:t,interaction_type:"view",interaction_data:{user_speed:n,timestamp:Date.now()},time_spent_seconds:0}).select("id").single();if(a)throw a;return r.id}catch(r){return console.warn("Failed to create tracking record:",r),"fallback_".concat(Date.now())}},async trackUserInteraction(e){try{await na.from("user_content_interactions").insert({user_id:e.userId,lesson_id:e.lessonId,adaptation_id:e.adaptationId,interaction_type:e.interactionType,interaction_data:e.interactionData,engagement_score:e.engagementScore,time_spent_seconds:e.timeSpentSeconds}),e.adaptationId&&e.engagementScore&&await this.updateAdaptationEffectiveness(e.adaptationId,e.engagementScore)}catch(t){console.error("Error tracking interaction:",t)}},async updateAdaptationEffectiveness(e,t){try{const{data:n}=await na.from("content_adaptations").select("effectiveness_score, usage_count").eq("id",e).single();if(!n)return;const r=n.effectiveness_score||0,a=n.usage_count||0,i=a+1,s=(r*a+t)/i;await na.from("content_adaptations").update({effectiveness_score:s,usage_count:i}).eq("id",e)}catch(n){console.warn("Failed to update adaptation effectiveness:",n)}},async getLessonsForSpeed(e,t){try{const n=await ba(e),{data:r,error:a}=await na.from("lessons").select("*").eq("topic_id",n).order("section_number");if(a)throw a;return await Promise.all(r.map(async e=>{const n=await this.getCachedAdaptation(e.id,t)||ia(e.content,t);return I(I({},e),{},{adaptedContent:n,uiConfig:fa(t)})}))}catch(n){throw console.error("Error getting lessons for speed:",n),n}},async suggestOptimalSpeed(e){try{const t=new Date(Date.now()-2592e6).toISOString(),{data:n,error:r}=await na.from("user_content_interactions").select("*, lessons!inner(learning_speed_target)").eq("user_id",e).gte("created_at",t).order("created_at",{ascending:!1});if(r)throw r;const a=this.analyzePerformanceBySpeed(n);return this.findOptimalSpeed(a)}catch(t){return console.error("Error suggesting optimal speed:",t),{suggestedSpeed:3,reason:"Default recommendation",confidence:.5}}},analyzePerformanceBySpeed(e){const t={};return e.forEach(e=>{var n;const r=(null===(n=e.interaction_data)||void 0===n?void 0:n.user_speed)||3;t[r]||(t[r]={totalInteractions:0,totalEngagement:0,totalTime:0,completions:0}),t[r].totalInteractions++,t[r].totalEngagement+=e.engagement_score||0,t[r].totalTime+=e.time_spent_seconds||0,"complete"===e.interaction_type&&t[r].completions++}),Object.keys(t).forEach(e=>{const n=t[Number(e)];n.avgEngagement=n.totalEngagement/n.totalInteractions,n.avgTime=n.totalTime/n.totalInteractions,n.completionRate=n.completions/n.totalInteractions}),t},findOptimalSpeed(e){let t=3,n=0,r="Balanced recommendation";Object.entries(e).forEach(e=>{let[a,i]=e;const s=.4*i.avgEngagement+.4*i.completionRate+.2*Math.min(i.avgTime/300,1);s>n&&(n=s,t=Number(a),r="Best performance at speed ".concat(a," (").concat((100*s).toFixed(1),"% effectiveness)"))});const a=Math.min(n,.95);return{suggestedSpeed:t,reason:r,confidence:a}}}},Pa=Ye("progress/loadUserProgress",async(e,t)=>{let{rejectWithValue:n}=t;try{return await ka.getUserProgress(e)}catch(r){return n(r.message||"Failed to load user progress")}}),Ia=Ye("progress/updateTopicProgress",async(e,t)=>{let{userId:n,topicId:r,progressData:a}=e,{rejectWithValue:i}=t;try{return await ka.updateProgress(n,r,a),a.completed&&await wa.logActivity(n,"lesson_complete",{topicId:r}),I({topicId:r},a)}catch(s){return i(s.message||"Failed to update topic progress")}}),Aa=Ye("progress/updateLessonProgress",async(e,t)=>{let{userId:n,lessonId:r,progressData:a}=e,{rejectWithValue:i}=t;try{return await ka.updateLessonProgress(n,r,a),await wa.logActivity(n,"lesson_complete",{lessonId:r,progress:a.progress_percentage}),I({lessonId:r},a)}catch(s){return i(s.message||"Failed to update lesson progress")}}),La=Ye("progress/loadDailyGoal",async(e,t)=>{let{rejectWithValue:n}=t;try{return await Ta.getTodaysGoal(e)}catch(r){return n(r.message||"Failed to load daily goal")}}),Oa=Ye("progress/updateDailyGoal",async(e,t)=>{let{userId:n,lessonsGoal:r}=e,{rejectWithValue:a}=t;try{return await Ta.setDailyGoal(n,r),r}catch(i){return a(i.message||"Failed to update daily goal")}}),Ra=Ye("progress/updateDailyProgress",async(e,t)=>{let{userId:n,completedLessons:r}=e,{rejectWithValue:a}=t;try{return await Ta.updateDailyProgress(n,r),r}catch(i){return a(i.message||"Failed to update daily progress")}}),Da=Ye("progress/loadLearningStats",async(e,t)=>{let{rejectWithValue:n}=t;try{return await Na.getLearningStats(e)}catch(r){return n(r.message||"Failed to load learning stats")}}),Ma=Ye("progress/completeTopicStory",async(e,t)=>{let{userId:n,topicId:r,timeSpent:a}=e,{rejectWithValue:i}=t;try{return await ka.completeTopicStory(n,r,a),await wa.logActivity(n,"lesson_complete",{topicId:r,timeSpent:a}),{topicId:r,timeSpent:a}}catch(s){return i(s.message||"Failed to complete topic story")}}),za=rt({name:"progress",initialState:{currentLesson:null,lessons:[{id:"gravity",title:"What is Gravity?",completed:!1,progress:0},{id:"solar-system",title:"Our Solar System",completed:!1,progress:0},{id:"water-cycle",title:"The Water Cycle",completed:!1,progress:0},{id:"plants",title:"How Plants Grow",completed:!1,progress:0}],userProgress:[],dailyGoal:4,dailyProgress:0,totalScore:0,streak:0,isLoading:!1,error:null,learningStats:null},reducers:{setCurrentLesson:(e,t)=>{e.currentLesson=t.payload},updateLessonProgressLocal:(e,t)=>{const n=e.lessons.find(e=>e.id===t.payload.lessonId);n&&(n.progress=t.payload.progress,t.payload.progress>=100&&(n.completed=!0,e.dailyProgress+=1,e.totalScore+=10))},incrementStreak:e=>{e.streak+=1},resetDailyProgress:e=>{e.dailyProgress=0},clearError:e=>{e.error=null},setUserProgress:(e,t)=>{e.userProgress=t.payload,e.totalScore=t.payload.reduce((e,t)=>e+(t.completed?100:t.progress_percentage),0),e.dailyProgress=t.payload.filter(e=>{const t=(new Date).toDateString();return new Date(e.last_accessed_at).toDateString()===t&&e.progress_percentage>0}).length}},extraReducers:e=>{e.addCase(Pa.pending,e=>{e.isLoading=!0,e.error=null}).addCase(Pa.fulfilled,(e,t)=>{e.isLoading=!1,e.userProgress=t.payload,e.totalScore=t.payload.reduce((e,t)=>e+(t.completed?100:t.progress_percentage),0),e.dailyProgress=t.payload.filter(e=>{const t=(new Date).toDateString();return new Date(e.last_accessed_at).toDateString()===t&&e.progress_percentage>0}).length}).addCase(Pa.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload}),e.addCase(Ia.fulfilled,(e,t)=>{const{topicId:n}=t.payload,r=e.userProgress.find(e=>e.topic_id===n);r&&(r.progress_percentage=t.payload.progress_percentage,r.completed=t.payload.completed||!1,t.payload.time_spent_seconds&&(r.time_spent_seconds+=t.payload.time_spent_seconds),r.last_accessed_at=(new Date).toISOString())}),e.addCase(Aa.fulfilled,(e,t)=>{const{lessonId:n}=t.payload,r=e.lessons.find(e=>e.id===n);r&&(r.progress=t.payload.progress_percentage||r.progress,r.completed=t.payload.completed||r.completed)}),e.addCase(La.fulfilled,(e,t)=>{t.payload&&(e.dailyGoal=t.payload.lessons_goal||4,e.dailyProgress=t.payload.completed_lessons||0)}),e.addCase(Oa.fulfilled,(e,t)=>{e.dailyGoal=t.payload}),e.addCase(Ra.fulfilled,(e,t)=>{e.dailyProgress=t.payload}),e.addCase(Da.fulfilled,(e,t)=>{e.learningStats=t.payload}),e.addCase(Ma.fulfilled,(e,t)=>{const{topicId:n}=t.payload,r=e.userProgress.find(e=>e.topic_id===n);r&&(r.completed=!0,r.progress_percentage=100,r.completed_at=(new Date).toISOString(),t.payload.timeSpent&&(r.time_spent_seconds+=t.payload.timeSpent))}),e.addMatcher(e=>e.type.endsWith("/rejected")&&e.type.startsWith("progress/"),(e,t)=>{e.isLoading=!1,e.error=t.payload})}}),{setCurrentLesson:Fa,updateLessonProgressLocal:Ua,incrementStreak:Va,resetDailyProgress:qa,clearError:Ba,setUserProgress:Wa}=za.actions,Ha=za.reducer,Qa=Ye("quiz/loadQuizQuestions",async(e,t)=>{let{topicId:n,learningSpeed:r,limit:a=5}=e,{rejectWithValue:i}=t;try{const e=await _a.getQuizQuestions(n,r,a);return e.map(e=>({id:e.id,question:e.question_text,options:e.options,correctAnswer:e.correct_answer,explanation:e.explanation}))}catch(s){return i(s.message||"Failed to load quiz questions")}}),Ga=Ye("quiz/saveQuizAttempt",async(e,t)=>{let{userId:n,topicId:r,questionIds:a,userAnswers:i,score:s,totalQuestions:o,completed:l,timeSpent:c}=e,{rejectWithValue:u}=t;try{const e=await _a.saveQuizAttempt(n,{topic_id:r,question_ids:a,user_answers:i,score:s,total_questions:o,completed:l,time_spent_seconds:c});return await wa.logActivity(n,"quiz_complete",{topicId:r,score:s,totalQuestions:o,percentage:Math.round(s/o*100),timeSpent:c}),e}catch(d){return u(d.message||"Failed to save quiz attempt")}}),Ka=Ye("quiz/loadQuizHistory",async(e,t)=>{let{rejectWithValue:n}=t;try{return await _a.getQuizHistory(e)}catch(r){return n(r.message||"Failed to load quiz history")}}),Ja=Ye("quiz/loadBestScore",async(e,t)=>{let{userId:n,topicId:r}=e,{rejectWithValue:a}=t;try{return await _a.getBestScore(n,r)}catch(i){return a(i.message||"Failed to load best score")}}),$a=rt({name:"quiz",initialState:{currentQuiz:null,questions:[],currentQuestionIndex:0,answers:{},score:0,totalQuestions:0,isCompleted:!1,showResults:!1,isLoading:!1,isSaving:!1,error:null,quizHistory:[],bestScore:null,timeSpent:0,startTime:null},reducers:{answerQuestion:(e,t)=>{e.answers[t.payload.questionId]=t.payload.answer;const n=e.questions.find(e=>e.id===t.payload.questionId);n&&t.payload.answer===n.correctAnswer&&(e.score+=1)},nextQuestion:e=>{e.currentQuestionIndex<e.questions.length-1?e.currentQuestionIndex+=1:(e.isCompleted=!0,e.showResults=!0,e.startTime&&(e.timeSpent=Math.round((Date.now()-e.startTime)/1e3)))},previousQuestion:e=>{e.currentQuestionIndex>0&&(e.currentQuestionIndex-=1)},resetQuiz:e=>{e.currentQuestionIndex=0,e.answers={},e.score=0,e.isCompleted=!1,e.showResults=!1,e.timeSpent=0,e.startTime=null,e.error=null},setShowResults:(e,t)=>{e.showResults=t.payload},clearError:e=>{e.error=null},updateTimeSpent:e=>{e.startTime&&!e.isCompleted&&(e.timeSpent=Math.round((Date.now()-e.startTime)/1e3))}},extraReducers:e=>{e.addCase(Qa.pending,e=>{e.isLoading=!0,e.error=null}).addCase(Qa.fulfilled,(e,t)=>{e.isLoading=!1,e.questions=t.payload,e.totalQuestions=t.payload.length,e.startTime=Date.now()}).addCase(Qa.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload}),e.addCase(Ga.pending,e=>{e.isSaving=!0,e.error=null}).addCase(Ga.fulfilled,(e,t)=>{e.isSaving=!1,e.quizHistory.unshift(t.payload)}).addCase(Ga.rejected,(e,t)=>{e.isSaving=!1,e.error=t.payload}),e.addCase(Ka.fulfilled,(e,t)=>{e.quizHistory=t.payload}),e.addCase(Ja.fulfilled,(e,t)=>{t.payload&&(e.bestScore={score:t.payload.score,total:t.payload.total_questions})})}}),{answerQuestion:Ya,nextQuestion:Xa,previousQuestion:Za,resetQuiz:ei,setShowResults:ti,clearError:ni,updateTimeSpent:ri}=$a.actions,ai=$a.reducer;const ii=new class{async makeRequest(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;for(let r=1;r<=t;r++)try{console.log("\ud83e\udd16 Groq API attempt ".concat(r,"/").concat(t));const n=new AbortController,a=setTimeout(()=>n.abort(),3e4),i=await fetch("https://api.groq.com/openai/v1/chat/completions",{method:"POST",headers:{Authorization:"Bearer ".concat("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"),"Content-Type":"application/json"},body:JSON.stringify({messages:e,model:"llama-3.1-8b-instant",temperature:.7,max_tokens:800,top_p:1,stream:!1}),signal:n.signal});if(clearTimeout(a),!i.ok){const e=await i.text();throw 524===i.status||504===i.status?new Error("TIMEOUT: Gateway timeout (".concat(i.status,")")):429===i.status?new Error("RATE_LIMIT: Too many requests (".concat(i.status,")")):i.status>=500?new Error("SERVER_ERROR: Groq server error (".concat(i.status,")")):new Error("Groq API error: ".concat(i.status," - ").concat(e))}const s=await i.json();if(!s.choices||!s.choices[0]||!s.choices[0].message)throw new Error("Invalid response format from Groq API");return console.log("\u2705 Groq API request successful"),s.choices[0].message.content}catch(n){if(console.warn("\u274c Groq API attempt ".concat(r," failed:"),n.message),n.message.includes("Groq API error:")&&!n.message.includes("TIMEOUT")&&!n.message.includes("RATE_LIMIT")&&!n.message.includes("SERVER_ERROR"))throw n;if(r===t)throw console.error("\ud83d\udea8 All Groq API attempts failed"),n;const e=Math.min(1e3*Math.pow(2,r-1),1e4);console.log("\u23f3 Retrying in ".concat(e/1e3,"s...")),await new Promise(t=>setTimeout(t,e))}throw new Error("All retry attempts exhausted")}async generateLessonContent(e,t){let n="balanced with 2-3 sentences",r="encouraging",a=2;if(t){const{preferences:e}=t;switch(e.explanationDetail){case"comprehensive":n="detailed with 4-5 sentences and multiple examples",r="detailed and thorough",a=e.exampleCount;break;case"detailed":n="well-explained with 3-4 sentences and good examples",r="helpful and informative",a=e.exampleCount;break;case"basic":n="concise with 1-2 sentences and clear points",r="quick and encouraging",a=e.exampleCount}}const i='Create 4 lesson sections for Grade 5 about "'.concat(e.title,'".\n\nLEARNING PROFILE: ').concat(t?"".concat(t.name,", Speed ").concat(t.learningSpeed,"/5, Style: ").concat(n):"Default student","\n\nReturn JSON array with:\n- id: 1-4\n- title: engaging title  \n- content: ").concat(n,"\n- tip: ").concat(r,' tip from Simba\n- interactive: "tap-to-reveal"|"drag-to-learn"|"animation"|"celebration"\n- image: single emoji\n\nCover: ').concat(e.keyLearningPoints.slice(0,2).join(", ")).concat(null!==t&&void 0!==t&&t.name?". Address ".concat(t.name," in tips."):"");try{const e=(await this.makeRequest([{role:"system",content:"You are an expert elementary science educator who creates engaging, age-appropriate content for Grade 5 students. Always respond with valid JSON."},{role:"user",content:i}])).replace(/```json|```/g,"").trim();return JSON.parse(e)}catch(s){return console.error("Failed to generate lesson content:",s),this.getFallbackLessonContent(e,t)}}async generateQuizQuestions(e){const t="Create ".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,' Grade 5 quiz questions about "').concat(e.title,'".\n\nJSON format:\n- question: clear question\n- options: 4 answer choices  \n- correctAnswer: index 0-3\n- explanation: simple why explanation\n\nAge 10-11, engaging language. Focus: ').concat(e.keyLearningPoints.slice(0,2).join(", "));try{const e=(await this.makeRequest([{role:"system",content:"You are an expert elementary science educator creating Grade 5 quiz questions. Always respond with valid JSON."},{role:"user",content:t}])).replace(/```json|```/g,"").trim();return JSON.parse(e)}catch(n){return console.error("Failed to generate quiz questions:",n),this.getFallbackQuizQuestions(e)}}async generateChatResponse(e,t,n){const r='You are Simba, a friendly lion teaching Grade 5 students about "'.concat(e.title,'". Be enthusiastic, use simple language, lion expressions ("Roar-some!"), and relate to real-world examples. Keep responses 1-2 sentences.');try{const e=[{role:"system",content:r},...n,{role:"user",content:t}];return await this.makeRequest(e)}catch(a){return console.error("Failed to generate chat response:",a),"Roar! I'm having trouble thinking right now. Try asking me something else about science! \ud83e\udd81"}}getFallbackLessonContent(e,t){null===t||void 0===t||t.name,"comprehensive"===(null===t||void 0===t?void 0:t.preferences.explanationDetail)||null===t||void 0===t||t.preferences.explanationDetail;return[{id:1,title:"What is ".concat(e.title,"?"),content:"".concat(e.description," Let's explore this amazing topic together").concat(null!==t&&void 0!==t&&t.name?", ".concat(t.name):"","!"),tip:"Great question".concat(null!==t&&void 0!==t&&t.name?", ".concat(t.name):"","! Let's discover the basics first! \ud83e\udd81"),interactive:"tap-to-reveal",image:e.icon},{id:2,title:"How it Works",content:"This is a fascinating process that happens all around us in nature!",tip:"Science is everywhere - even in your backyard!",interactive:"drag-to-learn",image:"\ud83d\udd2c"},{id:3,title:"Real World Examples",content:"You can see examples of this concept in your daily life!",tip:"Look around - science is happening right now!",interactive:"animation",image:"\ud83c\udf1f"},{id:4,title:"Fun Facts",content:"Here are some amazing facts that will surprise you!",tip:"You've learned so much! Keep being curious! \ud83c\udf89",interactive:"celebration",image:"\ud83c\udf8a"}]}getFallbackQuizQuestions(e){return[{question:"What is the main focus of ".concat(e.title,"?"),options:[e.keyLearningPoints[0]||"Learning about science","Playing games","Reading books","Watching TV"],correctAnswer:0,explanation:"That's right! ".concat(e.title," focuses on ").concat(e.keyLearningPoints[0]||"understanding science concepts",".")},{question:"Why is it important to learn about science?",options:["It's boring","It helps us understand the world around us","It's too difficult","Only for adults"],correctAnswer:1,explanation:"Science helps us understand how everything works in our amazing world!"}]}},si=ii,oi=["How does gravity work?","Why do plants need sunlight?","What makes the sky blue?","How do birds fly?","Why does ice float on water?"],li={messages:[{id:"1",text:"Hi there! I'm Simba, your science buddy! \ud83e\udd81 What would you like to explore today?",sender:"simba",timestamp:Date.now()}],isTyping:!1,suggestedQuestions:oi,isLoading:!1,isSendingMessage:!1,error:null};function ci(e){return{id:e.id,text:e.message,sender:e.sender,timestamp:new Date(e.created_at).getTime(),topicId:e.topic_id||void 0}}const ui=Ye("chat/loadChatHistory",async(e,t)=>{let{userId:n,topicId:r}=e,{rejectWithValue:a}=t;try{return(await ja.getChatHistory(n,r)).map(ci)}catch(i){return a(i.message||"Failed to load chat history")}}),di=Ye("chat/sendMessage",async(e,t)=>{let{userId:n,message:r,topicId:a}=e,{rejectWithValue:i,getState:s}=t;try{const e=s(),t=e.chat.currentTopic;let i;if(await ja.sendMessage(n,r,"user",a,{messageLength:r.length,timestamp:Date.now()}),t){const n=e.chat.messages.slice(-5).map(e=>({role:"user"===e.sender?"user":"assistant",content:e.text}));i=await si.generateChatResponse(t,r,n)}else i=function(e){const t=e.toLowerCase();if(t.includes("hello")||t.includes("hi"))return"Roar! Hello there, young scientist! \ud83e\udd81 I'm excited to explore science with you today!";if(t.includes("help"))return"I'm here to help you learn about amazing science topics! Pick a topic to explore, or ask me any science question!";if(t.includes("thank"))return"You're very welcome! Keep that curiosity roaring! \ud83e\udd81\u2728";if(t.includes("gravity"))return"Gravity is like an invisible force that pulls everything toward Earth! It's what keeps us on the ground instead of floating away! \ud83c\udf0d";if(t.includes("plant"))return"Plants are amazing! They use sunlight, water, and air to make their own food through photosynthesis. They're like nature's solar panels! \ud83c\udf31\u2600\ufe0f";if(t.includes("space")||t.includes("planet"))return"Space is incredible! Our solar system has 8 amazing planets, each with unique features. Which planet would you like to visit? \ud83e\ude90\ud83d\ude80";return"That's a fantastic question! Science helps us understand our amazing world. Choose a topic to explore together and I'll give you detailed answers! \ud83e\udd81\ud83d\udd2c"}(r);return await ja.sendMessage(n,i,"simba",a,{generatedResponse:!0,originalQuery:r,responseLength:i.length,timestamp:Date.now()}),await wa.logActivity(n,"chat_message",{topicId:a,messageLength:r.length,responseLength:i.length}),{userMessage:{id:"user_".concat(Date.now()),text:r,sender:"user",timestamp:Date.now(),topicId:a},simbaResponse:{id:"simba_".concat(Date.now()),text:i,sender:"simba",timestamp:Date.now()+1e3,topicId:a}}}catch(o){return i(o.message||"Failed to send message")}}),hi=Ye("chat/clearChatHistory",async(e,t)=>{let{userId:n,topicId:r}=e,{rejectWithValue:a}=t;try{return await ja.clearChatHistory(n,r),await wa.logActivity(n,"chat_message",{topicId:r,action:"cleared"}),r}catch(i){return a(i.message||"Failed to clear chat history")}});const pi=rt({name:"chat",initialState:li,reducers:{addUserMessage:(e,t)=>{const n={id:Date.now().toString(),text:t.payload,sender:"user",timestamp:Date.now()};e.messages.push(n)},setTyping:(e,t)=>{e.isTyping=t.payload},setCurrentTopic:(e,t)=>{e.currentTopic=t.payload,t.payload?e.suggestedQuestions=["Tell me about ".concat(t.payload.title),"What's the most interesting thing about ".concat(t.payload.title.toLowerCase(),"?"),"How does ".concat(t.payload.title.toLowerCase()," work?"),"Can you give me an example of ".concat(t.payload.title.toLowerCase(),"?"),"Why is this important to learn about?"]:e.suggestedQuestions=oi},clearError:e=>{e.error=null},addLocalMessage:(e,t)=>{e.messages.push(t.payload)},resetChat:e=>{e.messages=[li.messages[0]],e.isTyping=!1,e.error=null}},extraReducers:e=>{e.addCase(ui.pending,e=>{e.isLoading=!0,e.error=null}).addCase(ui.fulfilled,(e,t)=>{e.isLoading=!1,t.payload.length>0&&(e.messages=t.payload)}).addCase(ui.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload}),e.addCase(di.pending,e=>{e.isSendingMessage=!0,e.isTyping=!0,e.error=null}).addCase(di.fulfilled,(e,t)=>{e.isSendingMessage=!1,e.isTyping=!1,e.messages.push(t.payload.userMessage),e.messages.push(t.payload.simbaResponse)}).addCase(di.rejected,(e,t)=>{e.isSendingMessage=!1,e.isTyping=!1,e.error=t.payload;const n={id:"error_".concat(Date.now()),text:"Roar! I'm having trouble thinking right now. Try asking me something else about science! \ud83e\udd81",sender:"simba",timestamp:Date.now()};e.messages.push(n)}),e.addCase(hi.fulfilled,e=>{e.messages=[li.messages[0]]}).addCase(hi.rejected,(e,t)=>{e.error=t.payload})}}),{addUserMessage:fi,setTyping:mi,setCurrentTopic:gi,clearError:yi,addLocalMessage:vi,resetChat:bi}=pi.actions,xi=pi.reducer;function wi(e,t){return e.map(e=>{const n=t.find(t=>t.achievement_id===e.id);return{id:e.id,title:e.title,description:e.description,icon:e.icon,unlocked:(null===n||void 0===n?void 0:n.unlocked)||!1,unlockedAt:null!==n&&void 0!==n&&n.unlocked_at?new Date(n.unlocked_at).getTime():void 0,progress:(null===n||void 0===n?void 0:n.current_progress)||0,maxProgress:e.max_progress,category:e.category,achievementKey:e.achievement_key}})}const Si=Ye("achievements/loadAllAchievements",async(e,t)=>{let{rejectWithValue:n}=t;try{return await Ca.getAllAchievements()}catch(r){return n(r.message||"Failed to load achievements")}}),ki=Ye("achievements/loadUserAchievements",async(e,t)=>{let{rejectWithValue:n}=t;try{return await Ca.getUserAchievements(e)}catch(r){return n(r.message||"Failed to load user achievements")}}),ji=Ye("achievements/initializeAchievements",async(e,t)=>{let{dispatch:n,rejectWithValue:r}=t;try{const[t,r]=await Promise.all([n(Si()).unwrap(),n(ki(e)).unwrap()]);return{allAchievements:t,userAchievements:r,mergedAchievements:wi(t,r)}}catch(a){return r(a.message||"Failed to initialize achievements")}}),_i=Ye("achievements/updateAchievementProgress",async(e,t)=>{let{userId:n,achievementKey:r,progress:a}=e,{getState:i,rejectWithValue:s}=t;try{const e=await Ca.getAchievementByKey(r);if(!e)throw new Error("Achievement not found: ".concat(r));const t=a>=e.max_progress;await Ca.updateAchievementProgress(n,e.id,a,t);return await wa.logActivity(n,"achievement_unlock",{achievementId:e.id,achievementKey:r,progress:a}),{achievementId:e.id,achievementKey:r,progress:a,unlocked:t,unlockedAt:t?Date.now():void 0}}catch(o){return s(o.message||"Failed to update achievement progress")}}),Ci=Ye("achievements/unlockAchievement",async(e,t)=>{let{userId:n,achievementKey:r}=e,{rejectWithValue:a}=t;try{const e=await Ca.getAchievementByKey(r);if(!e)throw new Error("Achievement not found: ".concat(r));await Ca.updateAchievementProgress(n,e.id,e.max_progress,!0);return await wa.logActivity(n,"achievement_unlock",{achievementId:e.id,achievementKey:r}),{achievementId:e.id,achievementKey:r,progress:e.max_progress,unlocked:!0,unlockedAt:Date.now()}}catch(i){return a(i.message||"Failed to unlock achievement")}}),Ni=(Ye("achievements/incrementAchievementProgress",async(e,t)=>{let{userId:n,achievementKey:r,incrementBy:a=1}=e,{getState:i,dispatch:s}=t;const o=i().achievements.achievements.find(e=>e.achievementKey===r);if(!o)return null;const l=Math.min(o.progress+a,o.maxProgress);return s(_i({userId:n,achievementKey:r,progress:l}))}),rt({name:"achievements",initialState:{achievements:[],allAchievements:[],userAchievements:[],totalUnlocked:0,recentlyUnlocked:[],isLoading:!1,error:null},reducers:{clearRecentlyUnlocked:e=>{e.recentlyUnlocked=[]},clearError:e=>{e.error=null},updateLocalProgress:(e,t)=>{const n=e.achievements.find(e=>e.id===t.payload.achievementId);n&&!n.unlocked&&(n.progress=Math.min(t.payload.progress,n.maxProgress),n.progress>=n.maxProgress&&(n.unlocked=!0,n.unlockedAt=Date.now(),e.totalUnlocked+=1,e.recentlyUnlocked.push(n.id)))}},extraReducers:e=>{e.addCase(Si.pending,e=>{e.isLoading=!0,e.error=null}).addCase(Si.fulfilled,(e,t)=>{e.isLoading=!1,e.allAchievements=t.payload}).addCase(Si.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload}),e.addCase(ki.fulfilled,(e,t)=>{e.userAchievements=t.payload,e.totalUnlocked=t.payload.filter(e=>e.unlocked).length}),e.addCase(ji.pending,e=>{e.isLoading=!0,e.error=null}).addCase(ji.fulfilled,(e,t)=>{e.isLoading=!1,e.allAchievements=t.payload.allAchievements,e.userAchievements=t.payload.userAchievements,e.achievements=t.payload.mergedAchievements,e.totalUnlocked=t.payload.userAchievements.filter(e=>e.unlocked).length,e.error=null}).addCase(ji.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload}),e.addCase(_i.fulfilled,(e,t)=>{const{achievementId:n,progress:r,unlocked:a,unlockedAt:i}=t.payload,s=e.achievements.find(e=>e.id===n);s&&(s.progress=r,a&&!s.unlocked&&(s.unlocked=!0,s.unlockedAt=i,e.totalUnlocked+=1,e.recentlyUnlocked.push(n)));const o=e.userAchievements.find(e=>e.achievement_id===n);o&&(o.current_progress=r,a&&(o.unlocked=!0,o.unlocked_at=(new Date).toISOString()))}),e.addCase(Ci.fulfilled,(e,t)=>{const{achievementId:n,progress:r,unlockedAt:a}=t.payload,i=e.achievements.find(e=>e.id===n);i&&!i.unlocked&&(i.progress=r,i.unlocked=!0,i.unlockedAt=a,e.totalUnlocked+=1,e.recentlyUnlocked.push(n));const s=e.userAchievements.find(e=>e.achievement_id===n);s&&(s.current_progress=r,s.unlocked=!0,s.unlocked_at=(new Date).toISOString())}),e.addMatcher(e=>e.type.endsWith("/rejected")&&e.type.startsWith("achievements/"),(e,t)=>{e.isLoading=!1,e.error=t.payload})}})),{clearRecentlyUnlocked:Ti,clearError:Ei,updateLocalProgress:Pi}=Ni.actions,Ii=Ni.reducer;const Ai=Ye("topics/fetchTopics",async(e,t)=>{let{rejectWithValue:n}=t;try{return await Sa.getAllTopics()}catch(r){return n(r.message||"Failed to fetch topics")}}),Li=Ye("topics/fetchTopicBySlug",async(e,t)=>{let{rejectWithValue:n}=t;try{const t=await Sa.getTopicBySlug(e);if(!t)throw new Error("Topic not found");return{id:(r=t).id,title:r.title,description:r.description,icon:r.icon,color:r.color,backgroundTheme:r.background_theme,difficulty:r.difficulty,estimatedTime:r.estimated_time_minutes,keyLearningPoints:r.key_learning_points}}catch(a){return n(a.message||"Failed to fetch topic")}var r}),Oi=Ye("topics/generateLessonContent",async(e,t)=>{let{rejectWithValue:n,getState:r}=t;try{const t=r().user.currentUser;if(!t)throw new Error("User profile not found");const n=t.learningSpeed.toString();try{console.log("\ud83d\udd0d Checking for existing lessons: topic=".concat(e.id,", speed=").concat(n));const t=await Sa.getLessons(e.id,n);if(t.length>0){console.log("\u2705 Found ".concat(t.length," existing lessons, using cached content"));return t.map((e,t)=>({id:t+1,title:e.title,content:e.content,tip:e.tip,interactive:e.interactive_type,image:e.image}))}console.log("\ud83d\udcdd No existing lessons found, will generate new content")}catch(a){console.warn("\u26a0\ufe0f Failed to load saved lessons, generating new content:",a)}const s=await si.generateLessonContent(e,t);if(t.id&&s.length>0)try{console.log("\ud83d\udcbe Saving ".concat(s.length," lessons for topic ").concat(e.id,", speed ").concat(n));for(const t of s)await Sa.saveLesson({topic_id:e.id,section_number:t.id,title:t.title,content:t.content,tip:t.tip,interactive_type:t.interactive,image:t.image,learning_speed_target:n});console.log("\u2705 Lessons saved successfully to database")}catch(i){console.warn("\u26a0\ufe0f Failed to save lessons to database:",i.message)}return s}catch(s){return n(s.message||"Failed to generate lesson content")}}),Ri=Ye("topics/generateQuizQuestions",async(e,t)=>{let{rejectWithValue:n,getState:r}=t;try{const t=r().user.currentUser;if(!t)throw new Error("User profile not found");const n=await _a.getQuizQuestions(e.id,t.learningSpeed.toString(),5);if(n.length>0){return n.map(e=>({id:e.id,question:e.question_text,options:e.options,correctAnswer:e.correct_answer,explanation:e.explanation}))}return await si.generateQuizQuestions(e,5)}catch(a){return n(a.message||"Failed to generate quiz questions")}}),Di=Ye("topics/startTopicLearning",async(e,t)=>{let{topicId:n,userId:r}=e,{rejectWithValue:a}=t;try{return await ka.updateProgress(r,n,{progress_percentage:0,completed:!1,time_spent_seconds:0}),{topicId:n,userId:r}}catch(i){return a(i.message||"Failed to start topic learning")}}),Mi=rt({name:"topics",initialState:{topics:[],currentTopic:null,lessonContent:[],quizQuestions:[],isGeneratingContent:!1,isGeneratingQuiz:!1,isLoadingTopics:!1,contentError:null,quizError:null,topicsError:null},reducers:{setCurrentTopic:(e,t)=>{e.currentTopic=t.payload,e.lessonContent=[],e.quizQuestions=[],e.contentError=null,e.quizError=null,e.isGeneratingContent=!1,e.isGeneratingQuiz=!1},clearCurrentTopic:e=>{e.currentTopic=null,e.lessonContent=[],e.quizQuestions=[],e.contentError=null,e.quizError=null},clearErrors:e=>{e.contentError=null,e.quizError=null,e.topicsError=null},addLessonContent:(e,t)=>{e.lessonContent=t.payload}},extraReducers:e=>{e.addCase(Ai.pending,e=>{e.isLoadingTopics=!0,e.topicsError=null}).addCase(Ai.fulfilled,(e,t)=>{e.isLoadingTopics=!1,e.topics=t.payload}).addCase(Ai.rejected,(e,t)=>{e.isLoadingTopics=!1,e.topicsError=t.payload}),e.addCase(Li.fulfilled,(e,t)=>{e.currentTopic=t.payload}).addCase(Li.rejected,(e,t)=>{e.topicsError=t.payload}),e.addCase(Oi.pending,e=>{e.isGeneratingContent=!0,e.contentError=null}).addCase(Oi.fulfilled,(e,t)=>{e.isGeneratingContent=!1,e.lessonContent=t.payload}).addCase(Oi.rejected,(e,t)=>{e.isGeneratingContent=!1,e.contentError=t.payload}),e.addCase(Ri.pending,e=>{e.isGeneratingQuiz=!0,e.quizError=null}).addCase(Ri.fulfilled,(e,t)=>{e.isGeneratingQuiz=!1,e.quizQuestions=t.payload}).addCase(Ri.rejected,(e,t)=>{e.isGeneratingQuiz=!1,e.quizError=t.payload}),e.addCase(Di.fulfilled,e=>{}).addCase(Di.rejected,(e,t)=>{e.topicsError=t.payload})}}),{setCurrentTopic:zi,clearCurrentTopic:Fi,clearErrors:Ui,addLessonContent:Vi}=Mi.actions,qi=Mi.reducer;function Bi(e){return{id:e.id,name:e.name,learningSpeed:parseInt(e.learning_speed),avatar:e.avatar,joinedAt:new Date(e.created_at).getTime(),lastActiveAt:new Date(e.last_active_at).getTime(),preferences:{explanationDetail:e.preferences.explanationDetail,exampleCount:e.preferences.exampleCount,repeatCount:e.preferences.repeatCount},email:e.email,currentStreak:e.current_streak,totalScore:e.total_score,speedAdaptationData:e.speed_adaptation_data?{autoAdjust:e.speed_adaptation_data.auto_adjust||!0,preferredModes:e.speed_adaptation_data.preferred_modes||["visual"],adaptationHistory:(e.speed_adaptation_data.adaptation_history||[]).map(e=>({oldSpeed:e.old_speed,newSpeed:e.new_speed,reason:e.reason,timestamp:e.timestamp})),performanceBySpeed:Object.entries(e.speed_adaptation_data.performance_by_speed||{}).reduce((e,t)=>{let[n,r]=t;return e[parseInt(n)]={totalLessons:r.total_lessons,completedLessons:r.completed_lessons,avgEngagement:r.avg_engagement,avgCompletionTime:r.avg_completion_time},e},{}),lastSpeedChange:e.speed_adaptation_data.last_speed_change||null,totalAdaptations:e.speed_adaptation_data.total_adaptations||0}:{autoAdjust:!0,preferredModes:["visual"],adaptationHistory:[],performanceBySpeed:{},lastSpeedChange:null,totalAdaptations:0}}}const Wi=Ye("user/signUpUser",async(e,t)=>{let{email:n,password:r,name:a,learningSpeed:i}=e,{getState:s,rejectWithValue:o}=t;try{const e=s().user.learningProfiles[i],{user:t}=await xa.signUp(n,r,{name:a,learning_speed:i.toString(),avatar:Zi(i)});if(!t)throw new Error("Failed to create user");let o;console.log("\u2705 Auth user created successfully:",t.id);try{o=await wa.createProfile(t.id,{email:n,name:a,learning_speed:i.toString(),avatar:Zi(i),preferences:{explanationDetail:e.detail,exampleCount:e.examples,repeatCount:e.repeats}})}catch(c){var l;if(!(null!==(l=c.message)&&void 0!==l&&l.includes("duplicate")||"23505"===c.code))throw c;if(o=await wa.getProfile(t.id),!o)throw new Error("Failed to create or retrieve user profile")}return{authUser:t,profile:Bi(o)}}catch(u){return console.error("Signup error:",u),o(u.message||"Failed to sign up")}}),Hi=Ye("user/signInUser",async(e,t)=>{let{email:n,password:r}=e,{rejectWithValue:a}=t;try{const{user:e,session:t}=await xa.signIn(n,r);if(!e||!t)throw new Error("Failed to sign in");console.log("Sign in successful, session established:",!!t),await new Promise(e=>setTimeout(e,500));const{data:{session:a}}=await na.auth.getSession();let c;console.log("Session available for REST calls:",!!a),a||(console.warn("Session not available after sign in, waiting longer..."),await new Promise(e=>setTimeout(e,1e3)));let u=3;for(;u>0;)try{c=await wa.getProfile(e.id),console.log("Profile fetch successful");break}catch(l){var i,s,o;if(u--,console.log("Profile fetch attempt failed:",l.message),(null!==(i=l.message)&&void 0!==i&&i.includes("406")||null!==(s=l.message)&&void 0!==s&&s.includes("Unauthorized")||null!==(o=l.message)&&void 0!==o&&o.includes("session"))&&u>0){console.log("Profile fetch failed, retrying... (".concat(u," attempts left)")),await new Promise(e=>setTimeout(e,500));continue}throw l}if(!c)throw new Error("User profile not found");return{authUser:e,profile:Bi(c)}}catch(l){return console.error("Sign in error:",l),a(l.message||"Failed to sign in")}}),Qi=Ye("user/signOutUser",async(e,t)=>{let{rejectWithValue:n}=t;try{return await xa.signOut(),null}catch(r){return n(r.message||"Failed to sign out")}}),Gi=Ye("user/loadCurrentUser",async(e,t)=>{let{rejectWithValue:n}=t;try{const e=await xa.getCurrentUser();if(!e)return null;let t,n=3;for(;n>0;)try{t=await wa.getProfile(e.id);break}catch(i){var r,a;if(n--,(null!==(r=i.message)&&void 0!==r&&r.includes("406")||null!==(a=i.message)&&void 0!==a&&a.includes("Unauthorized"))&&n>0){console.log("Profile fetch failed, retrying... (".concat(n," attempts left)")),await new Promise(e=>setTimeout(e,200));continue}throw i}if(!t)return null;try{await wa.updateLastActive(e.id)}catch(i){console.warn("Failed to update last active time:",i)}return{authUser:e,profile:Bi(t)}}catch(i){return console.error("Load user error:",i),n(i.message||"Failed to load user")}}),Ki=Ye("user/createUserProfile",async(e,t)=>{let{name:n,learningSpeed:r}=e,{getState:a,rejectWithValue:i}=t;try{const e=a(),t=e.user.authUser;if(!t)throw new Error("No authenticated user");const i=e.user.learningProfiles[r];return Bi(await wa.createProfile(t.id,{email:t.email||"",name:n,learning_speed:r.toString(),avatar:Zi(r),preferences:{explanationDetail:i.detail,exampleCount:i.examples,repeatCount:i.repeats}}))}catch(s){return i(s.message||"Failed to create profile")}}),Ji=Ye("user/updateUserProfile",async(e,t)=>{let{getState:n,rejectWithValue:r}=t;try{const t=n().user.currentUser;if(!t)throw new Error("No current user");return Bi(await wa.updateProfile(t.id,e))}catch(a){return r(a.message||"Failed to update profile")}}),$i=Ye("user/updateUserActivity",async(e,t)=>{let{getState:n,rejectWithValue:r}=t;try{const e=n().user.currentUser;return e?(await wa.updateLastActive(e.id),Date.now()):null}catch(a){return r(a.message||"Failed to update activity")}}),Yi=(Ye("user/updateUserSpeed",async(e,t)=>{let{newSpeed:n,reason:r}=e,{getState:a,rejectWithValue:i}=t;try{var s,o,l,c,u;const e=a().user.currentUser;if(!e)throw new Error("No current user");const t=e.learningSpeed,i=(null===(s=e.speedAdaptationData)||void 0===s?void 0:s.adaptationHistory)||[],d={auto_adjust:(null===(o=e.speedAdaptationData)||void 0===o?void 0:o.autoAdjust)||!0,preferred_modes:(null===(l=e.speedAdaptationData)||void 0===l?void 0:l.preferredModes)||["visual"],adaptation_history:[...i.map(e=>({old_speed:e.oldSpeed,new_speed:e.newSpeed,reason:e.reason,timestamp:e.timestamp})),{old_speed:t,new_speed:n,reason:r,timestamp:Date.now()}],performance_by_speed:Object.entries((null===(c=e.speedAdaptationData)||void 0===c?void 0:c.performanceBySpeed)||{}).reduce((e,t)=>{let[n,r]=t;return e[parseInt(n)]={total_lessons:r.totalLessons,completed_lessons:r.completedLessons,avg_engagement:r.avgEngagement,avg_completion_time:r.avgCompletionTime},e},{}),last_speed_change:Date.now(),total_adaptations:((null===(u=e.speedAdaptationData)||void 0===u?void 0:u.totalAdaptations)||0)+1},h={learning_speed:n.toString(),speed_adaptation_data:d};return Bi(await wa.updateProfile(e.id,h))}catch(d){return i(d.message||"Failed to update learning speed")}}),Ye("user/updateSpeedPerformance",async(e,t)=>{let{speed:n,lessonCompleted:r,engagementScore:a,completionTime:i}=e,{getState:s,rejectWithValue:o}=t;try{var l,c,u,d,h,p,f;const e=s().user.currentUser;if(!e)throw new Error("No current user");const t=(null===(l=e.speedAdaptationData)||void 0===l?void 0:l.performanceBySpeed[n])||{totalLessons:0,completedLessons:0,avgEngagement:0,avgCompletionTime:0},o=t.totalLessons+1,m=t.completedLessons+(r?1:0),g=(t.avgEngagement*t.totalLessons+a)/o,y=(t.avgCompletionTime*t.totalLessons+i)/o,v={speed_adaptation_data:{auto_adjust:(null===(c=e.speedAdaptationData)||void 0===c?void 0:c.autoAdjust)||!0,preferred_modes:(null===(u=e.speedAdaptationData)||void 0===u?void 0:u.preferredModes)||["visual"],adaptation_history:((null===(d=e.speedAdaptationData)||void 0===d?void 0:d.adaptationHistory)||[]).map(e=>({old_speed:e.oldSpeed,new_speed:e.newSpeed,reason:e.reason,timestamp:e.timestamp})),performance_by_speed:I(I({},Object.entries((null===(h=e.speedAdaptationData)||void 0===h?void 0:h.performanceBySpeed)||{}).reduce((e,t)=>{let[r,a]=t;return parseInt(r)!==n&&(e[parseInt(r)]={total_lessons:a.totalLessons,completed_lessons:a.completedLessons,avg_engagement:a.avgEngagement,avg_completion_time:a.avgCompletionTime}),e},{})),{},{[n]:{total_lessons:o,completed_lessons:m,avg_engagement:g,avg_completion_time:y}}),last_speed_change:(null===(p=e.speedAdaptationData)||void 0===p?void 0:p.lastSpeedChange)||null,total_adaptations:(null===(f=e.speedAdaptationData)||void 0===f?void 0:f.totalAdaptations)||0}};return Bi(await wa.updateProfile(e.id,v))}catch(m){return o(m.message||"Failed to update speed performance")}})),Xi=rt({name:"user",initialState:{currentUser:null,authUser:null,isOnboarded:!1,showOnboarding:!0,isLoading:!1,isAuthenticated:!1,error:null,learningProfiles:{1:{name:"Careful Explorer",detail:"comprehensive",examples:3,repeats:2},2:{name:"Steady Learner",detail:"detailed",examples:2,repeats:2},3:{name:"Balanced Student",detail:"detailed",examples:2,repeats:1},4:{name:"Quick Thinker",detail:"basic",examples:1,repeats:1},5:{name:"Lightning Fast",detail:"basic",examples:1,repeats:0}}},reducers:{setAuthUser:(e,t)=>{e.authUser=t.payload,e.isAuthenticated=!!t.payload},hideOnboarding:e=>{e.showOnboarding=!1,localStorage.setItem("scifly_onboarded","true")},clearError:e=>{e.error=null},createLocalUser:(e,t)=>{const n="user_".concat(Date.now()),r=e.learningProfiles[t.payload.learningSpeed],a={id:n,name:t.payload.name,learningSpeed:t.payload.learningSpeed,avatar:Zi(t.payload.learningSpeed),joinedAt:Date.now(),lastActiveAt:Date.now(),preferences:{explanationDetail:r.detail,exampleCount:r.examples,repeatCount:r.repeats}};e.currentUser=a,e.isOnboarded=!0,e.showOnboarding=!1,localStorage.setItem("scifly_user",JSON.stringify(a)),localStorage.setItem("scifly_onboarded","true")},loadLocalUser:e=>{const t=localStorage.getItem("scifly_user"),n=localStorage.getItem("scifly_onboarded");t&&(e.currentUser=JSON.parse(t),e.isOnboarded=!!n,e.showOnboarding=!n)},resetUser:e=>{e.currentUser=null,e.authUser=null,e.isOnboarded=!1,e.showOnboarding=!0,e.isAuthenticated=!1,e.error=null,localStorage.removeItem("scifly_user"),localStorage.removeItem("scifly_onboarded")}},extraReducers:e=>{e.addCase(Wi.pending,e=>{e.isLoading=!0,e.error=null}).addCase(Wi.fulfilled,(e,t)=>{e.isLoading=!1,e.authUser=t.payload.authUser,e.currentUser=t.payload.profile,e.isAuthenticated=!0,e.isOnboarded=!1,e.showOnboarding=!0}).addCase(Wi.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload}),e.addCase(Hi.pending,e=>{e.isLoading=!0,e.error=null}).addCase(Hi.fulfilled,(e,t)=>{e.isLoading=!1,e.authUser=t.payload.authUser,e.currentUser=t.payload.profile,e.isAuthenticated=!0,e.isOnboarded=!0,e.showOnboarding=!1}).addCase(Hi.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload}),e.addCase(Qi.fulfilled,e=>{e.currentUser=null,e.authUser=null,e.isAuthenticated=!1,e.isOnboarded=!1,e.showOnboarding=!0,e.error=null}),e.addCase(Gi.pending,e=>{e.isLoading=!0}).addCase(Gi.fulfilled,(e,t)=>{if(e.isLoading=!1,t.payload)e.authUser=t.payload.authUser,e.currentUser=t.payload.profile,e.isAuthenticated=!0,e.isOnboarded=!0,e.showOnboarding=!1;else{const t=localStorage.getItem("scifly_user"),n=localStorage.getItem("scifly_onboarded");t?(e.currentUser=JSON.parse(t),e.isOnboarded=!!n,e.showOnboarding=!n,e.isAuthenticated=!1):(e.isAuthenticated=!1,e.showOnboarding=!0)}}).addCase(Gi.rejected,e=>{e.isLoading=!1,e.isAuthenticated=!1;const t=localStorage.getItem("scifly_user"),n=localStorage.getItem("scifly_onboarded");t&&(e.currentUser=JSON.parse(t),e.isOnboarded=!!n,e.showOnboarding=!n)}),e.addCase(Ki.pending,e=>{e.isLoading=!0,e.error=null}).addCase(Ki.fulfilled,(e,t)=>{e.isLoading=!1,e.currentUser=t.payload,e.isOnboarded=!0,e.showOnboarding=!1}).addCase(Ki.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload}),e.addCase(Ji.fulfilled,(e,t)=>{e.currentUser=t.payload}),e.addCase($i.fulfilled,(e,t)=>{e.currentUser&&t.payload&&(e.currentUser.lastActiveAt=t.payload)})}});function Zi(e){return{1:"\ud83d\udc22",2:"\ud83d\udc28",3:"\ud83e\udd81",4:"\ud83d\udc0e",5:"\ud83d\ude80"}[e]||"\ud83e\udd81"}const{setAuthUser:es,hideOnboarding:ts,clearError:ns,createLocalUser:rs,loadLocalUser:as,resetUser:is}=Xi.actions,ss=Xi.reducer,os=Ye("adaptive/loadAdaptiveLesson",async(e,t)=>{let{getState:n,rejectWithValue:r}=t;try{const t=n(),r="".concat(e.lessonId,"-").concat(e.userSpeed),a=t.adaptive.cachedContent[r],i=!a||Date.now()-a.cachedAt>36e5;if(a&&!i)return console.log("\ud83c\udfaf Using cached adaptive content for",r),I(I({},a),{},{fromCache:!0});console.log("\ud83d\udce1 Fetching adaptive lesson content for",r);const s=await(async e=>await Ea.adaptive.getAdaptiveLesson(e.lessonId,e.userId,e.userSpeed))(e);return{lessonId:e.lessonId,userSpeed:e.userSpeed,adaptedContent:s.adaptedContent,uiConfig:s.uiConfig,trackingId:s.trackingId,cachedAt:Date.now(),fromCache:!1}}catch(a){return r(a.message||"Failed to load adaptive lesson")}}),ls=Ye("adaptive/trackInteraction",async(e,t)=>{let{getState:n,rejectWithValue:r}=t;try{return n().adaptive.trackingEnabled?(await(async e=>{await Ea.adaptive.trackUserInteraction(e)})(e),{tracked:!0,interaction:e}):{tracked:!1,interaction:e}}catch(a){return console.warn("Failed to track interaction:",a),{tracked:!1,interaction:e,error:a.message}}}),cs=Ye("adaptive/requestSpeedRecommendation",async(e,t)=>{let{getState:n,rejectWithValue:r}=t;try{var a;const t=n(),r=t.adaptive.speedRecommendations[0];if(r&&Date.now()-r.timestamp<3e5)return null;const i=await(async e=>await Ea.adaptive.suggestOptimalSpeed(e))(e);return I(I({},i),{},{timestamp:Date.now(),currentSpeed:(null===(a=t.adaptive.currentLessonContent)||void 0===a?void 0:a.userSpeed)||3})}catch(i){return r(i.message||"Failed to get speed recommendation")}}),us=rt({name:"adaptive",initialState:{cachedContent:{},contentLoading:{},currentSession:null,currentLessonContent:null,pendingInteractions:[],trackingEnabled:!0,speedRecommendations:[],showSpeedSuggestion:!1,adaptiveMode:"auto",debugMode:!1,sessionMetrics:{totalTime:0,totalInteractions:0,avgEngagement:0,speedChanges:0},error:null,isLoading:!1},reducers:{startLearningSession:(e,t)=>{e.currentSession={sessionId:"session_".concat(Date.now()),userId:t.payload.userId,lessonId:t.payload.lessonId,interactions:[],startTime:Date.now(),totalEngagement:0,completed:!1},console.log("\ud83c\udfaf Started learning session:",e.currentSession.sessionId)},endLearningSession:(e,t)=>{if(e.currentSession){e.currentSession.endTime=Date.now(),e.currentSession.completed=t.payload.completed;const n=e.currentSession.endTime-e.currentSession.startTime;if(e.sessionMetrics.totalTime+=n,e.sessionMetrics.totalInteractions+=e.currentSession.interactions.length,e.currentSession.interactions.length>0){const t=e.currentSession.interactions.reduce((e,t)=>e+(t.engagementScore||0),0)/e.currentSession.interactions.length;e.sessionMetrics.avgEngagement=(e.sessionMetrics.avgEngagement*(e.sessionMetrics.totalInteractions-e.currentSession.interactions.length)+t*e.currentSession.interactions.length)/e.sessionMetrics.totalInteractions}console.log("\ud83d\udcca Session ended:",{sessionId:e.currentSession.sessionId,duration:n,interactions:e.currentSession.interactions.length,completed:t.payload.completed}),e.currentSession=null}},addInteraction:(e,t)=>{e.currentSession&&(e.currentSession.interactions.push(t.payload),t.payload.engagementScore&&(e.currentSession.totalEngagement+=t.payload.engagementScore)),e.pendingInteractions.push(t.payload)},clearPendingInteractions:e=>{e.pendingInteractions=[]},dismissSpeedSuggestion:e=>{e.showSpeedSuggestion=!1},acceptSpeedRecommendation:(e,t)=>{e.showSpeedSuggestion=!1,e.sessionMetrics.speedChanges+=1,Object.keys(e.cachedContent).forEach(n=>{n.endsWith("-".concat(t.payload))&&delete e.cachedContent[n]})},clearContentCache:(e,t)=>{if(t.payload.lessonId&&t.payload.userSpeed){const n="".concat(t.payload.lessonId,"-").concat(t.payload.userSpeed);delete e.cachedContent[n]}else t.payload.lessonId?Object.keys(e.cachedContent).forEach(n=>{n.startsWith("".concat(t.payload.lessonId,"-"))&&delete e.cachedContent[n]}):e.cachedContent={}},setAdaptiveMode:(e,t)=>{e.adaptiveMode=t.payload},setTrackingEnabled:(e,t)=>{e.trackingEnabled=t.payload},setDebugMode:(e,t)=>{e.debugMode=t.payload},clearError:e=>{e.error=null},resetSessionMetrics:e=>{e.sessionMetrics={totalTime:0,totalInteractions:0,avgEngagement:0,speedChanges:0}}},extraReducers:e=>{e.addCase(os.pending,(e,t)=>{const n="".concat(t.meta.arg.lessonId,"-").concat(t.meta.arg.userSpeed);e.contentLoading[n]=!0,e.isLoading=!0,e.error=null}).addCase(os.fulfilled,(e,t)=>{if(t.payload){const n="".concat(t.payload.lessonId,"-").concat(t.payload.userSpeed);e.contentLoading[n]=!1,e.isLoading=!1,e.cachedContent[n]={lessonId:t.payload.lessonId,userSpeed:t.payload.userSpeed,adaptedContent:t.payload.adaptedContent,uiConfig:t.payload.uiConfig,trackingId:t.payload.trackingId,cachedAt:t.payload.cachedAt},e.currentLessonContent=e.cachedContent[n],console.log("\u2705 Adaptive lesson loaded:",{lessonId:t.payload.lessonId,userSpeed:t.payload.userSpeed,fromCache:t.payload.fromCache||!1})}}).addCase(os.rejected,(e,t)=>{const n="".concat(t.meta.arg.lessonId,"-").concat(t.meta.arg.userSpeed);e.contentLoading[n]=!1,e.isLoading=!1,e.error=t.payload}),e.addCase(ls.fulfilled,(e,t)=>{t.payload.tracked&&(e.pendingInteractions=e.pendingInteractions.filter(e=>e!==t.payload.interaction))}),e.addCase(cs.fulfilled,(e,t)=>{t.payload&&(e.speedRecommendations.unshift(t.payload),e.speedRecommendations=e.speedRecommendations.slice(0,5),t.payload.confidence>.7&&t.payload.suggestedSpeed!==t.payload.currentSpeed&&(e.showSpeedSuggestion=!0))}).addCase(cs.rejected,(e,t)=>{console.warn("Speed recommendation failed:",t.payload)})}}),{startLearningSession:ds,endLearningSession:hs,addInteraction:ps,clearPendingInteractions:fs,dismissSpeedSuggestion:ms,acceptSpeedRecommendation:gs,clearContentCache:ys,setAdaptiveMode:vs,setTrackingEnabled:bs,setDebugMode:xs,clearError:ws,resetSessionMetrics:Ss}=us.actions,ks=us.reducer,js=async e=>{const{originalContent:t,userSpeed:n,personalizationLevel:r,userProfile:a}=e,i=aa(n),s=function(e,t){var n;const r={1:.2,2:.4,3:.6,4:.8,5:1}[t]||.6,a=((null===(n=e.text)||void 0===n?void 0:n.length)||0)>1e3?.1:0;return Math.min(1,r+a)}(t,n),o=a?function(e,t){let n=e;if(t.preferredComplexity){n=(n+t.preferredComplexity/100)/2}t.challenges.length>0&&(n=Math.max(.1,n-.1));t.strengths.length>0&&(n=Math.min(1,n+.1));return n}(s,a):s;return{text:_s(t.text||"",n,a),visualElements:Ts(t,i,a),interactions:Es(t,i,a),difficulty:o,difficultyLevel:Math.round(10*o),complexity:"number"===typeof i.characteristics.complexity?i.characteristics.complexity:.6,pacing:i.characteristics.pacing,style:Ps(a,i),examples:Is(t,a),hints:As(t,n,a),confidence:zs(t,a)}};function _s(e,t,n){if(!e)return"";switch(t){case 1:return Cs(e,.8);case 2:return Cs(e,.9);case 3:default:return e;case 4:return Ns(e,1.1);case 5:return Ns(e,1.3)}}function Cs(e,t){return e.replace(/([.!?])\s+/g,"$1\n\n").replace(/\b\w{10,}\b/g,e=>e.length>12?e.substring(0,8)+"...":e).substring(0,Math.floor(e.length*t))}function Ns(e,t){return e+"\n\nAdditional context and examples would be generated here based on the topic."}function Ts(e,t,n){const r=[];return t.modes.includes("visual")&&r.push({type:"diagram",complexity:t.characteristics.complexity,style:"visual"===(null===n||void 0===n?void 0:n.learningStyle)?"detailed":"simple"}),r}function Es(e,t,n){const r=[];return t.modes.includes("kinesthetic")&&r.push({type:"drag-drop",difficulty:t.characteristics.complexity,style:"kinesthetic"===(null===n||void 0===n?void 0:n.learningStyle)?"hands-on":"simple"}),r}function Ps(e,t){if(!e)return"neutral";return{visual:"image-rich",auditory:"narrative",kinesthetic:"interactive",reading:"text-focused"}[e.learningStyle]||"neutral"}function Is(e,t){if(!t)return[];const n=[];return t.interests.forEach(e=>{n.push({topic:e,example:"Example related to ".concat(e," would be generated here"),relevance:.8})}),n.slice(0,3)}function As(e,t,n){const r=[],a=t<=2?"simple":t>=4?"detailed":"moderate";return r.push("".concat(a," hint about the main concept")),null!==n&&void 0!==n&&n.challenges.length&&n.challenges.forEach(e=>{r.push("Hint to help with ".concat(e))}),r}function Ls(e,t){let n=e;return t.culturalContext&&(n+="\n\nIn the context of ".concat(t.culturalContext,", this concept relates to...")),n}function Os(e,t){return e.map(e=>{switch(t.learningStyle){case"visual":return"\ud83d\udca1 ".concat(e," (Think of it as a picture...)");case"auditory":return"\ud83d\udd0a ".concat(e," (Listen to the concept...)");case"kinesthetic":return"\u270b ".concat(e," (Try doing this...)");case"reading":return"\ud83d\udcda ".concat(e," (Read more about...)");default:return e}})}function Rs(e,t){return t>0?e+"\n\nAdvanced concepts and detailed explanations would be added here.":t<0?Cs(e,.8):e}function Ds(e,t){return e.map(e=>I(I({},e),{},{difficulty:Math.max(.1,Math.min(1,(e.difficulty||.5)+.1*t))}))}function Ms(e,t){return t>0?e.map(e=>e.replace(/\ud83d\udca1|\ud83d\udd0a|\u270b|\ud83d\udcda/g,"\ud83e\udd14")):t<0?e.map(e=>"\ud83d\udca1 HINT: ".concat(e)):e}function zs(e,t){let n=.7;return t&&(n+=.2),e.text&&e.text.length>500&&(n+=.1),Math.min(1,n)}const Fs=Ye("aiContent/generateAIContent",async(e,t)=>{let{getState:n,rejectWithValue:r}=t;try{const t=n(),r="".concat(e.lessonId,"-").concat(e.userId),a=t.aiContent.generatedContent[r];if(a&&Date.now()-a.generatedAt<3e5)return a;const i=Date.now(),s=await js({originalContent:e.originalContent,userSpeed:e.userSpeed,personalizationLevel:e.personalizationLevel||t.aiContent.personalizationLevel,userProfile:t.aiContent.personalizationProfiles[e.userId]}),o=Date.now()-i;return{generatedContent:{id:r,lessonId:e.lessonId,userId:e.userId,userSpeed:e.userSpeed,originalContent:e.originalContent,adaptedContent:s,personalizationLevel:e.personalizationLevel||t.aiContent.personalizationLevel,difficultyLevel:s.difficultyLevel,generatedAt:Date.now()},generationTime:o}}catch(a){return r(a.message||"Failed to generate AI content")}}),Us=Ye("aiContent/personalizeContentForUser",async(e,t)=>{let{getState:n,rejectWithValue:r}=t;try{const t=n(),r=I(I(I({},t.aiContent.personalizationProfiles[e.userId]),e.personalizationUpdates),{},{userId:e.userId,lastUpdated:Date.now()}),a=t.aiContent.generatedContent[e.contentId];if(a){const t=await(async(e,t)=>I(I({},e),{},{text:Ls(e.text,t),examples:Is(e.text,t),style:Ps(t),hints:Os(e.hints,t),confidence:zs({text:e.text},t)}))(a.adaptedContent,r);return{profile:r,contentId:e.contentId,personalizedContent:t}}return{profile:r}}catch(a){return r(a.message||"Failed to personalize content")}}),Vs=Ye("aiContent/adjustContentDifficulty",async(e,t)=>{let{getState:n,rejectWithValue:r}=t;try{const t=n().aiContent.generatedContent[e.contentId];if(!t)throw new Error("Content not found for difficulty adjustment");const r=await(async(e,t)=>{const n=Math.max(.1,Math.min(1,e.difficulty+.1*t));return I(I({},e),{},{difficulty:n,difficultyLevel:Math.round(10*n),text:Rs(e.text,t),interactions:Ds(e.interactions,t),hints:Ms(e.hints,t),confidence:Math.max(.3,e.confidence-.1*Math.abs(t))})})(t.adaptedContent,e.difficultyAdjustment,e.reason),a={adaptationId:"adapt_".concat(Date.now()),contentId:e.contentId,adaptationType:"difficulty",beforeState:{difficultyLevel:t.difficultyLevel},afterState:{difficultyLevel:r.difficultyLevel},reasoning:e.reason,confidence:r.confidence,timestamp:Date.now()};return{contentId:e.contentId,adjustedContent:r,adaptation:a}}catch(a){return r(a.message||"Failed to adjust content difficulty")}}),qs=rt({name:"aiContent",initialState:{generatedContent:{},contentLoading:{},personalizationProfiles:{},adaptationHistory:[],activeAdaptations:{},aiEnabled:!0,personalizationLevel:70,adaptationSpeed:"medium",generationQueue:[],contentMetrics:{totalGenerated:0,averageGenerationTime:0,effectivenessScore:0,userSatisfaction:0},error:null,isGenerating:!1},reducers:{addToGenerationQueue:(e,t)=>{e.generationQueue.push(I(I({},t.payload),{},{requestedAt:Date.now()})),e.generationQueue.sort((e,t)=>t.priority-e.priority)},removeFromGenerationQueue:(e,t)=>{e.generationQueue=e.generationQueue.filter(e=>"".concat(e.lessonId,"-").concat(e.userId)!==t.payload)},clearGeneratedContent:(e,t)=>{delete e.generatedContent[t.payload]},updatePersonalizationProfile:(e,t)=>{e.personalizationProfiles[t.payload.userId]=t.payload},recordContentAdaptation:(e,t)=>{e.adaptationHistory.push(t.payload),e.activeAdaptations[t.payload.contentId]=t.payload,e.adaptationHistory.length>100&&(e.adaptationHistory=e.adaptationHistory.slice(-100))},updateContentEffectiveness:(e,t)=>{e.generatedContent[t.payload.contentId]&&(e.generatedContent[t.payload.contentId].effectiveness=t.payload.effectiveness)},setAIEnabled:(e,t)=>{e.aiEnabled=t.payload},setPersonalizationLevel:(e,t)=>{e.personalizationLevel=Math.max(0,Math.min(100,t.payload))},setAdaptationSpeed:(e,t)=>{e.adaptationSpeed=t.payload},updateContentMetrics:(e,t)=>{if(t.payload.generationTime){e.contentMetrics.totalGenerated+=1;const n=(e.contentMetrics.averageGenerationTime*(e.contentMetrics.totalGenerated-1)+t.payload.generationTime)/e.contentMetrics.totalGenerated;e.contentMetrics.averageGenerationTime=n}t.payload.effectiveness&&(e.contentMetrics.effectivenessScore=t.payload.effectiveness),t.payload.userSatisfaction&&(e.contentMetrics.userSatisfaction=t.payload.userSatisfaction)},clearError:e=>{e.error=null},resetAIContent:e=>{e.generatedContent={},e.contentLoading={},e.adaptationHistory=[],e.activeAdaptations={},e.generationQueue=[],e.error=null,e.isGenerating=!1}},extraReducers:e=>{e.addCase(Fs.pending,(e,t)=>{const n="".concat(t.meta.arg.lessonId,"-").concat(t.meta.arg.userId);e.contentLoading[n]=!0,e.isGenerating=!0,e.error=null}).addCase(Fs.fulfilled,(e,t)=>{if(t.payload&&"generatedContent"in t.payload){const n=t.payload.generatedContent.id;e.contentLoading[n]=!1,e.isGenerating=!1,e.generatedContent[n]=t.payload.generatedContent,e.contentMetrics.totalGenerated+=1;const r=(e.contentMetrics.averageGenerationTime*(e.contentMetrics.totalGenerated-1)+t.payload.generationTime)/e.contentMetrics.totalGenerated;e.contentMetrics.averageGenerationTime=r,e.generationQueue=e.generationQueue.filter(e=>"".concat(e.lessonId,"-").concat(e.userId)!==n)}}).addCase(Fs.rejected,(e,t)=>{const n="".concat(t.meta.arg.lessonId,"-").concat(t.meta.arg.userId);e.contentLoading[n]=!1,e.isGenerating=!1,e.error=t.payload}),e.addCase(Us.fulfilled,(e,t)=>{if(e.personalizationProfiles[t.payload.profile.userId]=t.payload.profile,t.payload.contentId&&t.payload.personalizedContent){const n=e.generatedContent[t.payload.contentId];n&&(n.adaptedContent=t.payload.personalizedContent,n.personalizationLevel=t.payload.profile.preferredComplexity||e.personalizationLevel)}}).addCase(Us.rejected,(e,t)=>{e.error=t.payload}),e.addCase(Vs.fulfilled,(e,t)=>{const n=e.generatedContent[t.payload.contentId];n&&(n.adaptedContent=t.payload.adjustedContent,n.difficultyLevel=t.payload.adjustedContent.difficultyLevel),e.adaptationHistory.push(t.payload.adaptation),e.activeAdaptations[t.payload.contentId]=t.payload.adaptation}).addCase(Vs.rejected,(e,t)=>{e.error=t.payload})}}),{addToGenerationQueue:Bs,removeFromGenerationQueue:Ws,clearGeneratedContent:Hs,updatePersonalizationProfile:Qs,recordContentAdaptation:Gs,updateContentEffectiveness:Ks,setAIEnabled:Js,setPersonalizationLevel:$s,setAdaptationSpeed:Ys,updateContentMetrics:Xs,clearError:Zs,resetAIContent:eo}=qs.actions,to=qs.reducer,no=Ye("smartTutor/generateSmartHint",async(e,t)=>{let{getState:n,rejectWithValue:r}=t;try{const t=n(),r=await(async e=>{let t="conceptual";e.struggleContext.includes("step")||e.struggleContext.includes("process")?t="procedural":e.struggleContext.includes("strategy")||e.struggleContext.includes("approach")?t="strategic":(e.struggleContext.includes("understanding")||e.struggleContext.includes("confused"))&&(t="metacognitive");const n={conceptual:["Think about the main idea behind {concept}","Consider how {concept} relates to what you already know","The key principle here is {principle}"],procedural:["Try breaking this down into smaller steps","Remember to follow the process: step 1, step 2, step 3","Let's approach this systematically"],strategic:["What strategy could help you solve this?","Think about similar problems you've solved before","Consider using the {strategy} approach"],metacognitive:["Ask yourself: what do I already know about this?","How confident are you in your understanding?","What would help you learn this better?"]}[t];let r=n[Math.floor(Math.random()*n.length)];switch(e.hintStyle){case"gentle":r="\ud83d\udca1 ".concat(r,". Take your time to think about it.");break;case"direct":r="\u2192 ".concat(r);break;case"encouraging":r="\ud83c\udf1f You're doing great! ".concat(r);break;case"detailed":r="\ud83d\udcda ".concat(r,". Here's some additional context that might help...")}return e.previousHints.some(e=>e.includes(r.substring(0,20)))&&(r="Let me try a different approach: ".concat(r)),{text:r,type:t,difficulty:e.difficulty,confidence:.3*Math.random()+.7}})({contentId:e.contentId,userId:e.userId,struggleContext:e.struggleContext,userSpeed:e.userSpeed,previousHints:e.previousHints||[],hintStyle:t.smartTutor.feedbackStyle,difficulty:so(e.userSpeed)});return{id:"hint_".concat(Date.now()),contentId:e.contentId,userId:e.userId,hintText:r.text,hintType:r.type,difficulty:r.difficulty,timestamp:Date.now(),used:!1}}catch(a){return r(a.message||"Failed to generate hint")}}),ro=Ye("smartTutor/generateAdaptiveQuestion",async(e,t)=>{let{getState:n,rejectWithValue:r}=t;try{const t=n(),r=await(async e=>{let t="multiple-choice";e.userSpeed>=4?t="open-ended":e.currentProgress<.5&&(t="true-false");let n=.5;switch(e.difficultyMode){case"adaptive":n=Math.max(.1,Math.min(.9,e.currentProgress+.1));break;case"progressive":n=e.currentProgress;break;case"fixed":n=.5}const r={"multiple-choice":[{text:"Which of the following best describes {concept}?",options:["Option A","Option B","Option C","Option D"],correct:"Option B"}],"true-false":[{text:"{statement} is always true.",correct:"false"}],"open-ended":[{text:"Explain how {concept} works in your own words."}]}[t][0];return{questionText:r.text.replace("{concept}","ecosystem interactions"),questionType:t,difficulty:n,options:"options"in r?r.options:void 0,correctAnswer:"correct"in r?r.correct:void 0,explanation:"This helps reinforce your understanding of the key concepts.",followUpQuestions:["What would happen if this changed?"]}})({contentId:e.contentId,userId:e.userId,currentProgress:e.currentProgress,userSpeed:e.userSpeed,previousQuestions:e.previousQuestions||[],difficultyMode:t.smartTutor.questionDifficulty});return{id:"question_".concat(Date.now()),questionText:r.questionText,questionType:r.questionType,difficulty:r.difficulty,options:r.options,correctAnswer:r.correctAnswer,explanation:r.explanation,followUpQuestions:r.followUpQuestions,timestamp:Date.now()}}catch(a){return r(a.message||"Failed to generate question")}}),ao=Ye("smartTutor/generatePersonalizedFeedback",async(e,t)=>{let{getState:n,rejectWithValue:r}=t;try{n();const t=await(async e=>{let t="",n="positive",r=[];return e.isCorrect?(n="positive",t="Excellent work! You've grasped the concept well.",r=["Try a more challenging question","Explore related concepts"]):(1===e.attemptNumber?(n="encouraging",t="Not quite right, but you're on the right track! Let's think about this differently."):(n="corrective",t="Let me help you understand where this went wrong."),r=["Review the key concepts","Try breaking the problem into smaller parts","Consider asking for a hint"]),{feedbackText:t,feedbackType:n,improvementSuggestions:r,nextSteps:["Continue to the next activity","Review previous material"]}})({userId:e.userId,contentId:e.contentId,userResponse:"Generated based on performance",correctAnswer:"Performance-based feedback",isCorrect:e.recentPerformance.accuracy>70,attemptNumber:1});return{id:"feedback_".concat(Date.now()),userId:e.userId,contentId:e.contentId,feedbackText:t.feedbackText,feedbackType:t.feedbackType,isCorrect:e.recentPerformance.accuracy>70,improvementSuggestions:t.improvementSuggestions,timestamp:Date.now()}}catch(a){return r(a.message||"Failed to generate feedback")}}),io=Ye("smartTutor/analyzeUserError",async(e,t)=>{let{rejectWithValue:n}=t;try{const t=await(async e=>{let t="knowledge-gap";return e.userResponse.length<10?t="careless":e.previousErrors.length>2&&(t="misconception"),{errorType:t,errorDescription:"User appears to have difficulty with the core concept",suggestedRemediation:["Provide additional examples","Use visual aids","Break down into simpler components"],confidence:.8}})({userResponse:e.userResponse,correctAnswer:e.correctAnswer,context:e.context,previousErrors:[]});return{id:"error_".concat(Date.now()),errorType:t.errorType,errorDescription:t.errorDescription,suggestedRemediation:t.suggestedRemediation,confidence:t.confidence,timestamp:Date.now()}}catch(r){return n(r.message||"Failed to analyze error")}});function so(e){return{1:.2,2:.4,3:.6,4:.8,5:1}[e]||.6}const oo=rt({name:"smartTutor",initialState:{currentSession:null,availableHints:{},hintsLoading:{},generatedQuestions:[],currentQuestion:null,questionHistory:[],feedbackHistory:[],pendingFeedback:[],errorAnalyses:[],commonMisconceptions:{},tutorEnabled:!0,hintFrequency:"medium",feedbackStyle:"encouraging",questionDifficulty:"adaptive",tutorMetrics:{totalHintsProvided:0,hintEffectiveness:0,averageQuestionDifficulty:0,feedbackPositivity:0,errorReductionRate:0},showHintPanel:!1,showFeedbackPanel:!1,showQuestionPanel:!1,error:null,isProcessing:!1},reducers:{startTutorSession:(e,t)=>{e.currentSession={sessionId:"tutor_session_".concat(Date.now()),userId:t.payload.userId,lessonId:t.payload.lessonId,startTime:Date.now(),hintsUsed:[],questionsAsked:[],feedbackGiven:[],errorsAnalyzed:[],learningProgress:{conceptsMastered:[],strugglingAreas:[],improvementAreas:[]}}},endTutorSession:e=>{e.currentSession&&(e.currentSession.endTime=Date.now(),e.currentSession=null)},useHint:(e,t)=>{const n=t.payload,r=(e.availableHints[n]||[]).find(e=>!e.used);r&&(r.used=!0,e.currentSession&&e.currentSession.hintsUsed.push(r),e.tutorMetrics.totalHintsProvided+=1)},rateHintEffectiveness:(e,t)=>{const{hintId:n,effectiveness:r}=t.payload;Object.values(e.availableHints).forEach(e=>{const t=e.find(e=>e.id===n);t&&(t.effectiveness=r)});const a=e.tutorMetrics.hintEffectiveness;e.tutorMetrics.hintEffectiveness=(a+r)/2},setCurrentQuestion:(e,t)=>{e.currentQuestion=t.payload,t.payload&&e.currentSession&&e.currentSession.questionsAsked.push(t.payload)},addFeedback:(e,t)=>{e.feedbackHistory.push(t.payload),e.currentSession&&e.currentSession.feedbackGiven.push(t.payload)},updateLearningProgress:(e,t)=>{if(e.currentSession){const n=e.currentSession.learningProgress;t.payload.conceptsMastered&&(n.conceptsMastered=Array.from(new Set([...n.conceptsMastered,...t.payload.conceptsMastered]))),t.payload.strugglingAreas&&(n.strugglingAreas=Array.from(new Set([...n.strugglingAreas,...t.payload.strugglingAreas]))),t.payload.improvementAreas&&(n.improvementAreas=Array.from(new Set([...n.improvementAreas,...t.payload.improvementAreas])))}},setTutorEnabled:(e,t)=>{e.tutorEnabled=t.payload},setHintFrequency:(e,t)=>{e.hintFrequency=t.payload},setFeedbackStyle:(e,t)=>{e.feedbackStyle=t.payload},setQuestionDifficulty:(e,t)=>{e.questionDifficulty=t.payload},toggleHintPanel:e=>{e.showHintPanel=!e.showHintPanel},toggleFeedbackPanel:e=>{e.showFeedbackPanel=!e.showFeedbackPanel},toggleQuestionPanel:e=>{e.showQuestionPanel=!e.showQuestionPanel},clearError:e=>{e.error=null},resetSmartTutor:e=>{e.currentSession=null,e.availableHints={},e.generatedQuestions=[],e.currentQuestion=null,e.questionHistory=[],e.feedbackHistory=[],e.pendingFeedback=[],e.errorAnalyses=[],e.error=null,e.isProcessing=!1}},extraReducers:e=>{e.addCase(no.pending,e=>{e.isProcessing=!0,e.error=null}).addCase(no.fulfilled,(e,t)=>{e.isProcessing=!1;const n=t.payload;e.availableHints[n.contentId]||(e.availableHints[n.contentId]=[]),e.availableHints[n.contentId].push(n)}).addCase(no.rejected,(e,t)=>{e.isProcessing=!1,e.error=t.payload}),e.addCase(ro.pending,e=>{e.isProcessing=!0,e.error=null}).addCase(ro.fulfilled,(e,t)=>{e.isProcessing=!1;const n=t.payload;e.generatedQuestions.push(n),e.currentQuestion=n,e.questionHistory.push(n)}).addCase(ro.rejected,(e,t)=>{e.isProcessing=!1,e.error=t.payload}),e.addCase(ao.pending,e=>{e.isProcessing=!0,e.error=null}).addCase(ao.fulfilled,(e,t)=>{e.isProcessing=!1;const n=t.payload;e.feedbackHistory.push(n),e.currentSession&&e.currentSession.feedbackGiven.push(n)}).addCase(ao.rejected,(e,t)=>{e.isProcessing=!1,e.error=t.payload}),e.addCase(io.pending,e=>{e.isProcessing=!0,e.error=null}).addCase(io.fulfilled,(e,t)=>{e.isProcessing=!1;const n=t.payload;e.errorAnalyses.push(n),e.currentSession&&e.currentSession.errorsAnalyzed.push(n)}).addCase(io.rejected,(e,t)=>{e.isProcessing=!1,e.error=t.payload})}}),{startTutorSession:lo,endTutorSession:co,useHint:uo,rateHintEffectiveness:ho,setCurrentQuestion:po,addFeedback:fo,updateLearningProgress:mo,setTutorEnabled:go,setHintFrequency:yo,setFeedbackStyle:vo,setQuestionDifficulty:bo,toggleHintPanel:xo,toggleFeedbackPanel:wo,toggleQuestionPanel:So,clearError:ko,resetSmartTutor:jo}=oo.actions,_o=oo.reducer,Co=e=>t=>n=>{var r;const a=t(n);if(n.type&&null!==(r=e.getState().adaptive)&&void 0!==r&&r.trackingEnabled){if(["quiz/submitAnswer","progress/updateProgress","chat/sendMessage","user/updateUserSpeed"].some(e=>n.type.includes(e))){var i,s;const t=e.getState(),r=null===(i=t.user)||void 0===i?void 0:i.currentUser,a=null===(s=t.adaptive)||void 0===s?void 0:s.currentSession;if(r&&a){var o,l;const i={userId:r.id,lessonId:a.lessonId,adaptationId:null===(o=t.adaptive)||void 0===o||null===(l=o.currentLessonContent)||void 0===l?void 0:l.trackingId,interactionType:n.type.includes("submit")?"complete":"click",interactionData:{actionType:n.type,payload:n.payload},timeSpentSeconds:Math.floor((Date.now()-a.startTime)/1e3)};e.dispatch({type:"adaptive/addInteraction",payload:i})}}}return a},No=function(e){const t=function(e){const{thunk:t=!0,immutableCheck:n=!0,serializableCheck:r=!0,actionCreatorCheck:a=!0}=null!==e&&void 0!==e?e:{};let i=new De;return t&&("boolean"===typeof t?i.push(V):i.push(q(t.extraArgument))),i},{reducer:n,middleware:r,devTools:a=!0,duplicateMiddlewareCheck:i=!0,preloadedState:s,enhancers:o}=e||{};let l,c;if("function"===typeof n)l=n;else{if(!D(n))throw new Error(ht(1));l=z(n)}c="function"===typeof r?r(t):t();let u=F;a&&(u=Le(I({trace:!1},"object"===typeof a&&a)));const d=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>(n,r)=>{const a=e(n,r);let i=()=>{throw new Error(A(15))};const s={getState:a.getState,dispatch:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return i(e,...n)}},o=t.map(e=>e(s));return i=F(...o)(a.dispatch),I(I({},a),{},{dispatch:i})}}(...c),h=Ve(d);return M(l,s,u(..."function"===typeof o?o(h):h()))}({reducer:{progress:Ha,quiz:ai,chat:xi,achievements:Ii,topics:qi,user:ss,adaptive:ks,aiContent:to,smartTutor:_o},middleware:e=>e({serializableCheck:{ignoredActions:["persist/PERSIST","persist/REHYDRATE"]}}).concat(Co)}),To=()=>S(),Eo=_,Po=(0,r.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),Io=(0,r.createContext)({}),Ao=(0,r.createContext)(null),Lo="undefined"!==typeof document,Oo=Lo?r.useLayoutEffect:r.useEffect,Ro=(0,r.createContext)({strict:!1}),Do=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),Mo="data-"+Do("framerAppearId");function zo(e){return e&&"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function Fo(e){return"string"===typeof e||Array.isArray(e)}function Uo(e){return null!==e&&"object"===typeof e&&"function"===typeof e.start}const Vo=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],qo=["initial",...Vo];function Bo(e){return Uo(e.animate)||qo.some(t=>Fo(e[t]))}function Wo(e){return Boolean(Bo(e)||e.variants)}function Ho(e){const{initial:t,animate:n}=function(e,t){if(Bo(e)){const{initial:t,animate:n}=e;return{initial:!1===t||Fo(t)?t:void 0,animate:Fo(n)?n:void 0}}return!1!==e.inherit?t:{}}(e,(0,r.useContext)(Io));return(0,r.useMemo)(()=>({initial:t,animate:n}),[Qo(t),Qo(n)])}function Qo(e){return Array.isArray(e)?e.join(" "):e}const Go={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ko={};for(const sg in Go)Ko[sg]={isEnabled:e=>Go[sg].some(t=>!!e[t])};const Jo=(0,r.createContext)({}),$o=(0,r.createContext)({}),Yo=Symbol.for("motionComponentSymbol");function Xo(e){let{preloadedFeatures:t,createVisualElement:n,useRender:a,useVisualState:i,Component:s}=e;t&&function(e){for(const t in e)Ko[t]=I(I({},Ko[t]),e[t])}(t);const o=(0,r.forwardRef)(function(e,o){let l;const c=I(I(I({},(0,r.useContext)(Po)),e),{},{layoutId:Zo(e)}),{isStatic:u}=c,d=Ho(e),h=i(e,u);if(!u&&Lo){d.visualElement=function(e,t,n,a){const{visualElement:i}=(0,r.useContext)(Io),s=(0,r.useContext)(Ro),o=(0,r.useContext)(Ao),l=(0,r.useContext)(Po).reducedMotion,c=(0,r.useRef)();a=a||s.renderer,!c.current&&a&&(c.current=a(e,{visualState:t,parent:i,props:n,presenceContext:o,blockInitialAnimation:!!o&&!1===o.initial,reducedMotionConfig:l}));const u=c.current;(0,r.useInsertionEffect)(()=>{u&&u.update(n,o)});const d=(0,r.useRef)(Boolean(n[Mo]&&!window.HandoffComplete));return Oo(()=>{u&&(u.render(),d.current&&u.animationState&&u.animationState.animateChanges())}),(0,r.useEffect)(()=>{u&&(u.updateFeatures(),!d.current&&u.animationState&&u.animationState.animateChanges(),d.current&&(d.current=!1,window.HandoffComplete=!0))}),u}(s,h,c,n);const e=(0,r.useContext)($o),a=(0,r.useContext)(Ro).strict;d.visualElement&&(l=d.visualElement.loadFeatures(c,a,t,e))}return r.createElement(Io.Provider,{value:d},l&&d.visualElement?r.createElement(l,I({visualElement:d.visualElement},c)):null,a(s,e,function(e,t,n){return(0,r.useCallback)(r=>{r&&e.mount&&e.mount(r),t&&(r?t.mount(r):t.unmount()),n&&("function"===typeof n?n(r):zo(n)&&(n.current=r))},[t])}(h,d.visualElement,o),h,u,d.visualElement))});return o[Yo]=s,o}function Zo(e){let{layoutId:t}=e;const n=(0,r.useContext)(Jo).id;return n&&void 0!==t?n+"-"+t:t}function el(e){function t(t){return Xo(e(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}if("undefined"===typeof Proxy)return t;const n=new Map;return new Proxy(t,{get:(e,r)=>(n.has(r)||n.set(r,t(r)),n.get(r))})}const tl=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function nl(e){return"string"===typeof e&&!e.includes("-")&&!!(tl.indexOf(e)>-1||/[A-Z]/.test(e))}const rl={};const al=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],il=new Set(al);function sl(e,t){let{layout:n,layoutId:r}=t;return il.has(e)||e.startsWith("origin")||(n||void 0!==r)&&(!!rl[e]||"opacity"===e)}const ol=e=>Boolean(e&&e.getVelocity),ll={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},cl=al.length;const ul=e=>t=>"string"===typeof t&&t.startsWith(e),dl=ul("--"),hl=ul("var(--"),pl=(e,t)=>t&&"number"===typeof e?t.transform(e):e,fl=(e,t,n)=>Math.min(Math.max(n,e),t),ml={test:e=>"number"===typeof e,parse:parseFloat,transform:e=>e},gl=I(I({},ml),{},{transform:e=>fl(0,1,e)}),yl=I(I({},ml),{},{default:1}),vl=e=>Math.round(1e5*e)/1e5,bl=/(-)?([\d]*\.?[\d])+/g,xl=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,wl=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Sl(e){return"string"===typeof e}const kl=e=>({test:t=>Sl(t)&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>"".concat(t).concat(e)}),jl=kl("deg"),_l=kl("%"),Cl=kl("px"),Nl=kl("vh"),Tl=kl("vw"),El=I(I({},_l),{},{parse:e=>_l.parse(e)/100,transform:e=>_l.transform(100*e)}),Pl=I(I({},ml),{},{transform:Math.round}),Il={borderWidth:Cl,borderTopWidth:Cl,borderRightWidth:Cl,borderBottomWidth:Cl,borderLeftWidth:Cl,borderRadius:Cl,radius:Cl,borderTopLeftRadius:Cl,borderTopRightRadius:Cl,borderBottomRightRadius:Cl,borderBottomLeftRadius:Cl,width:Cl,maxWidth:Cl,height:Cl,maxHeight:Cl,size:Cl,top:Cl,right:Cl,bottom:Cl,left:Cl,padding:Cl,paddingTop:Cl,paddingRight:Cl,paddingBottom:Cl,paddingLeft:Cl,margin:Cl,marginTop:Cl,marginRight:Cl,marginBottom:Cl,marginLeft:Cl,rotate:jl,rotateX:jl,rotateY:jl,rotateZ:jl,scale:yl,scaleX:yl,scaleY:yl,scaleZ:yl,skew:jl,skewX:jl,skewY:jl,distance:Cl,translateX:Cl,translateY:Cl,translateZ:Cl,x:Cl,y:Cl,z:Cl,perspective:Cl,transformPerspective:Cl,opacity:gl,originX:El,originY:El,originZ:Cl,zIndex:Pl,fillOpacity:gl,strokeOpacity:gl,numOctaves:Pl};function Al(e,t,n,r){const{style:a,vars:i,transform:s,transformOrigin:o}=e;let l=!1,c=!1,u=!0;for(const d in t){const e=t[d];if(dl(d)){i[d]=e;continue}const n=Il[d],r=pl(e,n);if(il.has(d)){if(l=!0,s[d]=r,!u)continue;e!==(n.default||0)&&(u=!1)}else d.startsWith("origin")?(c=!0,o[d]=r):a[d]=r}if(t.transform||(l||r?a.transform=function(e,t,n,r){let{enableHardwareAcceleration:a=!0,allowTransformNone:i=!0}=t,s="";for(let o=0;o<cl;o++){const t=al[o];void 0!==e[t]&&(s+="".concat(ll[t]||t,"(").concat(e[t],") "))}return a&&!e.z&&(s+="translateZ(0)"),s=s.trim(),r?s=r(e,n?"":s):i&&n&&(s="none"),s}(e.transform,n,u,r):a.transform&&(a.transform="none")),c){const{originX:e="50%",originY:t="50%",originZ:n=0}=o;a.transformOrigin="".concat(e," ").concat(t," ").concat(n)}}const Ll=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Ol(e,t,n){for(const r in t)ol(t[r])||sl(r,n)||(e[r]=t[r])}function Rl(e,t,n){const a={};return Ol(a,e.style||{},e),Object.assign(a,function(e,t,n){let{transformTemplate:a}=e;return(0,r.useMemo)(()=>{const e={style:{},transform:{},transformOrigin:{},vars:{}};return Al(e,t,{enableHardwareAcceleration:!n},a),Object.assign({},e.vars,e.style)},[t])}(e,t,n)),e.transformValues?e.transformValues(a):a}function Dl(e,t,n){const r={},a=Rl(e,t,n);return e.drag&&!1!==e.dragListener&&(r.draggable=!1,a.userSelect=a.WebkitUserSelect=a.WebkitTouchCallout="none",a.touchAction=!0===e.drag?"none":"pan-".concat("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=a,r}const Ml=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function zl(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Ml.has(e)}let Fl=e=>!zl(e);try{(Ul=require("@emotion/is-prop-valid").default)&&(Fl=e=>e.startsWith("on")?!zl(e):Ul(e))}catch(ig){}var Ul;function Vl(e,t,n){return"string"===typeof e?e:Cl.transform(t+n*e)}const ql={offset:"stroke-dashoffset",array:"stroke-dasharray"},Bl={offset:"strokeDashoffset",array:"strokeDasharray"};const Wl=["attrX","attrY","attrScale","originX","originY","pathLength","pathSpacing","pathOffset"];function Hl(e,t,n,r,a){let{attrX:i,attrY:s,attrScale:o,originX:l,originY:c,pathLength:u,pathSpacing:d=1,pathOffset:h=0}=t;if(Al(e,C(t,Wl),n,a),r)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:p,style:f,dimensions:m}=e;p.transform&&(m&&(f.transform=p.transform),delete p.transform),m&&(void 0!==l||void 0!==c||f.transform)&&(f.transformOrigin=function(e,t,n){const r=Vl(t,e.x,e.width),a=Vl(n,e.y,e.height);return"".concat(r," ").concat(a)}(m,void 0!==l?l:.5,void 0!==c?c:.5)),void 0!==i&&(p.x=i),void 0!==s&&(p.y=s),void 0!==o&&(p.scale=o),void 0!==u&&function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];e.pathLength=1;const i=a?ql:Bl;e[i.offset]=Cl.transform(-r);const s=Cl.transform(t),o=Cl.transform(n);e[i.array]="".concat(s," ").concat(o)}(p,u,d,h,!1)}const Ql=()=>I(I({},{style:{},transform:{},transformOrigin:{},vars:{}}),{},{attrs:{}}),Gl=e=>"string"===typeof e&&"svg"===e.toLowerCase();function Kl(e,t,n,a){const i=(0,r.useMemo)(()=>{const n=Ql();return Hl(n,t,{enableHardwareAcceleration:!1},Gl(a),e.transformTemplate),I(I({},n.attrs),{},{style:I({},n.style)})},[t]);if(e.style){const t={};Ol(t,e.style,e),i.style=I(I({},t),i.style)}return i}function Jl(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(t,n,a,i,s)=>{let{latestValues:o}=i;const l=(nl(t)?Kl:Dl)(n,o,s,t),c=function(e,t,n){const r={};for(const a in e)"values"===a&&"object"===typeof e.values||(Fl(a)||!0===n&&zl(a)||!t&&!zl(a)||e.draggable&&a.startsWith("onDrag"))&&(r[a]=e[a]);return r}(n,"string"===typeof t,e),u=I(I(I({},c),l),{},{ref:a}),{children:d}=n,h=(0,r.useMemo)(()=>ol(d)?d.get():d,[d]);return(0,r.createElement)(t,I(I({},u),{},{children:h}))}}function $l(e,t,n,r){let{style:a,vars:i}=t;Object.assign(e.style,a,r&&r.getProjectionStyles(n));for(const s in i)e.style.setProperty(s,i[s])}const Yl=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Xl(e,t,n,r){$l(e,t,void 0,r);for(const a in t.attrs)e.setAttribute(Yl.has(a)?a:Do(a),t.attrs[a])}function Zl(e,t){const{style:n}=e,r={};for(const a in n)(ol(n[a])||t.style&&ol(t.style[a])||sl(a,e))&&(r[a]=n[a]);return r}function ec(e,t){const n=Zl(e,t);for(const r in e)if(ol(e[r])||ol(t[r])){n[-1!==al.indexOf(r)?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r]=e[r]}return n}function tc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return"function"===typeof t&&(t=t(void 0!==n?n:e.custom,r,a)),"string"===typeof t&&(t=e.variants&&e.variants[t]),"function"===typeof t&&(t=t(void 0!==n?n:e.custom,r,a)),t}function nc(e){const t=(0,r.useRef)(null);return null===t.current&&(t.current=e()),t.current}const rc=e=>Array.isArray(e),ac=e=>rc(e)?e[e.length-1]||0:e;function ic(e){const t=ol(e)?e.get():e;return n=t,Boolean(n&&"object"===typeof n&&n.mix&&n.toValue)?t.toValue():t;var n}const sc=["transitionEnd","transition"];const oc=e=>(t,n)=>{const a=(0,r.useContext)(Io),i=(0,r.useContext)(Ao),s=()=>function(e,t,n,r){let{scrapeMotionValuesFromProps:a,createRenderState:i,onMount:s}=e;const o={latestValues:lc(t,n,r,a),renderState:i()};return s&&(o.mount=e=>s(t,e,o)),o}(e,t,a,i);return n?s():nc(s)};function lc(e,t,n,r){const a={},i=r(e,{});for(const h in i)a[h]=ic(i[h]);let{initial:s,animate:o}=e;const l=Bo(e),c=Wo(e);t&&c&&!l&&!1!==e.inherit&&(void 0===s&&(s=t.initial),void 0===o&&(o=t.animate));let u=!!n&&!1===n.initial;u=u||!1===s;const d=u?o:s;if(d&&"boolean"!==typeof d&&!Uo(d)){(Array.isArray(d)?d:[d]).forEach(t=>{const n=tc(e,t);if(!n)return;const{transitionEnd:r,transition:i}=n,s=C(n,sc);for(const e in s){let t=s[e];if(Array.isArray(t)){t=t[u?t.length-1:0]}null!==t&&(a[e]=t)}for(const e in r)a[e]=r[e]})}return a}const cc=e=>e;class uc{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const t=this.order.indexOf(e);-1!==t&&(this.order.splice(t,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}const dc=["prepare","read","update","preRender","render","postRender"];const{schedule:hc,cancel:pc,state:fc,steps:mc}=function(e,t){let n=!1,r=!0;const a={delta:0,timestamp:0,isProcessing:!1},i=dc.reduce((e,t)=>(e[t]=function(e){let t=new uc,n=new uc,r=0,a=!1,i=!1;const s=new WeakSet,o={schedule:function(e){const i=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&a,o=i?t:n;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&s.add(e),o.add(e)&&i&&a&&(r=t.order.length),e},cancel:e=>{n.remove(e),s.delete(e)},process:l=>{if(a)i=!0;else{if(a=!0,[t,n]=[n,t],n.clear(),r=t.order.length,r)for(let n=0;n<r;n++){const r=t.order[n];r(l),s.has(r)&&(o.schedule(r),e())}a=!1,i&&(i=!1,o.process(l))}}};return o}(()=>n=!0),e),{}),s=e=>i[e].process(a),o=()=>{const i=performance.now();n=!1,a.delta=r?1e3/60:Math.max(Math.min(i-a.timestamp,40),1),a.timestamp=i,a.isProcessing=!0,dc.forEach(s),a.isProcessing=!1,n&&t&&(r=!1,e(o))},l=dc.reduce((t,s)=>{const l=i[s];return t[s]=function(t){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n||(n=!0,r=!0,a.isProcessing||e(o)),l.schedule(t,i,s)},t},{});return{schedule:l,cancel:e=>dc.forEach(t=>i[t].cancel(e)),state:a,steps:i}}("undefined"!==typeof requestAnimationFrame?requestAnimationFrame:cc,!0),gc={useVisualState:oc({scrapeMotionValuesFromProps:ec,createRenderState:Ql,onMount:(e,t,n)=>{let{renderState:r,latestValues:a}=n;hc.read(()=>{try{r.dimensions="function"===typeof t.getBBox?t.getBBox():t.getBoundingClientRect()}catch(e){r.dimensions={x:0,y:0,width:0,height:0}}}),hc.render(()=>{Hl(r,a,{enableHardwareAcceleration:!1},Gl(t.tagName),e.transformTemplate),Xl(t,r)})}})},yc={useVisualState:oc({scrapeMotionValuesFromProps:Zl,createRenderState:Ll})};function vc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}const bc=e=>"mouse"===e.pointerType?"number"!==typeof e.button||e.button<=0:!1!==e.isPrimary;function xc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"page";return{point:{x:e[t+"X"],y:e[t+"Y"]}}}function wc(e,t,n,r){return vc(e,t,(e=>t=>bc(t)&&e(t,xc(t)))(n),r)}const Sc=(e,t)=>n=>t(e(n)),kc=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(Sc)};function jc(e){let t=null;return()=>{const n=()=>{t=null};return null===t&&(t=e,n)}}const _c=jc("dragHorizontal"),Cc=jc("dragVertical");function Nc(e){let t=!1;if("y"===e)t=Cc();else if("x"===e)t=_c();else{const e=_c(),n=Cc();e&&n?t=()=>{e(),n()}:(e&&e(),n&&n())}return t}function Tc(){const e=Nc(!0);return!e||(e(),!1)}class Ec{constructor(e){this.isMounted=!1,this.node=e}update(){}}function Pc(e,t){const n="pointer"+(t?"enter":"leave"),r="onHover"+(t?"Start":"End");return wc(e.current,n,(n,a)=>{if("touch"===n.pointerType||Tc())return;const i=e.getProps();e.animationState&&i.whileHover&&e.animationState.setActive("whileHover",t),i[r]&&hc.update(()=>i[r](n,a))},{passive:!e.getProps()[r]})}const Ic=(e,t)=>!!t&&(e===t||Ic(e,t.parentElement));function Ac(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,xc(n))}const Lc=["root"],Oc=new WeakMap,Rc=new WeakMap,Dc=e=>{const t=Oc.get(e.target);t&&t(e)},Mc=e=>{e.forEach(Dc)};function zc(e,t,n){const r=function(e){let{root:t}=e,n=C(e,Lc);const r=t||document;Rc.has(r)||Rc.set(r,{});const a=Rc.get(r),i=JSON.stringify(n);return a[i]||(a[i]=new IntersectionObserver(Mc,I({root:t},n))),a[i]}(t);return Oc.set(e,n),r.observe(e),()=>{Oc.delete(e),r.unobserve(e)}}const Fc={some:0,all:1};const Uc={inView:{Feature:class extends Ec{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:r="some",once:a}=e,i={root:t?t.current:void 0,rootMargin:n,threshold:"number"===typeof r?r:Fc[r]};return zc(this.node.current,i,e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,a&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:n,onViewportLeave:r}=this.node.getProps(),i=t?n:r;i&&i(e)})}mount(){this.startObserver()}update(){if("undefined"===typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node,n=["amount","margin","root"].some(function(e){let{viewport:t={}}=e,{viewport:n={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=>t[e]!==n[e]}(e,t));n&&this.startObserver()}unmount(){}}},tap:{Feature:class extends Ec{constructor(){super(...arguments),this.removeStartListeners=cc,this.removeEndListeners=cc,this.removeAccessibleListeners=cc,this.startPointerPress=(e,t)=>{if(this.isPressing)return;this.removeEndListeners();const n=this.node.getProps(),r=wc(window,"pointerup",(e,t)=>{if(!this.checkPressEnd())return;const{onTap:n,onTapCancel:r,globalTapTarget:a}=this.node.getProps();hc.update(()=>{a||Ic(this.node.current,e.target)?n&&n(e,t):r&&r(e,t)})},{passive:!(n.onTap||n.onPointerUp)}),a=wc(window,"pointercancel",(e,t)=>this.cancelPress(e,t),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=kc(r,a),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=vc(this.node.current,"keydown",e=>{if("Enter"!==e.key||this.isPressing)return;this.removeEndListeners(),this.removeEndListeners=vc(this.node.current,"keyup",e=>{"Enter"===e.key&&this.checkPressEnd()&&Ac("up",(e,t)=>{const{onTap:n}=this.node.getProps();n&&hc.update(()=>n(e,t))})}),Ac("down",(e,t)=>{this.startPress(e,t)})}),t=vc(this.node.current,"blur",()=>{this.isPressing&&Ac("cancel",(e,t)=>this.cancelPress(e,t))});this.removeAccessibleListeners=kc(e,t)}}startPress(e,t){this.isPressing=!0;const{onTapStart:n,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&hc.update(()=>n(e,t))}checkPressEnd(){this.removeEndListeners(),this.isPressing=!1;return this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Tc()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&hc.update(()=>n(e,t))}mount(){const e=this.node.getProps(),t=wc(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),n=vc(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=kc(t,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}},focus:{Feature:class extends Ec{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(t){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=kc(vc(this.node.current,"focus",()=>this.onFocus()),vc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}},hover:{Feature:class extends Ec{mount(){this.unmount=kc(Pc(this.node,!0),Pc(this.node,!1))}unmount(){}}}};function Vc(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function qc(e,t,n){const r=e.getProps();return tc(r,t,void 0!==n?n:r.custom,function(e){const t={};return e.values.forEach((e,n)=>t[n]=e.get()),t}(e),function(e){const t={};return e.values.forEach((e,n)=>t[n]=e.getVelocity()),t}(e))}let Bc=cc,Wc=cc;const Hc=e=>1e3*e,Qc=e=>e/1e3,Gc=!1,Kc=e=>Array.isArray(e)&&"number"===typeof e[0];function Jc(e){return Boolean(!e||"string"===typeof e&&Yc[e]||Kc(e)||Array.isArray(e)&&e.every(Jc))}const $c=e=>{let[t,n,r,a]=e;return"cubic-bezier(".concat(t,", ").concat(n,", ").concat(r,", ").concat(a,")")},Yc={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:$c([0,.65,.55,1]),circOut:$c([.55,0,1,.45]),backIn:$c([.31,.01,.66,-.59]),backOut:$c([.33,1.53,.69,.99])};function Xc(e){if(e)return Kc(e)?$c(e):Array.isArray(e)?e.map(Xc):Yc[e]}const Zc=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e;function eu(e,t,n,r){if(e===t&&n===r)return cc;const a=t=>function(e,t,n,r,a){let i,s,o=0;do{s=t+(n-t)/2,i=Zc(s,r,a)-e,i>0?n=s:t=s}while(Math.abs(i)>1e-7&&++o<12);return s}(t,0,1,e,n);return e=>0===e||1===e?e:Zc(a(e),t,r)}const tu=eu(.42,0,1,1),nu=eu(0,0,.58,1),ru=eu(.42,0,.58,1),au=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,iu=e=>t=>1-e(1-t),su=e=>1-Math.sin(Math.acos(e)),ou=iu(su),lu=au(su),cu=eu(.33,1.53,.69,.99),uu=iu(cu),du=au(uu),hu={linear:cc,easeIn:tu,easeInOut:ru,easeOut:nu,circIn:su,circInOut:lu,circOut:ou,backIn:uu,backInOut:du,backOut:cu,anticipate:e=>(e*=2)<1?.5*uu(e):.5*(2-Math.pow(2,-10*(e-1)))},pu=e=>{if(Array.isArray(e)){Wc(4===e.length,"Cubic bezier arrays must contain four numerical values.");const[t,n,r,a]=e;return eu(t,n,r,a)}return"string"===typeof e?(Wc(void 0!==hu[e],"Invalid easing type '".concat(e,"'")),hu[e]):e},fu=(e,t)=>n=>Boolean(Sl(n)&&wl.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),mu=(e,t,n)=>r=>{if(!Sl(r))return r;const[a,i,s,o]=r.match(bl);return{[e]:parseFloat(a),[t]:parseFloat(i),[n]:parseFloat(s),alpha:void 0!==o?parseFloat(o):1}},gu=I(I({},ml),{},{transform:e=>Math.round((e=>fl(0,255,e))(e))}),yu={test:fu("rgb","red"),parse:mu("red","green","blue"),transform:e=>{let{red:t,green:n,blue:r,alpha:a=1}=e;return"rgba("+gu.transform(t)+", "+gu.transform(n)+", "+gu.transform(r)+", "+vl(gl.transform(a))+")"}};const vu={test:fu("#"),parse:function(e){let t="",n="",r="",a="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),a=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),a=e.substring(4,5),t+=t,n+=n,r+=r,a+=a),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:a?parseInt(a,16)/255:1}},transform:yu.transform},bu={test:fu("hsl","hue"),parse:mu("hue","saturation","lightness"),transform:e=>{let{hue:t,saturation:n,lightness:r,alpha:a=1}=e;return"hsla("+Math.round(t)+", "+_l.transform(vl(n))+", "+_l.transform(vl(r))+", "+vl(gl.transform(a))+")"}},xu={test:e=>yu.test(e)||vu.test(e)||bu.test(e),parse:e=>yu.test(e)?yu.parse(e):bu.test(e)?bu.parse(e):vu.parse(e),transform:e=>Sl(e)?e:e.hasOwnProperty("red")?yu.transform(e):bu.transform(e)},wu=(e,t,n)=>-n*e+n*t+e;function Su(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}const ku=(e,t,n)=>{const r=e*e;return Math.sqrt(Math.max(0,n*(t*t-r)+r))},ju=[vu,yu,bu];function _u(e){const t=(n=e,ju.find(e=>e.test(n)));var n;Wc(Boolean(t),"'".concat(e,"' is not an animatable color. Use the equivalent color code instead."));let r=t.parse(e);return t===bu&&(r=function(e){let{hue:t,saturation:n,lightness:r,alpha:a}=e;t/=360,n/=100,r/=100;let i=0,s=0,o=0;if(n){const e=r<.5?r*(1+n):r+n-r*n,a=2*r-e;i=Su(a,e,t+1/3),s=Su(a,e,t),o=Su(a,e,t-1/3)}else i=s=o=r;return{red:Math.round(255*i),green:Math.round(255*s),blue:Math.round(255*o),alpha:a}}(r)),r}const Cu=(e,t)=>{const n=_u(e),r=_u(t),a=I({},n);return e=>(a.red=ku(n.red,r.red,e),a.green=ku(n.green,r.green,e),a.blue=ku(n.blue,r.blue,e),a.alpha=wu(n.alpha,r.alpha,e),yu.transform(a))};const Nu={regex:/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,countKey:"Vars",token:"${v}",parse:cc},Tu={regex:xl,countKey:"Colors",token:"${c}",parse:xu.parse},Eu={regex:bl,countKey:"Numbers",token:"${n}",parse:ml.parse};function Pu(e,t){let{regex:n,countKey:r,token:a,parse:i}=t;const s=e.tokenised.match(n);s&&(e["num"+r]=s.length,e.tokenised=e.tokenised.replace(n,a),e.values.push(...s.map(i)))}function Iu(e){const t=e.toString(),n={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&Pu(n,Nu),Pu(n,Tu),Pu(n,Eu),n}function Au(e){return Iu(e).values}function Lu(e){const{values:t,numColors:n,numVars:r,tokenised:a}=Iu(e),i=t.length;return e=>{let t=a;for(let a=0;a<i;a++)t=a<r?t.replace(Nu.token,e[a]):a<r+n?t.replace(Tu.token,xu.transform(e[a])):t.replace(Eu.token,vl(e[a]));return t}}const Ou=e=>"number"===typeof e?0:e;const Ru={test:function(e){var t,n;return isNaN(e)&&Sl(e)&&((null===(t=e.match(bl))||void 0===t?void 0:t.length)||0)+((null===(n=e.match(xl))||void 0===n?void 0:n.length)||0)>0},parse:Au,createTransformer:Lu,getAnimatableNone:function(e){const t=Au(e);return Lu(e)(t.map(Ou))}},Du=(e,t)=>n=>"".concat(n>0?t:e);function Mu(e,t){return"number"===typeof e?n=>wu(e,t,n):xu.test(e)?Cu(e,t):e.startsWith("var(")?Du(e,t):Uu(e,t)}const zu=(e,t)=>{const n=[...e],r=n.length,a=e.map((e,n)=>Mu(e,t[n]));return e=>{for(let t=0;t<r;t++)n[t]=a[t](e);return n}},Fu=(e,t)=>{const n=I(I({},e),t),r={};for(const a in n)void 0!==e[a]&&void 0!==t[a]&&(r[a]=Mu(e[a],t[a]));return e=>{for(const t in r)n[t]=r[t](e);return n}},Uu=(e,t)=>{const n=Ru.createTransformer(t),r=Iu(e),a=Iu(t);return r.numVars===a.numVars&&r.numColors===a.numColors&&r.numNumbers>=a.numNumbers?kc(zu(r.values,a.values),n):(Bc(!0,"Complex values '".concat(e,"' and '").concat(t,"' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.")),Du(e,t))},Vu=(e,t,n)=>{const r=t-e;return 0===r?1:(n-e)/r},qu=(e,t)=>n=>wu(e,t,n);function Bu(e,t,n){const r=[],a=n||("number"===typeof(i=e[0])?qu:"string"===typeof i?xu.test(i)?Cu:Uu:Array.isArray(i)?zu:"object"===typeof i?Fu:qu);var i;const s=e.length-1;for(let o=0;o<s;o++){let n=a(e[o],e[o+1]);if(t){const e=Array.isArray(t)?t[o]||cc:t;n=kc(e,n)}r.push(n)}return r}function Wu(e,t){let{clamp:n=!0,ease:r,mixer:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=e.length;if(Wc(i===t.length,"Both input and output ranges must be the same length"),1===i)return()=>t[0];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const s=Bu(t,r,a),o=s.length,l=t=>{let n=0;if(o>1)for(;n<e.length-2&&!(t<e[n+1]);n++);const r=Vu(e[n],e[n+1],t);return s[n](r)};return n?t=>l(fl(e[0],e[i-1],t)):l}function Hu(e){const t=[0];return function(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const a=Vu(0,t,r);e.push(wu(n,1,a))}}(t,e.length-1),t}function Qu(e){let{duration:t=300,keyframes:n,times:r,ease:a="easeInOut"}=e;const i=(e=>Array.isArray(e)&&"number"!==typeof e[0])(a)?a.map(pu):pu(a),s={done:!1,value:n[0]},o=function(e,t){return e.map(e=>e*t)}(r&&r.length===n.length?r:Hu(n),t),l=Wu(o,n,{ease:Array.isArray(i)?i:(c=n,u=i,c.map(()=>u||ru).splice(0,c.length-1))});var c,u;return{calculatedDuration:t,next:e=>(s.value=l(e),s.done=e>=t,s)}}function Gu(e,t){return t?e*(1e3/t):0}function Ku(e,t,n){const r=Math.max(t-5,0);return Gu(n-e(r),t-r)}const Ju=.001;function $u(e){let t,n,{duration:r=800,bounce:a=.25,velocity:i=0,mass:s=1}=e;Bc(r<=Hc(10),"Spring duration must be 10 seconds or less");let o=1-a;o=fl(.05,1,o),r=fl(.01,10,Qc(r)),o<1?(t=e=>{const t=e*o,n=t*r,a=t-i,s=Xu(e,o),l=Math.exp(-n);return Ju-a/s*l},n=e=>{const n=e*o*r,a=n*i+i,s=Math.pow(o,2)*Math.pow(e,2)*r,l=Math.exp(-n),c=Xu(Math.pow(e,2),o);return(-t(e)+Ju>0?-1:1)*((a-s)*l)/c}):(t=e=>Math.exp(-e*r)*((e-i)*r+1)-.001,n=e=>Math.exp(-e*r)*(r*r*(i-e)));const l=function(e,t,n){let r=n;for(let a=1;a<Yu;a++)r-=e(r)/t(r);return r}(t,n,5/r);if(r=Hc(r),isNaN(l))return{stiffness:100,damping:10,duration:r};{const e=Math.pow(l,2)*s;return{stiffness:e,damping:2*o*Math.sqrt(s*e),duration:r}}}const Yu=12;function Xu(e,t){return e*Math.sqrt(1-t*t)}const Zu=["keyframes","restDelta","restSpeed"],ed=["duration","bounce"],td=["stiffness","damping","mass"];function nd(e,t){return t.some(t=>void 0!==e[t])}function rd(e){let{keyframes:t,restDelta:n,restSpeed:r}=e,a=C(e,Zu);const i=t[0],s=t[t.length-1],o={done:!1,value:i},{stiffness:l,damping:c,mass:u,duration:d,velocity:h,isResolvedFromDuration:p}=function(e){let t=I({velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1},e);if(!nd(e,td)&&nd(e,ed)){const n=$u(e);t=I(I(I({},t),n),{},{mass:1}),t.isResolvedFromDuration=!0}return t}(I(I({},a),{},{velocity:-Qc(a.velocity||0)})),f=h||0,m=c/(2*Math.sqrt(l*u)),g=s-i,y=Qc(Math.sqrt(l/u)),v=Math.abs(g)<5;let b;if(r||(r=v?.01:2),n||(n=v?.005:.5),m<1){const e=Xu(y,m);b=t=>{const n=Math.exp(-m*y*t);return s-n*((f+m*y*g)/e*Math.sin(e*t)+g*Math.cos(e*t))}}else if(1===m)b=e=>s-Math.exp(-y*e)*(g+(f+y*g)*e);else{const e=y*Math.sqrt(m*m-1);b=t=>{const n=Math.exp(-m*y*t),r=Math.min(e*t,300);return s-n*((f+m*y*g)*Math.sinh(r)+e*g*Math.cosh(r))/e}}return{calculatedDuration:p&&d||null,next:e=>{const t=b(e);if(p)o.done=e>=d;else{let a=f;0!==e&&(a=m<1?Ku(b,e,t):0);const i=Math.abs(a)<=r,l=Math.abs(s-t)<=n;o.done=i&&l}return o.value=o.done?s:t,o}}}function ad(e){let{keyframes:t,velocity:n=0,power:r=.8,timeConstant:a=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:l,max:c,restDelta:u=.5,restSpeed:d}=e;const h=t[0],p={done:!1,value:h},f=e=>void 0===l?c:void 0===c||Math.abs(l-e)<Math.abs(c-e)?l:c;let m=r*n;const g=h+m,y=void 0===o?g:o(g);y!==g&&(m=y-h);const v=e=>-m*Math.exp(-e/a),b=e=>y+v(e),x=e=>{const t=v(e),n=b(e);p.done=Math.abs(t)<=u,p.value=p.done?y:n};let w,S;const k=e=>{var t;(t=p.value,void 0!==l&&t<l||void 0!==c&&t>c)&&(w=e,S=rd({keyframes:[p.value,f(p.value)],velocity:Ku(b,e,p.value),damping:i,stiffness:s,restDelta:u,restSpeed:d}))};return k(0),{calculatedDuration:null,next:e=>{let t=!1;return S||void 0!==w||(t=!0,x(e),k(e)),void 0!==w&&e>w?S.next(e-w):(!t&&x(e),p)}}}const id=e=>{const t=t=>{let{timestamp:n}=t;return e(n)};return{start:()=>hc.update(t,!0),stop:()=>pc(t),now:()=>fc.isProcessing?fc.timestamp:performance.now()}};function sd(e){let t=0;let n=e.next(t);for(;!n.done&&t<2e4;)t+=50,n=e.next(t);return t>=2e4?1/0:t}const od=["autoplay","delay","driver","keyframes","type","repeat","repeatDelay","repeatType","onPlay","onStop","onComplete","onUpdate"],ld={decay:ad,inertia:ad,tween:Qu,keyframes:Qu,spring:rd};function cd(e){let t,n,{autoplay:r=!0,delay:a=0,driver:i=id,keyframes:s,type:o="keyframes",repeat:l=0,repeatDelay:c=0,repeatType:u="loop",onPlay:d,onStop:h,onComplete:p,onUpdate:f}=e,m=C(e,od),g=1,y=!1;const v=()=>{n=new Promise(e=>{t=e})};let b;v();const x=ld[o]||Qu;let w;x!==Qu&&"number"!==typeof s[0]&&(w=Wu([0,100],s,{clamp:!1}),s=[0,100]);const S=x(I(I({},m),{},{keyframes:s}));let k;"mirror"===u&&(k=x(I(I({},m),{},{keyframes:[...s].reverse(),velocity:-(m.velocity||0)})));let j="idle",_=null,N=null,T=null;null===S.calculatedDuration&&l&&(S.calculatedDuration=sd(S));const{calculatedDuration:E}=S;let P=1/0,A=1/0;null!==E&&(P=E+c,A=P*(l+1)-c);let L=0;const O=e=>{if(null===N)return;g>0&&(N=Math.min(N,e)),g<0&&(N=Math.min(e-A/g,N)),L=null!==_?_:Math.round(e-N)*g;const t=L-a*(g>=0?1:-1),n=g>=0?t<0:t>A;L=Math.max(t,0),"finished"===j&&null===_&&(L=A);let r=L,i=S;if(l){const e=Math.min(L,A)/P;let t=Math.floor(e),n=e%1;!n&&e>=1&&(n=1),1===n&&t--,t=Math.min(t,l+1);Boolean(t%2)&&("reverse"===u?(n=1-n,c&&(n-=c/P)):"mirror"===u&&(i=k)),r=fl(0,1,n)*P}const o=n?{done:!1,value:s[0]}:i.next(r);w&&(o.value=w(o.value));let{done:d}=o;n||null===E||(d=g>=0?L>=A:L<=0);const h=null===_&&("finished"===j||"running"===j&&d);return f&&f(o.value),h&&M(),o},R=()=>{b&&b.stop(),b=void 0},D=()=>{j="idle",R(),t(),v(),N=T=null},M=()=>{j="finished",p&&p(),R(),t()},z=()=>{if(y)return;b||(b=i(O));const e=b.now();d&&d(),null!==_?N=e-_:N&&"finished"!==j||(N=e),"finished"===j&&v(),T=N,_=null,j="running",b.start()};r&&z();const F={then:(e,t)=>n.then(e,t),get time(){return Qc(L)},set time(e){e=Hc(e),L=e,null===_&&b&&0!==g?N=b.now()-e/g:_=e},get duration(){const e=null===S.calculatedDuration?sd(S):S.calculatedDuration;return Qc(e)},get speed(){return g},set speed(e){e!==g&&b&&(g=e,F.time=Qc(L))},get state(){return j},play:z,pause:()=>{j="paused",_=L},stop:()=>{y=!0,"idle"!==j&&(j="idle",h&&h(),D())},cancel:()=>{null!==T&&O(T),D()},complete:()=>{j="finished"},sample:e=>(N=0,O(e))};return F}const ud=["onUpdate","onComplete"],dd=function(e){let t;return()=>(void 0===t&&(t=e()),t)}(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),hd=new Set(["opacity","clipPath","filter","transform","backgroundColor"]);function pd(e,t,n){let{onUpdate:r,onComplete:a}=n,i=C(n,ud);if(!(dd()&&hd.has(t)&&!i.repeatDelay&&"mirror"!==i.repeatType&&0!==i.damping&&"inertia"!==i.type))return!1;let s,o,l=!1,c=!1;const u=()=>{o=new Promise(e=>{s=e})};u();let{keyframes:d,duration:h=300,ease:p,times:f}=i;if(((e,t)=>"spring"===t.type||"backgroundColor"===e||!Jc(t.ease))(t,i)){const e=cd(I(I({},i),{},{repeat:0,delay:0}));let t={done:!1,value:d[0]};const n=[];let r=0;for(;!t.done&&r<2e4;)t=e.sample(r),n.push(t.value),r+=10;f=void 0,d=n,h=r-10,p="linear"}const m=function(e,t,n){let{delay:r=0,duration:a,repeat:i=0,repeatType:s="loop",ease:o,times:l}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const c={[t]:n};l&&(c.offset=l);const u=Xc(o);return Array.isArray(u)&&(c.easing=u),e.animate(c,{delay:r,duration:a,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:i+1,direction:"reverse"===s?"alternate":"normal"})}(e.owner.current,t,d,I(I({},i),{},{duration:h,ease:p,times:f})),g=()=>{c=!1,m.cancel()},y=()=>{c=!0,hc.update(g),s(),u()};m.onfinish=()=>{c||(e.set(function(e,t){let{repeat:n,repeatType:r="loop"}=t;return e[n&&"loop"!==r&&n%2===1?0:e.length-1]}(d,i)),a&&a(),y())};return{then:(e,t)=>o.then(e,t),attachTimeline:e=>(m.timeline=e,m.onfinish=null,cc),get time(){return Qc(m.currentTime||0)},set time(e){m.currentTime=Hc(e)},get speed(){return m.playbackRate},set speed(e){m.playbackRate=e},get duration(){return Qc(h)},play:()=>{l||(m.play(),pc(g))},pause:()=>m.pause(),stop:()=>{if(l=!0,"idle"===m.playState)return;const{currentTime:t}=m;if(t){const n=cd(I(I({},i),{},{autoplay:!1}));e.setWithVelocity(n.sample(t-10).value,n.sample(t).value,10)}y()},complete:()=>{c||m.finish()},cancel:y}}const fd={type:"spring",stiffness:500,damping:25,restSpeed:10},md={type:"keyframes",duration:.8},gd={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},yd=(e,t)=>{let{keyframes:n}=t;return n.length>2?md:il.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===n[1]?2*Math.sqrt(550):30,restSpeed:10}:fd:gd},vd=(e,t)=>"zIndex"!==e&&(!("number"!==typeof t&&!Array.isArray(t))||!("string"!==typeof t||!Ru.test(t)&&"0"!==t||t.startsWith("url("))),bd=new Set(["brightness","contrast","saturate","opacity"]);function xd(e){const[t,n]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[r]=n.match(bl)||[];if(!r)return e;const a=n.replace(r,"");let i=bd.has(t)?1:0;return r!==n&&(i*=100),t+"("+i+a+")"}const wd=/([a-z-]*)\(.*?\)/g,Sd=I(I({},Ru),{},{getAnimatableNone:e=>{const t=e.match(wd);return t?t.map(xd).join(" "):e}}),kd=I(I({},Il),{},{color:xu,backgroundColor:xu,outlineColor:xu,fill:xu,stroke:xu,borderColor:xu,borderTopColor:xu,borderRightColor:xu,borderBottomColor:xu,borderLeftColor:xu,filter:Sd,WebkitFilter:Sd}),jd=e=>kd[e];function _d(e,t){let n=jd(e);return n!==Sd&&(n=Ru),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const Cd=e=>/^0[^.\s]+$/.test(e);function Nd(e){return"number"===typeof e?0===e:null!==e?"none"===e||"0"===e||Cd(e):void 0}const Td=["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from","elapsed"];function Ed(e,t){return e[t]||e.default||e}const Pd=!1,Id=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return a=>{const i=Ed(r,e)||{},s=i.delay||r.delay||0;let{elapsed:o=0}=r;o-=Hc(s);const l=function(e,t,n,r){const a=vd(t,n);let i;i=Array.isArray(n)?[...n]:[null,n];const s=void 0!==r.from?r.from:e.get();let o;const l=[];for(let c=0;c<i.length;c++)null===i[c]&&(i[c]=0===c?s:i[c-1]),Nd(i[c])&&l.push(c),"string"===typeof i[c]&&"none"!==i[c]&&"0"!==i[c]&&(o=i[c]);if(a&&l.length&&o)for(let c=0;c<l.length;c++)i[l[c]]=_d(t,o);return i}(t,e,n,i),c=l[0],u=l[l.length-1],d=vd(e,c),h=vd(e,u);Bc(d===h,"You are trying to animate ".concat(e,' from "').concat(c,'" to "').concat(u,'". ').concat(c," is not an animatable value - to enable this animation set ").concat(c," to a value animatable to ").concat(u," via the `style` property."));let p=I(I({keyframes:l,velocity:t.getVelocity(),ease:"easeOut"},i),{},{delay:-o,onUpdate:e=>{t.set(e),i.onUpdate&&i.onUpdate(e)},onComplete:()=>{a(),i.onComplete&&i.onComplete()}});if(function(e){let{when:t,delay:n,delayChildren:r,staggerChildren:a,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:l,from:c,elapsed:u}=e,d=C(e,Td);return!!Object.keys(d).length}(i)||(p=I(I({},p),yd(e,p))),p.duration&&(p.duration=Hc(p.duration)),p.repeatDelay&&(p.repeatDelay=Hc(p.repeatDelay)),!d||!h||Gc||!1===i.type||Pd)return function(e){let{keyframes:t,delay:n,onUpdate:r,onComplete:a}=e;const i=()=>(r&&r(t[t.length-1]),a&&a(),{time:0,speed:1,duration:0,play:cc,pause:cc,stop:cc,then:e=>(e(),Promise.resolve()),cancel:cc,complete:cc});return n?cd({keyframes:[0,1],duration:0,delay:n,onComplete:i}):i()}(Gc?I(I({},p),{},{delay:0}):p);if(!r.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const n=pd(t,e,p);if(n)return n}return cd(p)}};function Ad(e){return Boolean(ol(e)&&e.add)}const Ld=e=>/^\-?\d*\.?\d+$/.test(e);function Od(e,t){-1===e.indexOf(t)&&e.push(t)}function Rd(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class Dd{constructor(){this.subscriptions=[]}add(e){return Od(this.subscriptions,e),()=>Rd(this.subscriptions,e)}notify(e,t,n){const r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](e,t,n);else for(let a=0;a<r;a++){const r=this.subscriptions[a];r&&r(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Md={current:void 0};class zd{constructor(e){var t=this;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r;this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t.prev=t.current,t.current=e;const{delta:r,timestamp:a}=fc;t.lastUpdated!==a&&(t.timeDelta=r,t.lastUpdated=a,hc.postRender(t.scheduleVelocityCheck)),t.prev!==t.current&&t.events.change&&t.events.change.notify(t.current),t.events.velocityChange&&t.events.velocityChange.notify(t.getVelocity()),n&&t.events.renderRequest&&t.events.renderRequest.notify(t.current)},this.scheduleVelocityCheck=()=>hc.postRender(this.velocityCheck),this.velocityCheck=e=>{let{timestamp:t}=e;t!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=(r=this.current,!isNaN(parseFloat(r))),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Dd);const n=this.events[e].add(t);return"change"===e?()=>{n(),hc.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)}setWithVelocity(e,t,n){this.set(t),this.prev=e,this.timeDelta=n}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return Md.current&&Md.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?Gu(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Fd(e,t){return new zd(e,t)}const Ud=e=>t=>t.test(e),Vd=[ml,Cl,_l,jl,Tl,Nl,{test:e=>"auto"===e,parse:e=>e}],qd=e=>Vd.find(Ud(e)),Bd=[...Vd,xu,Ru],Wd=e=>Bd.find(Ud(e)),Hd=["transitionEnd","transition"];function Qd(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Fd(n))}function Gd(e,t){const n=qc(e,t);let r=n?e.makeTargetAnimatable(n,!1):{},{transitionEnd:a={},transition:i={}}=r,s=C(r,Hd);s=I(I({},s),a);for(const o in s){Qd(e,o,ac(s[o]))}}function Kd(e,t){if(!t)return;return(t[e]||t.default||t).from}const Jd=["transition","transitionEnd"];function $d(e,t){let{protectedKeys:n,needsAnimating:r}=e;const a=n.hasOwnProperty(t)&&!0!==r[t];return r[t]=!1,a}function Yd(e,t){const n=e.get();if(!Array.isArray(t))return n!==t;for(let r=0;r<t.length;r++)if(t[r]!==n)return!0}function Xd(e,t){let{delay:n=0,transitionOverride:r,type:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=e.makeTargetAnimatable(t),{transition:s=e.getDefaultTransition(),transitionEnd:o}=i,l=C(i,Jd);const c=e.getValue("willChange");r&&(s=r);const u=[],d=a&&e.animationState&&e.animationState.getState()[a];for(const h in l){const t=e.getValue(h),r=l[h];if(!t||void 0===r||d&&$d(d,h))continue;const a=I({delay:n,elapsed:0},Ed(s||{},h));if(window.HandoffAppearAnimations){const n=e.getProps()[Mo];if(n){const e=window.HandoffAppearAnimations(n,h,t,hc);null!==e&&(a.elapsed=e,a.isHandoff=!0)}}let i=!a.isHandoff&&!Yd(t,r);if("spring"===a.type&&(t.getVelocity()||a.velocity)&&(i=!1),t.animation&&(i=!1),i)continue;t.start(Id(h,t,r,e.shouldReduceMotion&&il.has(h)?{type:!1}:a));const o=t.animation;Ad(c)&&(c.add(h),o.then(()=>c.remove(h))),u.push(o)}return o&&Promise.all(u).then(()=>{o&&Gd(e,o)}),u}function Zd(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=qc(e,t,n.custom);let{transition:a=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(a=n.transitionOverride);const i=r?()=>Promise.all(Xd(e,r,n)):()=>Promise.resolve(),s=e.variantChildren&&e.variantChildren.size?function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{delayChildren:i=0,staggerChildren:s,staggerDirection:o}=a;return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,i=arguments.length>5?arguments[5]:void 0;const s=[],o=(e.variantChildren.size-1)*r,l=1===a?function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*r}:function(){return o-(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*r};return Array.from(e.variantChildren).sort(eh).forEach((e,r)=>{e.notify("AnimationStart",t),s.push(Zd(e,t,I(I({},i),{},{delay:n+l(r)})).then(()=>e.notify("AnimationComplete",t)))}),Promise.all(s)}(e,t,i+r,s,o,n)}:()=>Promise.resolve(),{when:o}=a;if(o){const[e,t]="beforeChildren"===o?[i,s]:[s,i];return e().then(()=>t())}return Promise.all([i(),s(n.delay)])}function eh(e,t){return e.sortNodePosition(t)}const th=["transition","transitionEnd"],nh=[...Vo].reverse(),rh=Vo.length;function ah(e){return t=>Promise.all(t.map(t=>{let{animation:n,options:r}=t;return function(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.notify("AnimationStart",t),Array.isArray(t)){const a=t.map(t=>Zd(e,t,r));n=Promise.all(a)}else if("string"===typeof t)n=Zd(e,t,r);else{const a="function"===typeof t?qc(e,t,r.custom):t;n=Promise.all(Xd(e,a,r))}return n.then(()=>e.notify("AnimationComplete",t))}(e,n,r)}))}function ih(e){let t=ah(e);const n={animate:oh(!0),whileInView:oh(),whileHover:oh(),whileTap:oh(),whileDrag:oh(),whileFocus:oh(),exit:oh()};let r=!0;const a=(t,n)=>{const r=qc(e,n);if(r){const{transition:e,transitionEnd:n}=r,a=C(r,th);t=I(I(I({},t),a),n)}return t};function i(i,s){const o=e.getProps(),l=e.getVariantContext(!0)||{},c=[],u=new Set;let d={},h=1/0;for(let t=0;t<rh;t++){const p=nh[t],f=n[p],m=void 0!==o[p]?o[p]:l[p],g=Fo(m),y=p===s?f.isActive:null;!1===y&&(h=t);let v=m===l[p]&&m!==o[p]&&g;if(v&&r&&e.manuallyAnimateOnMount&&(v=!1),f.protectedKeys=I({},d),!f.isActive&&null===y||!m&&!f.prevProp||Uo(m)||"boolean"===typeof m)continue;let b=sh(f.prevProp,m)||p===s&&f.isActive&&!v&&g||t>h&&g,x=!1;const w=Array.isArray(m)?m:[m];let S=w.reduce(a,{});!1===y&&(S={});const{prevResolvedValues:k={}}=f,j=I(I({},k),S),_=e=>{b=!0,u.has(e)&&(x=!0,u.delete(e)),f.needsAnimating[e]=!0};for(const e in j){const t=S[e],n=k[e];if(d.hasOwnProperty(e))continue;let r=!1;r=rc(t)&&rc(n)?!Vc(t,n):t!==n,r?void 0!==t?_(e):u.add(e):void 0!==t&&u.has(e)?_(e):f.protectedKeys[e]=!0}f.prevProp=m,f.prevResolvedValues=S,f.isActive&&(d=I(I({},d),S)),r&&e.blockInitialAnimation&&(b=!1),!b||v&&!x||c.push(...w.map(e=>({animation:e,options:I({type:p},i)})))}if(u.size){const t={};u.forEach(n=>{const r=e.getBaseTarget(n);void 0!==r&&(t[n]=r)}),c.push({animation:t})}let p=Boolean(c.length);return!r||!1!==o.initial&&o.initial!==o.animate||e.manuallyAnimateOnMount||(p=!1),r=!1,p?t(c):Promise.resolve()}return{animateChanges:i,setActive:function(t,r,a){var s;if(n[t].isActive===r)return Promise.resolve();null===(s=e.variantChildren)||void 0===s||s.forEach(e=>{var n;return null===(n=e.animationState)||void 0===n?void 0:n.setActive(t,r)}),n[t].isActive=r;const o=i(a,t);for(const e in n)n[e].protectedKeys={};return o},setAnimateFunction:function(n){t=n(e)},getState:()=>n}}function sh(e,t){return"string"===typeof t?t!==e:!!Array.isArray(t)&&!Vc(t,e)}function oh(){return{isActive:arguments.length>0&&void 0!==arguments[0]&&arguments[0],protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}let lh=0;const ch={animation:{Feature:class extends Ec{constructor(e){super(e),e.animationState||(e.animationState=ih(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),Uo(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}},exit:{Feature:class extends Ec{constructor(){super(...arguments),this.id=lh++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t,custom:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const a=this.node.animationState.setActive("exit",!e,{custom:null!==n&&void 0!==n?n:this.node.getProps().custom});t&&!e&&a.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}}},uh=(e,t)=>Math.abs(e-t);class dh{constructor(e,t){let{transformPagePoint:n,contextWindow:r,dragSnapToOrigin:a=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=fh(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,n=function(e,t){const n=uh(e.x,t.x),r=uh(e.y,t.y);return Math.sqrt(n**2+r**2)}(e.offset,{x:0,y:0})>=3;if(!t&&!n)return;const{point:r}=e,{timestamp:a}=fc;this.history.push(I(I({},r),{},{timestamp:a}));const{onStart:i,onMove:s}=this.handlers;t||(i&&i(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),s&&s(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=hh(t,this.transformPagePoint),hc.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();const{onEnd:n,onSessionEnd:r,resumeAnimation:a}=this.handlers;if(this.dragSnapToOrigin&&a&&a(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const i=fh("pointercancel"===e.type?this.lastMoveEventInfo:hh(t,this.transformPagePoint),this.history);this.startEvent&&n&&n(e,i),r&&r(e,i)},!bc(e))return;this.dragSnapToOrigin=a,this.handlers=t,this.transformPagePoint=n,this.contextWindow=r||window;const i=hh(xc(e),this.transformPagePoint),{point:s}=i,{timestamp:o}=fc;this.history=[I(I({},s),{},{timestamp:o})];const{onSessionStart:l}=t;l&&l(e,fh(i,this.history)),this.removeListeners=kc(wc(this.contextWindow,"pointermove",this.handlePointerMove),wc(this.contextWindow,"pointerup",this.handlePointerUp),wc(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),pc(this.updatePoint)}}function hh(e,t){return t?{point:t(e.point)}:e}function ph(e,t){return{x:e.x-t.x,y:e.y-t.y}}function fh(e,t){let{point:n}=e;return{point:n,delta:ph(n,gh(t)),offset:ph(n,mh(t)),velocity:yh(t,.1)}}function mh(e){return e[0]}function gh(e){return e[e.length-1]}function yh(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const a=gh(e);for(;n>=0&&(r=e[n],!(a.timestamp-r.timestamp>Hc(t)));)n--;if(!r)return{x:0,y:0};const i=Qc(a.timestamp-r.timestamp);if(0===i)return{x:0,y:0};const s={x:(a.x-r.x)/i,y:(a.y-r.y)/i};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function vh(e){return e.max-e.min}function bh(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.01;return Math.abs(e-t)<=n}function xh(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;e.origin=r,e.originPoint=wu(t.min,t.max,e.origin),e.scale=vh(n)/vh(t),(bh(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=wu(n.min,n.max,e.origin)-e.originPoint,(bh(e.translate)||isNaN(e.translate))&&(e.translate=0)}function wh(e,t,n,r){xh(e.x,t.x,n.x,r?r.originX:void 0),xh(e.y,t.y,n.y,r?r.originY:void 0)}function Sh(e,t,n){e.min=n.min+t.min,e.max=e.min+vh(t)}function kh(e,t,n){e.min=t.min-n.min,e.max=e.min+vh(t)}function jh(e,t,n){kh(e.x,t.x,n.x),kh(e.y,t.y,n.y)}function _h(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function Ch(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}const Nh=.35;function Th(e,t,n){return{min:Eh(e,t),max:Eh(e,n)}}function Eh(e,t){return"number"===typeof e?e:e[t]||0}const Ph=()=>({x:{min:0,max:0},y:{min:0,max:0}});function Ih(e){return[e("x"),e("y")]}function Ah(e){let{top:t,left:n,right:r,bottom:a}=e;return{x:{min:n,max:r},y:{min:t,max:a}}}function Lh(e){return void 0===e||1===e}function Oh(e){let{scale:t,scaleX:n,scaleY:r}=e;return!Lh(t)||!Lh(n)||!Lh(r)}function Rh(e){return Oh(e)||Dh(e)||e.z||e.rotate||e.rotateX||e.rotateY}function Dh(e){return Mh(e.x)||Mh(e.y)}function Mh(e){return e&&"0%"!==e}function zh(e,t,n){return n+t*(e-n)}function Fh(e,t,n,r,a){return void 0!==a&&(e=zh(e,a,r)),zh(e,n,r)+t}function Uh(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;e.min=Fh(e.min,t,n,r,a),e.max=Fh(e.max,t,n,r,a)}function Vh(e,t){let{x:n,y:r}=t;Uh(e.x,n.translate,n.scale,n.originPoint),Uh(e.y,r.translate,r.scale,r.originPoint)}function qh(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function Bh(e,t){e.min=e.min+t,e.max=e.max+t}function Wh(e,t,n){let[r,a,i]=n;const s=void 0!==t[i]?t[i]:.5,o=wu(e.min,e.max,s);Uh(e,t[r],t[a],o,t.scale)}const Hh=["x","scaleX","originX"],Qh=["y","scaleY","originY"];function Gh(e,t){Wh(e.x,t,Hh),Wh(e.y,t,Qh)}function Kh(e,t){return Ah(function(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}(e.getBoundingClientRect(),t))}const Jh=e=>{let{current:t}=e;return t?t.ownerDocument.defaultView:null},$h=new WeakMap;class Yh{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.visualElement=e}start(e){let{snapToCursor:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{presenceContext:n}=this.visualElement;if(n&&!1===n.isPresent)return;const{dragSnapToOrigin:r}=this.getProps();this.panSession=new dh(e,{onSessionStart:e=>{const{dragSnapToOrigin:n}=this.getProps();n?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(xc(e,"page").point)},onStart:(e,t)=>{const{drag:n,dragPropagation:r,onDragStart:a}=this.getProps();if(n&&!r&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Nc(n),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ih(e=>{let t=this.getAxisMotionValue(e).get()||0;if(_l.test(t)){const{projection:n}=this.visualElement;if(n&&n.layout){const r=n.layout.layoutBox[e];if(r){t=vh(r)*(parseFloat(t)/100)}}}this.originPoint[e]=t}),a&&hc.update(()=>a(e,t),!1,!0);const{animationState:i}=this.visualElement;i&&i.setActive("whileDrag",!0)},onMove:(e,t)=>{const{dragPropagation:n,dragDirectionLock:r,onDirectionLock:a,onDrag:i}=this.getProps();if(!n&&!this.openGlobalLock)return;const{offset:s}=t;if(r&&null===this.currentDirection)return this.currentDirection=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(s),void(null!==this.currentDirection&&a&&a(this.currentDirection));this.updateAxis("x",t.point,s),this.updateAxis("y",t.point,s),this.visualElement.render(),i&&i(e,t)},onSessionEnd:(e,t)=>this.stop(e,t),resumeAnimation:()=>Ih(e=>{var t;return"paused"===this.getAnimationState(e)&&(null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.play())})},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:r,contextWindow:Jh(this.visualElement)})}stop(e,t){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:r}=t;this.startAnimation(r);const{onDragEnd:a}=this.getProps();a&&hc.update(()=>a(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:r}=this.getProps();if(!n||!Xh(e,r,this.currentDirection))return;const a=this.getAxisMotionValue(e);let i=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(i=function(e,t,n){let{min:r,max:a}=t;return void 0!==r&&e<r?e=n?wu(r,e,n.min):Math.max(e,r):void 0!==a&&e>a&&(e=n?wu(a,e,n.max):Math.min(e,a)),e}(i,this.constraints[e],this.elastic[e])),a.set(i)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null===(e=this.visualElement.projection)||void 0===e?void 0:e.layout,a=this.constraints;t&&zo(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!t||!r)&&function(e,t){let{top:n,left:r,bottom:a,right:i}=t;return{x:_h(e.x,r,i),y:_h(e.y,n,a)}}(r.layoutBox,t),this.elastic=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nh;return!1===e?e=0:!0===e&&(e=Nh),{x:Th(e,"left","right"),y:Th(e,"top","bottom")}}(n),a!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Ih(e=>{this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(r.layoutBox[e],this.constraints[e]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!zo(e))return!1;const n=e.current;Wc(null!==n,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");const{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const a=function(e,t,n){const r=Kh(e,n),{scroll:a}=t;return a&&(Bh(r.x,a.offset.x),Bh(r.y,a.offset.y)),r}(n,r.root,this.visualElement.getTransformPagePoint());let i=function(e,t){return{x:Ch(e.x,t.x),y:Ch(e.y,t.y)}}(r.layout.layoutBox,a);if(t){const e=t(function(e){let{x:t,y:n}=e;return{top:n.min,right:t.max,bottom:n.max,left:t.min}}(i));this.hasMutatedConstraints=!!e,e&&(i=Ah(e))}return i}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:r,dragTransition:a,dragSnapToOrigin:i,onDragTransitionEnd:s}=this.getProps(),o=this.constraints||{},l=Ih(s=>{if(!Xh(s,t,this.currentDirection))return;let l=o&&o[s]||{};i&&(l={min:0,max:0});const c=r?200:1e6,u=r?40:1e7,d=I(I({type:"inertia",velocity:n?e[s]:0,bounceStiffness:c,bounceDamping:u,timeConstant:750,restDelta:1,restSpeed:10},a),l);return this.startAxisValueAnimation(s,d)});return Promise.all(l).then(s)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return n.start(Id(e,n,0,t))}stopAnimation(){Ih(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ih(e=>{var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.pause()})}getAnimationState(e){var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.state}getAxisMotionValue(e){const t="_drag"+e.toUpperCase(),n=this.visualElement.getProps(),r=n[t];return r||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){Ih(t=>{const{drag:n}=this.getProps();if(!Xh(t,n,this.currentDirection))return;const{projection:r}=this.visualElement,a=this.getAxisMotionValue(t);if(r&&r.layout){const{min:n,max:i}=r.layout.layoutBox[t];a.set(e[t]-wu(n,i,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!zo(t)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Ih(e=>{const t=this.getAxisMotionValue(e);if(t){const n=t.get();r[e]=function(e,t){let n=.5;const r=vh(e),a=vh(t);return a>r?n=Vu(t.min,t.max-r,e.min):r>a&&(n=Vu(e.min,e.max-a,t.min)),fl(0,1,n)}({min:n,max:n},this.constraints[e])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Ih(t=>{if(!Xh(t,e,null))return;const n=this.getAxisMotionValue(t),{min:a,max:i}=this.constraints[t];n.set(wu(a,i,r[t]))})}addListeners(){if(!this.visualElement.current)return;$h.set(this.visualElement,this);const e=wc(this.visualElement.current,"pointerdown",e=>{const{drag:t,dragListener:n=!0}=this.getProps();t&&n&&this.start(e)}),t=()=>{const{dragConstraints:e}=this.getProps();zo(e)&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,r=n.addEventListener("measure",t);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),t();const a=vc(window,"resize",()=>this.scalePositionWithinConstraints()),i=n.addEventListener("didUpdate",e=>{let{delta:t,hasLayoutChanged:n}=e;this.isDragging&&n&&(Ih(e=>{const n=this.getAxisMotionValue(e);n&&(this.originPoint[e]+=t[e].translate,n.set(n.get()+t[e].translate))}),this.visualElement.render())});return()=>{a(),e(),r(),i&&i()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:a=!1,dragElastic:i=Nh,dragMomentum:s=!0}=e;return I(I({},e),{},{drag:t,dragDirectionLock:n,dragPropagation:r,dragConstraints:a,dragElastic:i,dragMomentum:s})}}function Xh(e,t,n){return(!0===t||t===e)&&(null===n||n===e)}const Zh=e=>(t,n)=>{e&&hc.update(()=>e(t,n))};const ep={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function tp(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const np={correct:(e,t)=>{if(!t.target)return e;if("string"===typeof e){if(!Cl.test(e))return e;e=parseFloat(e)}const n=tp(e,t.target.x),r=tp(e,t.target.y);return"".concat(n,"% ").concat(r,"%")}},rp={correct:(e,t)=>{let{treeScale:n,projectionDelta:r}=t;const a=e,i=Ru.parse(e);if(i.length>5)return a;const s=Ru.createTransformer(e),o="number"!==typeof i[0]?1:0,l=r.x.scale*n.x,c=r.y.scale*n.y;i[0+o]/=l,i[1+o]/=c;const u=wu(l,c,.5);return"number"===typeof i[2+o]&&(i[2+o]/=u),"number"===typeof i[3+o]&&(i[3+o]/=u),s(i)}};class ap extends r.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:r}=this.props,{projection:a}=e;var i;i=sp,Object.assign(rl,i),a&&(t.group&&t.group.add(a),n&&n.register&&r&&n.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions(I(I({},a.options),{},{onExitComplete:()=>this.safeToRemove()}))),ep.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:r,isPresent:a}=this.props,i=n.projection;return i?(i.isPresent=a,r||e.layoutDependency!==t||void 0===t?i.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?i.promote():i.relegate()||hc.postRender(()=>{const e=i.getStack();e&&e.members.length||this.safeToRemove()})),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function ip(e){const[t,n]=function(){const e=(0,r.useContext)(Ao);if(null===e)return[!0,null];const{isPresent:t,onExitComplete:n,register:a}=e,i=(0,r.useId)();return(0,r.useEffect)(()=>a(i),[]),!t&&n?[!1,()=>n&&n(i)]:[!0]}(),a=(0,r.useContext)(Jo);return r.createElement(ap,I(I({},e),{},{layoutGroup:a,switchLayoutGroup:(0,r.useContext)($o),isPresent:t,safeToRemove:n}))}const sp={borderRadius:I(I({},np),{},{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:np,borderTopRightRadius:np,borderBottomLeftRadius:np,borderBottomRightRadius:np,boxShadow:rp},op=["TopLeft","TopRight","BottomLeft","BottomRight"],lp=op.length,cp=e=>"string"===typeof e?parseFloat(e):e,up=e=>"number"===typeof e||Cl.test(e);function dp(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const hp=fp(0,.5,ou),pp=fp(.5,.95,cc);function fp(e,t,n){return r=>r<e?0:r>t?1:n(Vu(e,t,r))}function mp(e,t){e.min=t.min,e.max=t.max}function gp(e,t){mp(e.x,t.x),mp(e.y,t.y)}function yp(e,t,n,r,a){return e=zh(e-=t,1/n,r),void 0!==a&&(e=zh(e,1/a,r)),e}function vp(e,t,n,r,a){let[i,s,o]=n;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e;_l.test(t)&&(t=parseFloat(t),t=wu(s.min,s.max,t/100)-s.min);if("number"!==typeof t)return;let o=wu(i.min,i.max,r);e===i&&(o-=t),e.min=yp(e.min,t,n,o,a),e.max=yp(e.max,t,n,o,a)}(e,t[i],t[s],t[o],t.scale,r,a)}const bp=["x","scaleX","originX"],xp=["y","scaleY","originY"];function wp(e,t,n,r){vp(e.x,t,bp,n?n.x:void 0,r?r.x:void 0),vp(e.y,t,xp,n?n.y:void 0,r?r.y:void 0)}function Sp(e){return 0===e.translate&&1===e.scale}function kp(e){return Sp(e.x)&&Sp(e.y)}function jp(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function _p(e){return vh(e.x)/vh(e.y)}class Cp{constructor(){this.members=[]}add(e){Od(this.members,e),e.scheduleRender()}remove(e){if(Rd(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex(t=>e===t);if(0===t)return!1;let n;for(let r=t;r>=0;r--){const e=this.members[r];if(!1!==e.isPresent){n=e;break}}return!!n&&(this.promote(n),!0)}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;!1===r&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Np(e,t,n){let r="";const a=e.x.translate/t.x,i=e.y.translate/t.y;if((a||i)&&(r="translate3d(".concat(a,"px, ").concat(i,"px, 0) ")),1===t.x&&1===t.y||(r+="scale(".concat(1/t.x,", ").concat(1/t.y,") ")),n){const{rotate:e,rotateX:t,rotateY:a}=n;e&&(r+="rotate(".concat(e,"deg) ")),t&&(r+="rotateX(".concat(t,"deg) ")),a&&(r+="rotateY(".concat(a,"deg) "))}const s=e.x.scale*t.x,o=e.y.scale*t.y;return 1===s&&1===o||(r+="scale(".concat(s,", ").concat(o,")")),r||"none"}const Tp=(e,t)=>e.depth-t.depth;class Ep{constructor(){this.children=[],this.isDirty=!1}add(e){Od(this.children,e),this.isDirty=!0}remove(e){Rd(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Tp),this.isDirty=!1,this.children.forEach(e)}}const Pp=["","X","Y","Z"],Ip={visibility:"hidden"};let Ap=0;const Lp={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function Op(e){let{attachResizeListener:t,defaultParent:n,measureScroll:r,checkIsScrollRoot:a,resetTransform:i}=e;return class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===n||void 0===n?void 0:n();this.id=Ap++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{var e;this.projectionUpdateScheduled=!1,Lp.totalNodes=Lp.resolvedTargetDeltas=Lp.recalculatedProjection=0,this.nodes.forEach(Mp),this.nodes.forEach(Wp),this.nodes.forEach(Hp),this.nodes.forEach(zp),e=Lp,window.MotionDebug&&window.MotionDebug.record(e)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=t?t.root||t:this,this.path=t?[...t.path,t]:[],this.parent=t,this.depth=t?t.depth+1:0;for(let n=0;n<this.path.length;n++)this.path[n].shouldResetTransform=!0;this.root===this&&(this.nodes=new Ep)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new Dd),this.eventHandlers.get(e).add(t)}notifyListeners(e){const t=this.eventHandlers.get(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];t&&t.notify(...r)}hasListeners(e){return this.eventHandlers.has(e)}mount(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.root.hasTreeAnimated;if(this.instance)return;var r;this.isSVG=(r=e)instanceof SVGElement&&"svg"!==r.tagName,this.instance=e;const{layoutId:a,layout:i,visualElement:s}=this.options;if(s&&!s.current&&s.mount(e),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),n&&(i||a)&&(this.isLayoutDirty=!0),t){let n;const r=()=>this.root.updateBlockedByResize=!1;t(e,()=>{this.root.updateBlockedByResize=!0,n&&n(),n=function(e,t){const n=performance.now(),r=a=>{let{timestamp:i}=a;const s=i-n;s>=t&&(pc(r),e(s-t))};return hc.read(r,!0),()=>pc(r)}(r,250),ep.hasAnimatedSinceResize&&(ep.hasAnimatedSinceResize=!1,this.nodes.forEach(Bp))})}a&&this.root.registerSharedNode(a,this),!1!==this.options.animate&&s&&(a||i)&&this.addEventListener("didUpdate",e=>{let{delta:t,hasLayoutChanged:n,hasRelativeTargetChanged:r,layout:a}=e;if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const i=this.options.transition||s.getDefaultTransition()||Yp,{onLayoutAnimationStart:o,onLayoutAnimationComplete:l}=s.getProps(),c=!this.targetLayout||!jp(this.targetLayout,a)||r,u=!n&&r;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||u||n&&(c||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(t,u);const e=I(I({},Ed(i,"layout")),{},{onPlay:o,onComplete:l});(s.shouldReduceMotion||this.options.layoutRoot)&&(e.delay=0,e.type=!1),this.startAnimation(e)}else n||Bp(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=a})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,pc(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Qp),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let a=0;a<this.path.length;a++){const e=this.path[a];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:n}=this.options;if(void 0===t&&!n)return;const r=this.getTransformTemplate();this.prevTransformTemplateValue=r?r(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(Up);this.isUpdating||this.nodes.forEach(Vp),this.isUpdating=!1,this.nodes.forEach(qp),this.nodes.forEach(Rp),this.nodes.forEach(Dp),this.clearAllSnapshots();const e=performance.now();fc.delta=fl(0,1e3/60,e-fc.timestamp),fc.timestamp=e,fc.isProcessing=!0,mc.update.process(fc),mc.preRender.process(fc),mc.render.process(fc),fc.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(Fp),this.sharedNodes.forEach(Gp)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,hc.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){hc.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure())}updateLayout(){if(!this.instance)return;if(this.updateScroll(),(!this.options.alwaysMeasureLayout||!this.isLead())&&!this.isLayoutDirty)return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let n=0;n<this.path.length;n++){this.path[n].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"measure",t=Boolean(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&(this.scroll={animationId:this.root.animationId,phase:e,isRoot:a(this.instance),offset:r(this.instance)})}resetTransform(){if(!i)return;const e=this.isLayoutDirty||this.shouldResetTransform,t=this.projectionDelta&&!kp(this.projectionDelta),n=this.getTransformTemplate(),r=n?n(this.latestValues,""):void 0,a=r!==this.prevTransformTemplateValue;e&&(t||Rh(this.latestValues)||a)&&(i(this.instance,r),this.shouldResetTransform=!1,this.scheduleRender())}measure(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.measurePageBox();let n=this.removeElementScroll(t);var r;return e&&(n=this.removeTransform(n)),ef((r=n).x),ef(r.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:e}=this.options;if(!e)return{x:{min:0,max:0},y:{min:0,max:0}};const t=e.measureViewportBox(),{scroll:n}=this.root;return n&&(Bh(t.x,n.offset.x),Bh(t.y,n.offset.y)),t}removeElementScroll(e){const t={x:{min:0,max:0},y:{min:0,max:0}};gp(t,e);for(let n=0;n<this.path.length;n++){const r=this.path[n],{scroll:a,options:i}=r;if(r!==this.root&&a&&i.layoutScroll){if(a.isRoot){gp(t,e);const{scroll:n}=this.root;n&&(Bh(t.x,-n.offset.x),Bh(t.y,-n.offset.y))}Bh(t.x,a.offset.x),Bh(t.y,a.offset.y)}}return t}applyTransform(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n={x:{min:0,max:0},y:{min:0,max:0}};gp(n,e);for(let r=0;r<this.path.length;r++){const e=this.path[r];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&Gh(n,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),Rh(e.latestValues)&&Gh(n,e.latestValues)}return Rh(this.latestValues)&&Gh(n,this.latestValues),n}removeTransform(e){const t={x:{min:0,max:0},y:{min:0,max:0}};gp(t,e);for(let n=0;n<this.path.length;n++){const e=this.path[n];if(!e.instance)continue;if(!Rh(e.latestValues))continue;Oh(e.latestValues)&&e.updateSnapshot();const r=Ph();gp(r,e.measurePageBox()),wp(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,r)}return Rh(this.latestValues)&&wp(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options=I(I(I({},this.options),e),{},{crossfade:void 0===e.crossfade||e.crossfade})}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==fc.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t;const n=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=n.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=n.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=n.isSharedProjectionDirty);const r=Boolean(this.resumingFrom)||this!==n;if(!(e||r&&this.isSharedProjectionDirty||this.isProjectionDirty||(null===(t=this.parent)||void 0===t?void 0:t.isProjectionDirty)||this.attemptToResolveRelativeTarget))return;const{layout:a,layoutId:i}=this.options;if(this.layout&&(a||i)){if(this.resolvedRelativeTargetAt=fc.timestamp,!this.targetDelta&&!this.relativeTarget){const e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},jh(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),gp(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){var s,o,l;if(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),s=this.target,o=this.relativeTarget,l=this.relativeParent.target,Sh(s.x,o.x,l.x),Sh(s.y,o.y,l.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):gp(this.target,this.layout.layoutBox),Vh(this.target,this.targetDelta)):gp(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const e=this.getClosestProjectingParent();e&&Boolean(e.resumingFrom)===Boolean(this.resumingFrom)&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},jh(this.relativeTargetOrigin,this.target,e.target),gp(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Lp.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(this.parent&&!Oh(this.parent.latestValues)&&!Dh(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var e;const t=this.getLead(),n=Boolean(this.resumingFrom)||this!==t;let r=!0;if((this.isProjectionDirty||(null===(e=this.parent)||void 0===e?void 0:e.isProjectionDirty))&&(r=!1),n&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(r=!1),this.resolvedRelativeTargetAt===fc.timestamp&&(r=!1),r)return;const{layout:a,layoutId:i}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!a&&!i)return;gp(this.layoutCorrected,this.layout.layoutBox);const s=this.treeScale.x,o=this.treeScale.y;!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a=n.length;if(!a)return;let i,s;t.x=t.y=1;for(let o=0;o<a;o++){i=n[o],s=i.projectionDelta;const a=i.instance;a&&a.style&&"contents"===a.style.display||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Gh(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),s&&(t.x*=s.x.scale,t.y*=s.y.scale,Vh(e,s)),r&&Rh(i.latestValues)&&Gh(e,i.latestValues))}t.x=qh(t.x),t.y=qh(t.y)}(this.layoutCorrected,this.treeScale,this.path,n),!t.layout||t.target||1===this.treeScale.x&&1===this.treeScale.y||(t.target=t.layout.layoutBox);const{target:l}=t;if(!l)return void(this.projectionTransform&&(this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionTransform="none",this.scheduleRender()));this.projectionDelta||(this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}});const c=this.projectionTransform;wh(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.projectionTransform=Np(this.projectionDelta,this.treeScale),this.projectionTransform===c&&this.treeScale.x===s&&this.treeScale.y===o||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l)),Lp.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.options.scheduleRender&&this.options.scheduleRender(),e){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.snapshot,r=n?n.latestValues:{},a=I({},this.latestValues),i={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const s={x:{min:0,max:0},y:{min:0,max:0}},o=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),c=!l||l.members.length<=1,u=Boolean(o&&!c&&!0===this.options.crossfade&&!this.path.some($p));let d;this.animationProgress=0,this.mixTargetDelta=t=>{const n=t/1e3;var l,h,p,f,m,g;Kp(i.x,e.x,n),Kp(i.y,e.y,n),this.setTargetDelta(i),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(jh(s,this.layout.layoutBox,this.relativeParent.layout.layoutBox),p=this.relativeTarget,f=this.relativeTargetOrigin,m=s,g=n,Jp(p.x,f.x,m.x,g),Jp(p.y,f.y,m.y,g),d&&(l=this.relativeTarget,h=d,l.x.min===h.x.min&&l.x.max===h.x.max&&l.y.min===h.y.min&&l.y.max===h.y.max)&&(this.isProjectionDirty=!1),d||(d={x:{min:0,max:0},y:{min:0,max:0}}),gp(d,this.relativeTarget)),o&&(this.animationValues=a,function(e,t,n,r,a,i){a?(e.opacity=wu(0,void 0!==n.opacity?n.opacity:1,hp(r)),e.opacityExit=wu(void 0!==t.opacity?t.opacity:1,0,pp(r))):i&&(e.opacity=wu(void 0!==t.opacity?t.opacity:1,void 0!==n.opacity?n.opacity:1,r));for(let s=0;s<lp;s++){const a="border".concat(op[s],"Radius");let i=dp(t,a),o=dp(n,a);void 0===i&&void 0===o||(i||(i=0),o||(o=0),0===i||0===o||up(i)===up(o)?(e[a]=Math.max(wu(cp(i),cp(o),r),0),(_l.test(o)||_l.test(i))&&(e[a]+="%")):e[a]=o)}(t.rotate||n.rotate)&&(e.rotate=wu(t.rotate||0,n.rotate||0,r))}(a,r,this.latestValues,n,u,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(pc(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=hc.update(()=>{ep.hasAnimatedSinceResize=!0,this.currentAnimation=function(e,t,n){const r=ol(e)?e:Fd(e);return r.start(Id("",r,t,n)),r.animation}(0,1e3,I(I({},e),{},{onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onComplete:()=>{e.onComplete&&e.onComplete(),this.completeAnimation()}})),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:n,layout:r,latestValues:a}=e;if(t&&n&&r){if(this!==e&&this.layout&&r&&tf(this.options.animationType,this.layout.layoutBox,r.layoutBox)){n=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const t=vh(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+t;const r=vh(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+r}gp(t,n),Gh(t,a),wh(this.projectionDeltaWithTransform,this.layoutCorrected,t,a)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new Cp);this.sharedNodes.get(e).add(t);const n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){var e;const{layoutId:t}=this.options;return t&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this}getPrevLead(){var e;const{layoutId:t}=this.options;return t?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote(){let{needsReset:e,transition:t,preserveFollowOpacity:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=this.getStack();r&&r.promote(this,n),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:n}=e;if((n.rotate||n.rotateX||n.rotateY||n.rotateZ)&&(t=!0),!t)return;const r={};for(let a=0;a<Pp.length;a++){const t="rotate"+Pp[a];n[t]&&(r[t]=n[t],e.setStaticValue(t,0))}e.render();for(const a in r)e.setStaticValue(a,r[a]);e.scheduleRender()}getProjectionStyles(e){var t,n;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Ip;const r={visibility:""},a=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,r.opacity="",r.pointerEvents=ic(null===e||void 0===e?void 0:e.pointerEvents)||"",r.transform=a?a(this.latestValues,""):"none",r;const i=this.getLead();if(!this.projectionDelta||!this.layout||!i.target){const t={};return this.options.layoutId&&(t.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,t.pointerEvents=ic(null===e||void 0===e?void 0:e.pointerEvents)||""),this.hasProjected&&!Rh(this.latestValues)&&(t.transform=a?a({},""):"none",this.hasProjected=!1),t}const s=i.animationValues||i.latestValues;this.applyTransformsToTarget(),r.transform=Np(this.projectionDeltaWithTransform,this.treeScale,s),a&&(r.transform=a(s,r.transform));const{x:o,y:l}=this.projectionDelta;r.transformOrigin="".concat(100*o.origin,"% ").concat(100*l.origin,"% 0"),i.animationValues?r.opacity=i===this?null!==(n=null!==(t=s.opacity)&&void 0!==t?t:this.latestValues.opacity)&&void 0!==n?n:1:this.preserveOpacity?this.latestValues.opacity:s.opacityExit:r.opacity=i===this?void 0!==s.opacity?s.opacity:"":void 0!==s.opacityExit?s.opacityExit:0;for(const c in rl){if(void 0===s[c])continue;const{correct:e,applyTo:t}=rl[c],n="none"===r.transform?s[c]:e(s[c],i);if(t){const e=t.length;for(let a=0;a<e;a++)r[t[a]]=n}else r[c]=n}return this.options.layoutId&&(r.pointerEvents=i===this?ic(null===e||void 0===e?void 0:e.pointerEvents)||"":"none"),r}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>{var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()}),this.root.nodes.forEach(Up),this.root.sharedNodes.clear()}}}function Rp(e){e.updateLayout()}function Dp(e){var t;const n=(null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:r}=e.layout,{animationType:a}=e.options,i=n.source!==e.layout.source;"size"===a?Ih(e=>{const r=i?n.measuredBox[e]:n.layoutBox[e],a=vh(r);r.min=t[e].min,r.max=r.min+a}):tf(a,n.layoutBox,t)&&Ih(r=>{const a=i?n.measuredBox[r]:n.layoutBox[r],s=vh(t[r]);a.max=a.min+s,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[r].max=e.relativeTarget[r].min+s)});const s={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};wh(s,t,n.layoutBox);const o={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};i?wh(o,e.applyTransform(r,!0),n.measuredBox):wh(o,t,n.layoutBox);const l=!kp(s);let c=!1;if(!e.resumeFrom){const r=e.getClosestProjectingParent();if(r&&!r.resumeFrom){const{snapshot:a,layout:i}=r;if(a&&i){const s={x:{min:0,max:0},y:{min:0,max:0}};jh(s,n.layoutBox,a.layoutBox);const o={x:{min:0,max:0},y:{min:0,max:0}};jh(o,t,i.layoutBox),jp(s,o)||(c=!0),r.options.layoutRoot&&(e.relativeTarget=o,e.relativeTargetOrigin=s,e.relativeParent=r)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:n,delta:o,layoutDelta:s,hasLayoutChanged:l,hasRelativeTargetChanged:c})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function Mp(e){Lp.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function zp(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Fp(e){e.clearSnapshot()}function Up(e){e.clearMeasurements()}function Vp(e){e.isLayoutDirty=!1}function qp(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Bp(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Wp(e){e.resolveTargetDelta()}function Hp(e){e.calcProjection()}function Qp(e){e.resetRotation()}function Gp(e){e.removeLeadSnapshot()}function Kp(e,t,n){e.translate=wu(t.translate,0,n),e.scale=wu(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Jp(e,t,n,r){e.min=wu(t.min,n.min,r),e.max=wu(t.max,n.max,r)}function $p(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const Yp={duration:.45,ease:[.4,0,.1,1]},Xp=e=>"undefined"!==typeof navigator&&navigator.userAgent.toLowerCase().includes(e),Zp=Xp("applewebkit/")&&!Xp("chrome/")?Math.round:cc;function ef(e){e.min=Zp(e.min),e.max=Zp(e.max)}function tf(e,t,n){return"position"===e||"preserve-aspect"===e&&!bh(_p(t),_p(n),.2)}const nf=Op({attachResizeListener:(e,t)=>vc(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),rf={current:void 0},af=Op({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!rf.current){const e=new nf({});e.mount(window),e.setOptions({layoutScroll:!0}),rf.current=e}return rf.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),sf={pan:{Feature:class extends Ec{constructor(){super(...arguments),this.removePointerDownListener=cc}onPointerDown(e){this.session=new dh(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Jh(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:Zh(e),onStart:Zh(t),onMove:n,onEnd:(e,t)=>{delete this.session,r&&hc.update(()=>r(e,t))}}}mount(){this.removePointerDownListener=wc(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends Ec{constructor(e){super(e),this.removeGroupControls=cc,this.removeListeners=cc,this.controls=new Yh(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||cc}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:af,MeasureLayout:ip}};const of=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function lf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;Wc(n<=4,'Max CSS variable fallback depth detected in property "'.concat(e,'". This may indicate a circular fallback dependency.'));const[r,a]=function(e){const t=of.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]}(e);if(!r)return;const i=window.getComputedStyle(t).getPropertyValue(r);if(i){const e=i.trim();return Ld(e)?parseFloat(e):e}return hl(a)?lf(a,t,n+1):a}function cf(e,t,n){let r=Object.assign({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(t),t));const a=e.current;if(!(a instanceof Element))return{target:r,transitionEnd:n};n&&(n=I({},n)),e.values.forEach(e=>{const t=e.get();if(!hl(t))return;const n=lf(t,a);n&&e.set(n)});for(const i in r){const e=r[i];if(!hl(e))continue;const t=lf(e,a);t&&(r[i]=t,n||(n={}),void 0===n[i]&&(n[i]=e))}return{target:r,transitionEnd:n}}const uf=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),df=e=>uf.has(e),hf=e=>e===ml||e===Cl,pf=(e,t)=>parseFloat(e.split(", ")[t]),ff=(e,t)=>(n,r)=>{let{transform:a}=r;if("none"===a||!a)return 0;const i=a.match(/^matrix3d\((.+)\)$/);if(i)return pf(i[1],t);{const t=a.match(/^matrix\((.+)\)$/);return t?pf(t[1],e):0}},mf=new Set(["x","y","z"]),gf=al.filter(e=>!mf.has(e));const yf={width:(e,t)=>{let{x:n}=e,{paddingLeft:r="0",paddingRight:a="0"}=t;return n.max-n.min-parseFloat(r)-parseFloat(a)},height:(e,t)=>{let{y:n}=e,{paddingTop:r="0",paddingBottom:a="0"}=t;return n.max-n.min-parseFloat(r)-parseFloat(a)},top:(e,t)=>{let{top:n}=t;return parseFloat(n)},left:(e,t)=>{let{left:n}=t;return parseFloat(n)},bottom:(e,t)=>{let{y:n}=e,{top:r}=t;return parseFloat(r)+(n.max-n.min)},right:(e,t)=>{let{x:n}=e,{left:r}=t;return parseFloat(r)+(n.max-n.min)},x:ff(4,13),y:ff(5,14)};yf.translateX=yf.x,yf.translateY=yf.y;const vf=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};t=I({},t),r=I({},r);const a=Object.keys(t).filter(df);let i=[],s=!1;const o=[];if(a.forEach(a=>{const l=e.getValue(a);if(!e.hasValue(a))return;let c=n[a],u=qd(c);const d=t[a];let h;if(rc(d)){const e=d.length,t=null===d[0]?1:0;c=d[t],u=qd(c);for(let n=t;n<e&&null!==d[n];n++)h?Wc(qd(d[n])===h,"All keyframes must be of the same type"):(h=qd(d[n]),Wc(h===u||hf(u)&&hf(h),"Keyframes must be of the same dimension as the current value"))}else h=qd(d);if(u!==h)if(hf(u)&&hf(h)){const e=l.get();"string"===typeof e&&l.set(parseFloat(e)),"string"===typeof d?t[a]=parseFloat(d):Array.isArray(d)&&h===Cl&&(t[a]=d.map(parseFloat))}else(null===u||void 0===u?void 0:u.transform)&&(null===h||void 0===h?void 0:h.transform)&&(0===c||0===d)?0===c?l.set(h.transform(c)):t[a]=u.transform(d):(s||(i=function(e){const t=[];return gf.forEach(n=>{const r=e.getValue(n);void 0!==r&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t.length&&e.render(),t}(e),s=!0),o.push(a),r[a]=void 0!==r[a]?r[a]:t[a],l.jump(d))}),o.length){const n=o.indexOf("height")>=0?window.pageYOffset:null,a=((e,t,n)=>{const r=t.measureViewportBox(),a=t.current,i=getComputedStyle(a),{display:s}=i,o={};"none"===s&&t.setStaticValue("display",e.display||"block"),n.forEach(e=>{o[e]=yf[e](r,i)}),t.render();const l=t.measureViewportBox();return n.forEach(n=>{const r=t.getValue(n);r&&r.jump(o[n]),e[n]=yf[n](l,i)}),e})(t,e,o);return i.length&&i.forEach(t=>{let[n,r]=t;e.getValue(n).set(r)}),e.render(),Lo&&null!==n&&window.scrollTo({top:n}),{target:a,transitionEnd:r}}return{target:t,transitionEnd:r}};function bf(e,t,n,r){return(e=>Object.keys(e).some(df))(t)?vf(e,t,n,r):{target:t,transitionEnd:r}}const xf={current:null},wf={current:!1};const Sf=new WeakMap,kf=["willChange"],jf=["children"],_f=Object.keys(Ko),Cf=_f.length,Nf=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],Tf=qo.length;class Ef{constructor(e){let{parent:t,props:n,presenceContext:r,reducedMotionConfig:a,visualState:i}=e,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>hc.render(this.render,!1,!0);const{latestValues:o,renderState:l}=i;this.latestValues=o,this.baseTarget=I({},o),this.initialValues=n.initial?I({},o):{},this.renderState=l,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=a,this.options=s,this.isControllingVariants=Bo(n),this.isVariantNode=Wo(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(t&&t.current);const c=this.scrapeMotionValuesFromProps(n,{}),{willChange:u}=c,d=C(c,kf);for(const h in d){const e=d[h];void 0!==o[h]&&ol(e)&&(e.set(o[h],!1),Ad(u)&&u.add(h))}}scrapeMotionValuesFromProps(e,t){return{}}mount(e){this.current=e,Sf.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),wf.current||function(){if(wf.current=!0,Lo)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>xf.current=e.matches;e.addListener(t),t()}else xf.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||xf.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Sf.delete(this.current),this.projection&&this.projection.unmount(),pc(this.notifyUpdate),pc(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,t){const n=il.has(e),r=t.on("change",t=>{this.latestValues[e]=t,this.props.onUpdate&&hc.update(this.notifyUpdate,!1,!0),n&&this.projection&&(this.projection.isTransformDirty=!0)}),a=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{r(),a()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}loadFeatures(e,t,n,r){let a,i,{children:s}=e,o=C(e,jf);for(let l=0;l<Cf;l++){const e=_f[l],{isEnabled:t,Feature:n,ProjectionNode:r,MeasureLayout:s}=Ko[e];r&&(a=r),t(o)&&(!this.features[e]&&n&&(this.features[e]=new n(this)),s&&(i=s))}if(("html"===this.type||"svg"===this.type)&&!this.projection&&a){this.projection=new a(this.latestValues,this.parent&&this.parent.projection);const{layoutId:e,layout:t,drag:n,dragConstraints:i,layoutScroll:s,layoutRoot:l}=o;this.projection.setOptions({layoutId:e,layout:t,alwaysMeasureLayout:Boolean(n)||i&&zo(i),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:"string"===typeof t?t:"both",initialPromotionConfig:r,layoutScroll:s,layoutRoot:l})}return i}updateFeatures(){for(const e in this.features){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}makeTargetAnimatable(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.makeTargetAnimatableFromInstance(e,this.props,t)}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<Nf.length;n++){const t=Nf[n];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const r=e["on"+t];r&&(this.propEventSubscriptions[t]=this.on(t,r))}this.prevMotionValues=function(e,t,n){const{willChange:r}=t;for(const a in t){const i=t[a],s=n[a];if(ol(i))e.addValue(a,i),Ad(r)&&r.add(a);else if(ol(s))e.addValue(a,Fd(i,{owner:e})),Ad(r)&&r.remove(a);else if(s!==i)if(e.hasValue(a)){const t=e.getValue(a);!t.hasAnimated&&t.set(i)}else{const t=e.getStaticValue(a);e.addValue(a,Fd(void 0!==t?t:i,{owner:e}))}}for(const a in n)void 0===t[a]&&e.removeValue(a);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0])return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const e=this.parent&&this.parent.getVariantContext()||{};return void 0!==this.props.initial&&(e.initial=this.props.initial),e}const e={};for(let t=0;t<Tf;t++){const n=qo[t],r=this.props[n];(Fo(r)||!1===r)&&(e[n]=r)}return e}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return void 0===n&&void 0!==t&&(n=Fd(t,{owner:this}),this.addValue(e,n)),n}readValue(e){var t;return void 0===this.latestValues[e]&&this.current?null!==(t=this.getBaseTargetFromProps(this.props,e))&&void 0!==t?t:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e]}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:n}=this.props,r="string"===typeof n||"object"===typeof n?null===(t=tc(this.props,n))||void 0===t?void 0:t[e]:void 0;if(n&&void 0!==r)return r;const a=this.getBaseTargetFromProps(this.props,e);return void 0===a||ol(a)?void 0!==this.initialValues[e]&&void 0===r?void 0:this.baseTarget[e]:a}on(e,t){return this.events[e]||(this.events[e]=new Dd),this.events[e].add(t)}notify(e){if(this.events[e]){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.events[e].notify(...n)}}}const Pf=["transition","transitionEnd"];class If extends Ef{sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,t){let{vars:n,style:r}=t;delete n[e],delete r[e]}makeTargetAnimatableFromInstance(e,t,n){let{transition:r,transitionEnd:a}=e,i=C(e,Pf),{transformValues:s}=t,o=function(e,t,n){const r={};for(const a in e){const e=Kd(a,t);if(void 0!==e)r[a]=e;else{const e=n.getValue(a);e&&(r[a]=e.get())}}return r}(i,r||{},this);if(s&&(a&&(a=s(a)),i&&(i=s(i)),o&&(o=s(o))),n){!function(e,t,n){var r,a;const i=Object.keys(t).filter(t=>!e.hasValue(t)),s=i.length;if(s)for(let o=0;o<s;o++){const s=i[o],l=t[s];let c=null;Array.isArray(l)&&(c=l[0]),null===c&&(c=null!==(a=null!==(r=n[s])&&void 0!==r?r:e.readValue(s))&&void 0!==a?a:t[s]),void 0!==c&&null!==c&&("string"===typeof c&&(Ld(c)||Cd(c))?c=parseFloat(c):!Wd(c)&&Ru.test(l)&&(c=_d(s,l)),e.addValue(s,Fd(c,{owner:e})),void 0===n[s]&&(n[s]=c),null!==c&&e.setBaseTarget(s,c))}}(this,i,o);const e=((e,t,n,r)=>{const a=cf(e,t,r);return bf(e,t=a.target,n,r=a.transitionEnd)})(this,i,o,a);a=e.transitionEnd,i=e.target}return I({transition:r,transitionEnd:a},i)}}class Af extends If{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,t){if(il.has(t)){const e=jd(t);return e&&e.default||0}{const r=(n=e,window.getComputedStyle(n)),a=(dl(t)?r.getPropertyValue(t):r[t])||0;return"string"===typeof a?a.trim():a}var n}measureInstanceViewportBox(e,t){let{transformPagePoint:n}=t;return Kh(e,n)}build(e,t,n,r){Al(e,t,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,t){return Zl(e,t)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ol(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent="".concat(e))}))}renderInstance(e,t,n,r){$l(e,t,n,r)}}class Lf extends If{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(il.has(t)){const e=jd(t);return e&&e.default||0}return t=Yl.has(t)?t:Do(t),e.getAttribute(t)}measureInstanceViewportBox(){return{x:{min:0,max:0},y:{min:0,max:0}}}scrapeMotionValuesFromProps(e,t){return ec(e,t)}build(e,t,n,r){Hl(e,t,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,t,n,r){Xl(e,t,0,r)}mount(e){this.isSVGTag=Gl(e.tagName),super.mount(e)}}const Of=(e,t)=>nl(e)?new Lf(t,{enableHardwareAcceleration:!1}):new Af(t,{enableHardwareAcceleration:!0}),Rf={layout:{ProjectionNode:af,MeasureLayout:ip}},Df=I(I(I(I({},ch),Uc),sf),Rf),Mf=el((e,t)=>function(e,t,n,r){let{forwardMotionProps:a=!1}=t;return I(I({},nl(e)?gc:yc),{},{preloadedFeatures:n,useRender:Jl(a),createVisualElement:r,Component:e})}(e,t,Df,Of));var zf=n(579);const Ff=e=>{let{size:t="md",animate:n=!0,className:r=""}=e;const a=n?{animate:{y:[0,-8,0],rotate:[0,2,-2,0],scale:[1,1.05,1]},transition:{duration:3,repeat:1/0,ease:"easeInOut"}}:{};return(0,zf.jsx)(Mf.div,I(I({className:"".concat({sm:"text-4xl",md:"text-6xl",lg:"text-8xl"}[t]," ").concat(r," select-none"),style:{filter:"drop-shadow(0 4px 8px rgba(0,0,0,0.2))"}},a),{},{children:"\ud83e\udd81"}))},Uf=e=>{let{children:t,onClick:n,variant:r="primary",size:a="md",disabled:i=!1,className:s="",icon:o}=e;const l=i?"opacity-50 cursor-not-allowed":"hover:scale-105 hover:shadow-xl active:scale-95 cursor-pointer";return(0,zf.jsxs)(Mf.button,{className:"".concat("font-bold rounded-2xl shadow-lg transform transition-all duration-200 flex items-center justify-center gap-2"," ").concat({primary:"bg-gradient-to-r from-primary-500 to-primary-600 text-white hover:from-primary-600 hover:to-primary-700",secondary:"bg-gradient-to-r from-secondary-500 to-secondary-600 text-white hover:from-secondary-600 hover:to-secondary-700",success:"bg-gradient-to-r from-success-500 to-success-600 text-white hover:from-success-600 hover:to-success-700",accent:"bg-gradient-to-r from-accent-500 to-accent-600 text-white hover:from-accent-600 hover:to-accent-700"}[r]," ").concat({sm:"py-2 px-4 text-sm",md:"py-3 px-6 text-base",lg:"py-4 px-8 text-lg"}[a]," ").concat(l," ").concat(s),onClick:n,disabled:i,whileHover:i?{}:{scale:1.05},whileTap:i?{}:{scale:.95},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[o&&(0,zf.jsx)("span",{className:"text-xl",children:o}),t]})},Vf=e=>{let{current:t,total:n,label:r,color:a="primary",size:i="md",showPercentage:s=!0,animate:o=!0}=e;const l=Math.max(0,Number(t)||0),c=Math.max(1,Number(n)||1),u=Math.min(l/c*100,100),d={primary:"bg-primary-500",secondary:"bg-secondary-500",success:"bg-success-500",accent:"bg-accent-500"},h={sm:"h-2",md:"h-3",lg:"h-4"};return(0,zf.jsxs)("div",{className:"w-full",children:[r&&(0,zf.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,zf.jsx)("span",{className:"text-sm font-medium text-gray-700",children:r}),s&&(0,zf.jsxs)("span",{className:"text-sm font-bold text-gray-600",children:[l,"/",c," ",isNaN(u)?"0":u.toFixed(0),"%"]})]}),(0,zf.jsx)("div",{className:"w-full bg-gray-200 rounded-full ".concat(h[i]," overflow-hidden progress-3d"),children:(0,zf.jsx)(Mf.div,{className:"".concat(d[a]," ").concat(h[i]," rounded-full relative"),initial:o?{width:"0%"}:{width:"".concat(isNaN(u)?0:u,"%")},animate:{width:"".concat(isNaN(u)?0:u,"%")},transition:{duration:o?1:0,ease:"easeOut"},children:(0,zf.jsx)(Mf.div,{className:"absolute top-0 left-0 h-full w-full bg-gradient-to-r from-transparent via-white to-transparent opacity-30",animate:o?{x:["-100%","100%"]}:{},transition:{duration:2,repeat:1/0,repeatDelay:3,ease:"easeInOut"}})})}),c>1&&c<=20&&(0,zf.jsx)("div",{className:"flex justify-between mt-1",children:Array.from({length:c},(e,t)=>(0,zf.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(t<l?d[a]:"bg-gray-300")},t))})]})},qf=()=>(0,zf.jsxs)("div",{className:"fixed inset-0 pointer-events-none overflow-hidden z-0",children:[(0,zf.jsxs)(Mf.div,{className:"absolute top-20 right-10 w-8 h-8 bg-gradient-to-br from-red-400 to-red-600 rounded-full shadow-lg floating-3d",animate:{rotate:360,y:[0,-20,0]},transition:{rotate:{duration:30,repeat:1/0,ease:"linear"},y:{duration:6,repeat:1/0,ease:"easeInOut"}},style:{transformStyle:"preserve-3d",boxShadow:"0 10px 25px rgba(220, 38, 127, 0.3), inset 0 2px 4px rgba(255, 255, 255, 0.2)"},children:[(0,zf.jsx)("div",{className:"absolute inset-1 bg-gradient-to-br from-red-300 to-red-500 rounded-full"}),(0,zf.jsx)("div",{className:"absolute top-2 left-1 w-2 h-1 bg-red-700 rounded-full opacity-60"})]}),(0,zf.jsx)(Mf.div,{className:"absolute top-40 left-16 w-12 h-12 bg-gradient-to-br from-blue-300 to-blue-500 rounded-full shadow-lg",animate:{rotate:-360,x:[0,30,0],y:[0,-15,0]},transition:{rotate:{duration:45,repeat:1/0,ease:"linear"},x:{duration:8,repeat:1/0,ease:"easeInOut"},y:{duration:5,repeat:1/0,ease:"easeInOut"}},children:(0,zf.jsxs)("div",{className:"absolute inset-1 bg-gradient-to-br from-green-400 to-blue-400 rounded-full",children:[(0,zf.jsx)("div",{className:"absolute top-1 left-2 w-3 h-2 bg-green-600 rounded-full opacity-70"}),(0,zf.jsx)("div",{className:"absolute bottom-2 right-1 w-2 h-1 bg-green-500 rounded-full opacity-60"})]})}),(0,zf.jsx)(Mf.div,{className:"absolute bottom-32 right-20 w-6 h-6 bg-gradient-to-br from-purple-400 to-purple-600 rounded-full shadow-lg",animate:{rotate:360,x:[0,-25,0],y:[0,20,0]},transition:{rotate:{duration:20,repeat:1/0,ease:"linear"},x:{duration:7,repeat:1/0,ease:"easeInOut"},y:{duration:4,repeat:1/0,ease:"easeInOut"}},children:(0,zf.jsx)("div",{className:"absolute inset-0.5 bg-gradient-to-br from-purple-300 to-purple-500 rounded-full"})}),(0,zf.jsx)(Mf.div,{className:"absolute top-60 right-32 w-10 h-10",animate:{rotate:360,y:[0,-30,0]},transition:{rotate:{duration:50,repeat:1/0,ease:"linear"},y:{duration:10,repeat:1/0,ease:"easeInOut"}},children:(0,zf.jsxs)("div",{className:"w-10 h-10 bg-gradient-to-br from-yellow-300 to-orange-400 rounded-full shadow-lg relative",children:[(0,zf.jsx)("div",{className:"absolute inset-1 bg-gradient-to-br from-yellow-200 to-orange-300 rounded-full"}),(0,zf.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-16 h-16 border-2 border-yellow-400 rounded-full opacity-40"}),(0,zf.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-20 h-20 border border-yellow-300 rounded-full opacity-30"})]})}),(0,zf.jsx)(Mf.div,{className:"absolute top-20 left-0 w-1 h-1 bg-white rounded-full shadow-lg",animate:{x:["0vw","100vw"],y:["20vh","80vh"],opacity:[0,1,1,0]},transition:{duration:3,repeat:1/0,repeatDelay:7,ease:"easeOut"},children:(0,zf.jsx)("div",{className:"absolute -left-8 top-0 w-8 h-0.5 bg-gradient-to-r from-transparent to-white opacity-70"})}),(0,zf.jsx)(Mf.div,{className:"absolute top-40 left-0 w-1 h-1 bg-blue-200 rounded-full shadow-lg",animate:{x:["0vw","100vw"],y:["40vh","10vh"],opacity:[0,1,1,0]},transition:{duration:4,repeat:1/0,repeatDelay:12,ease:"easeOut",delay:5},children:(0,zf.jsx)("div",{className:"absolute -left-6 top-0 w-6 h-0.5 bg-gradient-to-r from-transparent to-blue-200 opacity-70"})}),(0,zf.jsx)(Mf.div,{className:"absolute top-10 left-10 w-32 h-32 bg-gradient-radial from-purple-500/20 via-blue-500/10 to-transparent rounded-full",animate:{scale:[1,1.2,1],opacity:[.3,.6,.3]},transition:{duration:15,repeat:1/0,ease:"easeInOut"}}),(0,zf.jsx)(Mf.div,{className:"absolute bottom-20 right-10 w-24 h-24 bg-gradient-radial from-pink-500/20 via-purple-500/10 to-transparent rounded-full",animate:{scale:[1,1.3,1],opacity:[.2,.5,.2]},transition:{duration:12,repeat:1/0,ease:"easeInOut",delay:3}})]});function Bf(){const e=(0,r.useRef)(!1);return Oo(()=>(e.current=!0,()=>{e.current=!1}),[]),e}class Wf extends r.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Hf(e){let{children:t,isPresent:n}=e;const a=(0,r.useId)(),i=(0,r.useRef)(null),s=(0,r.useRef)({width:0,height:0,top:0,left:0});return(0,r.useInsertionEffect)(()=>{const{width:e,height:t,top:r,left:o}=s.current;if(n||!i.current||!e||!t)return;i.current.dataset.motionPopId=a;const l=document.createElement("style");return document.head.appendChild(l),l.sheet&&l.sheet.insertRule('\n          [data-motion-pop-id="'.concat(a,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            top: ").concat(r,"px !important;\n            left: ").concat(o,"px !important;\n          }\n        ")),()=>{document.head.removeChild(l)}},[n]),r.createElement(Wf,{isPresent:n,childRef:i,sizeRef:s},r.cloneElement(t,{ref:i}))}const Qf=e=>{let{children:t,initial:n,isPresent:a,onExitComplete:i,custom:s,presenceAffectsLayout:o,mode:l}=e;const c=nc(Gf),u=(0,r.useId)(),d=(0,r.useMemo)(()=>({id:u,initial:n,isPresent:a,custom:s,onExitComplete:e=>{c.set(e,!0);for(const t of c.values())if(!t)return;i&&i()},register:e=>(c.set(e,!1),()=>c.delete(e))}),o?void 0:[a]);return(0,r.useMemo)(()=>{c.forEach((e,t)=>c.set(t,!1))},[a]),r.useEffect(()=>{!a&&!c.size&&i&&i()},[a]),"popLayout"===l&&(t=r.createElement(Hf,{isPresent:a},t)),r.createElement(Ao.Provider,{value:d},t)};function Gf(){return new Map}const Kf=e=>e.key||"";const Jf=e=>{let{children:t,custom:n,initial:a=!0,onExitComplete:i,exitBeforeEnter:s,presenceAffectsLayout:o=!0,mode:l="sync"}=e;Wc(!s,"Replace exitBeforeEnter with mode='wait'");const c=(0,r.useContext)(Jo).forceRender||function(){const e=Bf(),[t,n]=(0,r.useState)(0),a=(0,r.useCallback)(()=>{e.current&&n(t+1)},[t]);return[(0,r.useCallback)(()=>hc.postRender(a),[a]),t]}()[0],u=Bf(),d=function(e){const t=[];return r.Children.forEach(e,e=>{(0,r.isValidElement)(e)&&t.push(e)}),t}(t);let h=d;const p=(0,r.useRef)(new Map).current,f=(0,r.useRef)(h),m=(0,r.useRef)(new Map).current,g=(0,r.useRef)(!0);var y;if(Oo(()=>{g.current=!1,function(e,t){e.forEach(e=>{const n=Kf(e);t.set(n,e)})}(d,m),f.current=h}),y=()=>{g.current=!0,m.clear(),p.clear()},(0,r.useEffect)(()=>()=>y(),[]),g.current)return r.createElement(r.Fragment,null,h.map(e=>r.createElement(Qf,{key:Kf(e),isPresent:!0,initial:!!a&&void 0,presenceAffectsLayout:o,mode:l},e)));h=[...h];const v=f.current.map(Kf),b=d.map(Kf),x=v.length;for(let r=0;r<x;r++){const e=v[r];-1!==b.indexOf(e)||p.has(e)||p.set(e,void 0)}return"wait"===l&&p.size&&(h=[]),p.forEach((e,t)=>{if(-1!==b.indexOf(t))return;const a=m.get(t);if(!a)return;const s=v.indexOf(t);let g=e;if(!g){const e=()=>{p.delete(t);const e=Array.from(m.keys()).filter(e=>!b.includes(e));if(e.forEach(e=>m.delete(e)),f.current=d.filter(n=>{const r=Kf(n);return r===t||e.includes(r)}),!p.size){if(!1===u.current)return;c(),i&&i()}};g=r.createElement(Qf,{key:Kf(a),isPresent:!1,onExitComplete:e,custom:n,presenceAffectsLayout:o,mode:l},a),p.set(t,g)}h.splice(s,0,g)}),h=h.map(e=>{const t=e.key;return p.has(t)?e:r.createElement(Qf,{key:Kf(e),isPresent:!0,presenceAffectsLayout:o,mode:l},e)}),r.createElement(r.Fragment,null,p.size?h:h.map(e=>(0,r.cloneElement)(e)))},$f=[{id:"solar-system",title:"Solar System & Space",description:"Explore planets, stars, and the mysteries of our solar system!",icon:"\ud83e\ude90",color:"purple",backgroundTheme:"space",difficulty:2,estimatedTime:15,keyLearningPoints:["Learn about the 8 planets","Understand the Sun and Moon","Discover asteroids and comets","Explore space exploration"]},{id:"plants-photosynthesis",title:"Plants & Photosynthesis",description:"Discover how plants make their own food and help our planet!",icon:"\ud83c\udf31",color:"green",backgroundTheme:"forest",difficulty:2,estimatedTime:12,keyLearningPoints:["How plants make food from sunlight","Parts of a plant and their functions","Why plants are important for Earth","Different types of plants"]},{id:"forces-motion",title:"Forces & Motion",description:"Learn about gravity, friction, and how things move!",icon:"\u26a1",color:"blue",backgroundTheme:"laboratory",difficulty:2,estimatedTime:10,keyLearningPoints:["Understanding gravity and weight","Friction and its effects","Simple machines and levers","Motion and speed"]},{id:"water-cycle",title:"Water Cycle & Weather",description:"Follow water's amazing journey through Earth's atmosphere!",icon:"\ud83c\udf27\ufe0f",color:"cyan",backgroundTheme:"weather",difficulty:1,estimatedTime:8,keyLearningPoints:["Evaporation and condensation","How clouds form","Different types of weather","Water conservation"]},{id:"human-body",title:"Human Body Systems",description:"Explore the amazing systems that keep you healthy and strong!",icon:"\ud83e\udec0",color:"red",backgroundTheme:"human-body",difficulty:3,estimatedTime:18,keyLearningPoints:["Circulatory and respiratory systems","Digestive system and nutrition","Skeletal and muscular systems","How to stay healthy"]},{id:"animals-habitats",title:"Animals & Habitats",description:"Meet amazing animals and discover where they live!",icon:"\ud83e\udd81",color:"orange",backgroundTheme:"forest",difficulty:1,estimatedTime:10,keyLearningPoints:["Different animal habitats","How animals adapt to their environment","Food chains and ecosystems","Protecting wildlife"]},{id:"matter-materials",title:"Matter & Materials",description:"Discover the building blocks of everything around us!",icon:"\ud83e\uddea",color:"indigo",backgroundTheme:"laboratory",difficulty:2,estimatedTime:14,keyLearningPoints:["Solids, liquids, and gases","Properties of materials","Changes in matter","Mixing and separating materials"]},{id:"earth-surface",title:"Earth's Surface",description:"Explore mountains, valleys, and how Earth's surface changes!",icon:"\ud83c\udfd4\ufe0f",color:"brown",backgroundTheme:"earth",difficulty:2,estimatedTime:12,keyLearningPoints:["Landforms and their formation","Rocks and minerals","Erosion and weathering","Earthquakes and volcanoes"]},{id:"light-sound",title:"Light & Sound",description:"Discover how we see and hear the world around us!",icon:"\ud83d\udd06",color:"yellow",backgroundTheme:"laboratory",difficulty:2,estimatedTime:11,keyLearningPoints:["How light travels and reflects","Colors and the rainbow","How sound is made and travels","Using light and sound in technology"]},{id:"ecosystems",title:"Ecosystems & Environment",description:"Learn how all living things depend on each other!",icon:"\ud83c\udf0d",color:"teal",backgroundTheme:"forest",difficulty:3,estimatedTime:16,keyLearningPoints:["Food webs and energy flow","Predators and prey","Environmental protection","Human impact on nature"]}],Yf=e=>{let{isOpen:t,onClose:n,onTopicSelect:a}=e;const[i,s]=(0,r.useState)(null),[o,l]=(0,r.useState)(null),[c,u]=(0,r.useState)("space"),d=o?$f.filter(e=>e.difficulty===o):$f,h={1:"bg-green-500",2:"bg-yellow-500",3:"bg-red-500"},p={1:"Beginner",2:"Intermediate",3:"Advanced"},f={purple:"from-purple-500 to-purple-700",green:"from-green-500 to-green-700",blue:"from-blue-500 to-blue-700",cyan:"from-cyan-500 to-cyan-700",red:"from-red-500 to-red-700",orange:"from-orange-500 to-orange-700",indigo:"from-indigo-500 to-indigo-700",brown:"from-amber-600 to-amber-800",yellow:"from-yellow-500 to-yellow-700",teal:"from-teal-500 to-teal-700"},m=()=>{s(null),l(null),u("space"),n()};return(0,zf.jsx)(Jf,{children:t&&(0,zf.jsxs)(zf.Fragment,{children:[(0,zf.jsx)(Mf.div,{className:"fixed inset-0 bg-black/50 modal-backdrop z-40",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:m}),(0,zf.jsx)(Mf.div,{className:"fixed inset-0 z-50 flex items-center justify-center p-4",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{type:"spring",damping:25,stiffness:300},children:(0,zf.jsxs)("div",{className:"relative w-full max-w-6xl max-h-[90vh] overflow-hidden rounded-3xl shadow-2xl modal-content",children:[(0,zf.jsxs)("div",{className:"absolute inset-0 overflow-hidden",children:[(()=>{const e={space:"bg-gradient-to-br from-slate-900 via-slate-800 to-blue-900",forest:"bg-gradient-to-br from-green-900 via-green-700 to-emerald-800",ocean:"bg-gradient-to-br from-blue-900 via-cyan-700 to-teal-800",weather:"bg-gradient-to-br from-gray-700 via-blue-600 to-cyan-500",laboratory:"bg-gradient-to-br from-indigo-900 via-purple-800 to-blue-900","human-body":"bg-gradient-to-br from-red-900 via-pink-800 to-rose-900",earth:"bg-gradient-to-br from-amber-900 via-orange-800 to-red-900"};return(0,zf.jsx)(Mf.div,{className:"absolute inset-0 ".concat(e[c]||e.space),initial:{opacity:0},animate:{opacity:1},transition:{duration:.5}},c)})(),"space"===c&&(0,zf.jsxs)(zf.Fragment,{children:[(0,zf.jsx)(Mf.div,{className:"absolute top-10 right-10 w-4 h-4 bg-white rounded-full opacity-80",animate:{scale:[1,1.5,1],opacity:[.8,1,.8]},transition:{duration:2,repeat:1/0}}),(0,zf.jsx)(Mf.div,{className:"absolute bottom-20 left-10 w-3 h-3 bg-blue-300 rounded-full opacity-60",animate:{y:[0,-20,0],x:[0,10,0]},transition:{duration:4,repeat:1/0}})]}),"forest"===c&&(0,zf.jsxs)(zf.Fragment,{children:[(0,zf.jsx)(Mf.div,{className:"absolute top-16 left-1/4 text-2xl opacity-70",animate:{y:[0,-15,0],rotate:[0,10,0]},transition:{duration:3,repeat:1/0},children:"\ud83c\udf43"}),(0,zf.jsx)(Mf.div,{className:"absolute bottom-24 right-1/3 text-xl opacity-60",animate:{y:[0,-10,0],rotate:[0,-15,0]},transition:{duration:4,repeat:1/0},children:"\ud83c\udf3f"})]})]}),(0,zf.jsxs)("div",{className:"relative z-10 p-6 max-h-[90vh] overflow-y-auto modal-scroll",children:[(0,zf.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,zf.jsxs)("div",{className:"flex items-center gap-4",children:[(0,zf.jsx)(Ff,{size:"sm",animate:!0}),(0,zf.jsxs)("div",{children:[(0,zf.jsx)("h2",{className:"text-white font-comic text-2xl font-bold",children:"Choose Your Adventure! \ud83d\ude80"}),(0,zf.jsx)("p",{className:"text-white/80 text-sm",children:"Select a science topic to explore"})]})]}),(0,zf.jsx)(Mf.button,{className:"bg-white/20 backdrop-blur rounded-full p-3 text-white hover:bg-white/30 transition-colors tilt-3d glass-3d",onClick:m,whileHover:{scale:1.1},whileTap:{scale:.9},children:(0,zf.jsx)("span",{className:"text-xl",children:"\u2715"})})]}),(0,zf.jsxs)(Mf.div,{className:"flex justify-center gap-2 mb-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:[(0,zf.jsx)(Mf.button,{className:"px-4 py-2 rounded-xl font-medium transition-all duration-300 tilt-3d ".concat(null===o?"bg-white text-gray-800 shadow-lg":"bg-white/20 text-white glass-3d"),onClick:()=>l(null),whileHover:{scale:1.05},children:"All Topics"}),[1,2,3].map(e=>(0,zf.jsxs)(Mf.button,{className:"px-4 py-2 rounded-xl font-medium transition-all duration-300 tilt-3d flex items-center gap-2 ".concat(o===e?"bg-white text-gray-800 shadow-lg":"bg-white/20 text-white glass-3d"),onClick:()=>l(e),whileHover:{scale:1.05},children:[(0,zf.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(h[e])}),p[e]]},e))]}),(0,zf.jsx)(Mf.div,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3,staggerChildren:.1},children:(0,zf.jsx)(Jf,{children:d.map((e,t)=>(0,zf.jsxs)(Mf.div,{className:"relative p-4 rounded-2xl border-2 cursor-pointer transition-all duration-300 tilt-3d glass-3d ".concat((null===i||void 0===i?void 0:i.id)===e.id?"border-white bg-white/20 shadow-2xl scale-105":"border-white/20 bg-white/10 hover:bg-white/20"),onClick:()=>(e=>{s(e)})(e),onMouseEnter:()=>(e=>{u(e.backgroundTheme)})(e),whileHover:{scale:1.02},whileTap:{scale:.98},initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},transition:{delay:.05*t},layout:!0,children:[(0,zf.jsxs)("div",{className:"text-center mb-3",children:[(0,zf.jsx)(Mf.div,{className:"text-3xl mb-2",animate:(null===i||void 0===i?void 0:i.id)===e.id?{rotate:[0,5,-5,0]}:{},transition:{duration:.5},children:e.icon}),(0,zf.jsxs)("div",{className:"inline-block px-2 py-1 rounded-full text-xs font-bold text-white bg-gradient-to-r ".concat(f[e.color]),children:[e.estimatedTime," min"]})]}),(0,zf.jsx)("h3",{className:"font-comic font-bold text-white text-sm mb-2 text-center",children:e.title}),(0,zf.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-2",children:[(0,zf.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(h[e.difficulty])}),(0,zf.jsx)("span",{className:"text-white/70 text-xs",children:p[e.difficulty]})]}),(0,zf.jsxs)("div",{className:"space-y-1",children:[e.keyLearningPoints.slice(0,1).map((e,t)=>(0,zf.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zf.jsx)("div",{className:"w-1 h-1 bg-white/60 rounded-full flex-shrink-0"}),(0,zf.jsx)("span",{className:"text-white/70 text-xs line-clamp-1",children:e})]},t)),e.keyLearningPoints.length>1&&(0,zf.jsxs)("div",{className:"text-white/50 text-xs text-center",children:["+",e.keyLearningPoints.length-1," more"]})]}),(null===i||void 0===i?void 0:i.id)===e.id&&(0,zf.jsx)(Mf.div,{className:"absolute -top-2 -right-2 w-6 h-6 bg-secondary-500 rounded-full flex items-center justify-center shadow-lg",initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500,damping:30},children:(0,zf.jsx)("span",{className:"text-white text-sm",children:"\u2713"})})]},e.id))})}),(0,zf.jsx)(Jf,{children:i&&(0,zf.jsxs)(Mf.div,{className:"bg-white/95 backdrop-blur rounded-2xl p-4 shadow-xl card-3d glass-3d",initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},transition:{duration:.3},children:[(0,zf.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,zf.jsx)("div",{className:"text-2xl",children:i.icon}),(0,zf.jsxs)("div",{className:"flex-1",children:[(0,zf.jsx)("h3",{className:"font-comic font-bold text-gray-800 text-lg",children:i.title}),(0,zf.jsx)("p",{className:"text-gray-600 text-sm",children:i.description})]})]}),(0,zf.jsxs)("div",{className:"flex gap-3",children:[(0,zf.jsx)("div",{className:"flex-1",children:(0,zf.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm mb-3",children:[(0,zf.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zf.jsx)("span",{className:"text-gray-500",children:"Duration:"}),(0,zf.jsxs)("span",{className:"font-medium text-gray-700",children:[i.estimatedTime," min"]})]}),(0,zf.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zf.jsx)("span",{className:"text-gray-500",children:"Level:"}),(0,zf.jsxs)("div",{className:"flex items-center gap-1",children:[(0,zf.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(h[i.difficulty])}),(0,zf.jsx)("span",{className:"font-medium text-gray-700",children:p[i.difficulty]})]})]})]})}),(0,zf.jsx)(Uf,{onClick:()=>{i&&(a(i),n())},size:"md",icon:"\ud83d\ude80",className:"self-end",children:"Start Learning!"})]})]})}),!i&&(0,zf.jsx)(Mf.div,{className:"flex items-start gap-3 justify-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:(0,zf.jsx)("div",{className:"chat-bubble max-w-xs",children:(0,zf.jsx)("p",{className:"text-gray-700 text-sm text-center",children:"Pick any topic that interests you! Every science adventure is mane-ificent! \ud83e\udd81"})})})]})]})})]})})},Xf=e=>{let{className:t=""}=e;const[n,a]=(0,r.useState)(!1),i=To(),{currentUser:s}=Eo(e=>e.user);return s?(0,zf.jsxs)("div",{className:"relative ".concat(t),children:[(0,zf.jsxs)(Mf.button,{className:"flex items-center gap-2 bg-white/20 backdrop-blur rounded-xl px-3 py-2 glass-3d border border-white/20",onClick:()=>a(!n),whileHover:{scale:1.05},whileTap:{scale:.95},children:[(0,zf.jsx)("div",{className:"text-2xl",children:s.avatar}),(0,zf.jsxs)("div",{className:"text-left hidden sm:block",children:[(0,zf.jsx)("p",{className:"text-white text-sm font-medium",children:s.name}),(0,zf.jsxs)("p",{className:"text-white/70 text-xs",children:["Speed ",s.learningSpeed,"/5"]})]}),(0,zf.jsx)(Mf.div,{animate:{rotate:n?180:0},transition:{duration:.2},className:"text-white/70",children:"\u25bc"})]}),(0,zf.jsx)(Jf,{children:n&&(0,zf.jsxs)(zf.Fragment,{children:[(0,zf.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>a(!1)}),(0,zf.jsx)(Mf.div,{className:"absolute right-0 top-full mt-2 w-48 bg-white/95 backdrop-blur rounded-xl shadow-xl border border-white/20 z-50",initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.2},children:(0,zf.jsxs)("div",{className:"p-2",children:[(0,zf.jsxs)("div",{className:"px-3 py-2 border-b border-gray-200",children:[(0,zf.jsx)("p",{className:"font-medium text-gray-800",children:s.name}),(0,zf.jsx)("p",{className:"text-sm text-gray-600",children:s.learningSpeed<=2?"Careful Explorer":s.learningSpeed>=4?"Quick Thinker":"Balanced Student"})]}),(0,zf.jsxs)("div",{className:"py-1",children:[(0,zf.jsxs)("button",{className:"w-full flex items-center gap-3 px-3 py-2 text-left text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",onClick:()=>a(!1),children:[(0,zf.jsx)("span",{className:"text-lg",children:"\ud83d\udc64"}),(0,zf.jsx)("span",{className:"text-sm",children:"Profile"})]}),(0,zf.jsxs)("button",{className:"w-full flex items-center gap-3 px-3 py-2 text-left text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",onClick:()=>a(!1),children:[(0,zf.jsx)("span",{className:"text-lg",children:"\u2699\ufe0f"}),(0,zf.jsx)("span",{className:"text-sm",children:"Settings"})]}),(0,zf.jsx)("hr",{className:"my-1 border-gray-200"}),(0,zf.jsxs)("button",{className:"w-full flex items-center gap-3 px-3 py-2 text-left text-red-600 hover:bg-red-50 rounded-lg transition-colors",onClick:()=>{window.confirm("Sign out of SciFly? You'll need to sign in again to continue your learning journey.")&&i(Qi()),a(!1)},children:[(0,zf.jsx)("span",{className:"text-lg",children:"\ud83d\udeaa"}),(0,zf.jsx)("span",{className:"text-sm",children:"Sign Out"})]})]})]})})]})})]}):null},Zf=e=>{let{onNavigate:t}=e;const{dailyProgress:n,dailyGoal:a,totalScore:i,streak:s}=Eo(e=>e.progress),{currentUser:o}=Eo(e=>e.user),l=To(),[c,u]=(0,r.useState)(!1);return(0,zf.jsxs)("div",{className:"min-h-screen space-background p-4 relative",children:[(0,zf.jsx)(qf,{}),(0,zf.jsxs)(Mf.header,{className:"flex justify-between items-center mb-8",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(0,zf.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zf.jsx)("div",{className:"text-4xl",children:(null===o||void 0===o?void 0:o.avatar)||"\ud83d\udc64"}),(0,zf.jsxs)("div",{children:[(0,zf.jsx)("h1",{className:"text-white font-comic text-2xl font-bold",children:o?"Hi, ".concat(o.name,"! \ud83d\ude80"):"SciFly \ud83d\ude80"}),(0,zf.jsx)("p",{className:"text-white/80 text-sm",children:o?"".concat(o.learningSpeed<=2?"Steady explorer":o.learningSpeed>=4?"Quick learner":"Balanced student"," \u2022 Ready to learn?"):"Your science adventure starts here!"})]})]}),(0,zf.jsxs)("div",{className:"flex items-center gap-4",children:[o&&(0,zf.jsx)("div",{className:"bg-white/20 backdrop-blur rounded-2xl px-3 py-2 glass-3d tilt-3d",children:(0,zf.jsxs)("div",{className:"text-white text-center",children:[(0,zf.jsx)("p",{className:"text-xs opacity-80",children:"Learning Speed"}),(0,zf.jsxs)("p",{className:"font-bold",children:[o.learningSpeed,"/5 ",o.avatar]})]})}),(0,zf.jsx)("div",{className:"bg-white/20 backdrop-blur rounded-2xl px-4 py-2 glass-3d tilt-3d",children:(0,zf.jsxs)("div",{className:"text-white text-center",children:[(0,zf.jsx)("p",{className:"text-xs opacity-80",children:"Streak"}),(0,zf.jsxs)("p",{className:"font-bold",children:[s," \ud83d\udd25"]})]})}),(0,zf.jsx)(Mf.div,{className:"bg-secondary-500 rounded-full p-3 shadow-lg floating-3d",whileHover:{scale:1.1},whileTap:{scale:.9},children:(0,zf.jsx)("span",{className:"text-white text-xl",children:"\u2b50"})}),(0,zf.jsx)(Xf,{})]})]}),(0,zf.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,zf.jsxs)(Mf.div,{className:"relative mb-8",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.6,delay:.2},children:[(0,zf.jsx)("div",{className:"flex justify-center mb-4",children:(0,zf.jsx)(Ff,{size:"lg",animate:!0})}),(0,zf.jsx)(Mf.div,{className:"chat-bubble mx-auto",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.8},children:(0,zf.jsx)("p",{className:"text-gray-700 font-medium",children:o?"Hey ".concat(o.name,"! I've prepared lessons perfect for a ").concat(o.learningSpeed<=2?"careful explorer like you! We'll take our time.":o.learningSpeed>=4?"quick thinker like you! Let's move fast!":"balanced learner like you! Just the right pace."," Ready? \ud83e\udd81"):"Hi! I'm Simba! Welcome to SciFly! Ready to explore amazing science topics? \ud83e\udd81"})})]}),(0,zf.jsxs)(Mf.div,{className:"bg-white/95 backdrop-blur rounded-2xl p-6 mb-6 shadow-xl card-3d glass-3d",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},children:[(0,zf.jsx)("h3",{className:"font-comic font-bold text-gray-800 mb-4",children:"Today's Goal"}),(0,zf.jsx)(Vf,{current:n,total:a,label:"Lessons Completed",color:"success",animate:!0}),(0,zf.jsxs)("div",{className:"flex justify-between mt-4 text-sm",children:[(0,zf.jsxs)("div",{className:"text-center",children:[(0,zf.jsx)("p",{className:"text-gray-500",children:"Total Score"}),(0,zf.jsx)("p",{className:"font-bold text-primary-600",children:i})]}),(0,zf.jsxs)("div",{className:"text-center",children:[(0,zf.jsx)("p",{className:"text-gray-500",children:"Streak"}),(0,zf.jsxs)("p",{className:"font-bold text-secondary-600",children:[s," days"]})]})]})]}),(0,zf.jsx)(Mf.div,{className:"mb-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.6},children:(0,zf.jsx)(Uf,{onClick:()=>u(!0),size:"lg",className:"w-full",icon:"\ud83d\udd2c",children:"Choose a Science Topic"})}),(0,zf.jsxs)(Mf.div,{className:"grid grid-cols-3 gap-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.8},children:[(0,zf.jsxs)(Mf.button,{className:"bg-white/90 backdrop-blur rounded-2xl p-4 shadow-lg text-center tilt-3d glass-3d",onClick:()=>t("quiz"),whileHover:{scale:1.05},whileTap:{scale:.95},children:[(0,zf.jsx)("div",{className:"text-2xl mb-2",children:"\ud83e\udde9"}),(0,zf.jsx)("p",{className:"font-bold text-gray-700 text-sm",children:"Quiz"})]}),(0,zf.jsxs)(Mf.button,{className:"bg-white/90 backdrop-blur rounded-2xl p-4 shadow-lg text-center tilt-3d glass-3d",onClick:()=>t("chat"),whileHover:{scale:1.05},whileTap:{scale:.95},children:[(0,zf.jsx)("div",{className:"text-2xl mb-2",children:"\ud83d\udcad"}),(0,zf.jsx)("p",{className:"font-bold text-gray-700 text-sm",children:"Fun Facts"})]}),(0,zf.jsxs)(Mf.button,{className:"bg-white/90 backdrop-blur rounded-2xl p-4 shadow-lg text-center tilt-3d glass-3d",onClick:()=>t("achievements"),whileHover:{scale:1.05},whileTap:{scale:.95},children:[(0,zf.jsx)("div",{className:"text-2xl mb-2",children:"\ud83c\udfc6"}),(0,zf.jsx)("p",{className:"font-bold text-gray-700 text-sm",children:"Achievements"})]})]})]}),(0,zf.jsx)(Yf,{isOpen:c,onClose:()=>u(!1),onTopicSelect:e=>{l(zi(e)),t("lesson")}})]})},em=()=>(0,zf.jsxs)("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[(0,zf.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-900 via-slate-800 to-blue-900"}),(0,zf.jsx)("div",{className:"absolute inset-0",style:{backgroundImage:"\n        radial-gradient(2px 2px at 20% 30%, #fff, transparent),\n        radial-gradient(2px 2px at 40% 70%, rgba(255,255,255,0.8), transparent),\n        radial-gradient(1px 1px at 90% 40%, #fff, transparent),\n        radial-gradient(1px 1px at 60% 10%, #fff, transparent),\n        radial-gradient(2px 2px at 10% 80%, rgba(255,255,255,0.9), transparent)\n      ",backgroundSize:"550px 400px, 350px 300px, 250px 200px, 150px 100px, 400px 350px"}}),(0,zf.jsx)(Mf.div,{className:"absolute top-20 right-16 w-12 h-12 bg-gradient-to-br from-red-400 to-red-600 rounded-full",animate:{rotate:360,y:[0,-20,0]},transition:{rotate:{duration:30,repeat:1/0},y:{duration:6,repeat:1/0}}}),(0,zf.jsx)(Mf.div,{className:"absolute top-40 left-20 w-8 h-8 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full",animate:{rotate:-360,x:[0,15,0]},transition:{rotate:{duration:25,repeat:1/0},x:{duration:8,repeat:1/0}}})]}),tm=()=>(0,zf.jsxs)("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[(0,zf.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-green-900 via-green-700 to-emerald-800"}),[...Array(15)].map((e,t)=>(0,zf.jsx)(Mf.div,{className:"absolute",style:{left:"".concat(100*Math.random(),"%"),top:"".concat(100*Math.random(),"%")},animate:{y:[0,-30,0],rotate:[0,180,360]},transition:{duration:4+2*Math.random(),repeat:1/0,delay:2*Math.random()},children:(0,zf.jsx)("div",{className:"text-2xl opacity-70",children:["\ud83c\udf43","\ud83c\udf3f","\ud83c\udf40"][Math.floor(3*Math.random())]})},t)),(0,zf.jsx)("div",{className:"absolute bottom-0 left-0 w-full h-32 bg-gradient-to-t from-green-900 to-transparent"}),(0,zf.jsx)(Mf.div,{className:"absolute bottom-0 left-10 w-16 h-24 bg-green-900 opacity-60",style:{clipPath:"polygon(50% 0%, 0% 100%, 100% 100%)"},animate:{scale:[1,1.05,1]},transition:{duration:3,repeat:1/0}})]}),nm=()=>(0,zf.jsxs)("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[(0,zf.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-900 via-cyan-700 to-teal-800"}),(0,zf.jsx)(Mf.div,{className:"absolute bottom-0 w-full h-32 bg-gradient-to-t from-blue-600 to-transparent opacity-50",animate:{x:[-20,20,-20]},transition:{duration:4,repeat:1/0}}),[...Array(10)].map((e,t)=>(0,zf.jsx)(Mf.div,{className:"absolute w-4 h-4 bg-cyan-200 rounded-full opacity-30",style:{left:"".concat(100*Math.random(),"%"),bottom:"".concat(60*Math.random(),"%")},animate:{y:[-100,-200],opacity:[.3,0]},transition:{duration:3+2*Math.random(),repeat:1/0,delay:3*Math.random()}},t)),(0,zf.jsx)(Mf.div,{className:"absolute top-1/3 text-4xl",animate:{x:["100vw","-100px"]},transition:{duration:8,repeat:1/0,delay:2},children:"\ud83d\udc20"})]}),rm=()=>(0,zf.jsxs)("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[(0,zf.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-700 via-blue-600 to-cyan-500"}),(0,zf.jsx)(Mf.div,{className:"absolute top-20 left-10 text-6xl opacity-80",animate:{x:[0,50,0]},transition:{duration:8,repeat:1/0},children:"\u2601\ufe0f"}),(0,zf.jsx)(Mf.div,{className:"absolute top-32 right-16 text-4xl opacity-60",animate:{x:[0,-30,0]},transition:{duration:6,repeat:1/0},children:"\u26c5"}),[...Array(20)].map((e,t)=>(0,zf.jsx)(Mf.div,{className:"absolute w-0.5 h-8 bg-blue-300 opacity-70",style:{left:"".concat(100*Math.random(),"%"),top:"".concat(20*Math.random(),"%")},animate:{y:["0vh","100vh"]},transition:{duration:1+.5*Math.random(),repeat:1/0,delay:2*Math.random()}},t)),(0,zf.jsx)(Mf.div,{className:"absolute top-16 right-1/4 text-3xl",animate:{opacity:[0,1,0]},transition:{duration:.3,repeat:1/0,repeatDelay:5},children:"\u26a1"})]}),am=()=>(0,zf.jsxs)("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[(0,zf.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-900 via-purple-800 to-blue-900"}),(0,zf.jsx)(Mf.div,{className:"absolute top-20 left-16 text-3xl",animate:{rotate:[0,360]},transition:{duration:4,repeat:1/0},children:"\u269b\ufe0f"}),(0,zf.jsx)(Mf.div,{className:"absolute top-40 right-20 text-2xl",animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0},children:"\ud83e\uddea"}),(0,zf.jsx)(Mf.div,{className:"absolute bottom-32 left-12 text-2xl",animate:{y:[0,-10,0]},transition:{duration:3,repeat:1/0},children:"\ud83d\udd2c"}),[...Array(12)].map((e,t)=>(0,zf.jsx)(Mf.div,{className:"absolute w-2 h-2 bg-purple-300 rounded-full opacity-60",style:{left:"".concat(100*Math.random(),"%"),top:"".concat(100*Math.random(),"%")},animate:{y:[0,-20,0],opacity:[.3,.8,.3]},transition:{duration:3+2*Math.random(),repeat:1/0,delay:2*Math.random()}},t))]}),im=()=>(0,zf.jsxs)("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[(0,zf.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-red-900 via-pink-800 to-rose-900"}),(0,zf.jsx)(Mf.div,{className:"absolute top-20 left-1/4 text-4xl",animate:{scale:[1,1.3,1]},transition:{duration:1,repeat:1/0},children:"\u2764\ufe0f"}),(0,zf.jsx)(Mf.div,{className:"absolute top-32 right-16 text-2xl",animate:{rotate:[0,10,0]},transition:{duration:2,repeat:1/0},children:"\ud83e\udde0"}),(0,zf.jsx)(Mf.div,{className:"absolute bottom-40 left-20 text-2xl",animate:{y:[0,-5,0]},transition:{duration:1.5,repeat:1/0},children:"\ud83e\udec1"}),[...Array(8)].map((e,t)=>(0,zf.jsx)(Mf.div,{className:"absolute w-3 h-3 bg-red-400 rounded-full opacity-70",style:{left:"".concat(100*Math.random(),"%"),top:"".concat(100*Math.random(),"%")},animate:{x:[0,30,0],y:[0,-15,0]},transition:{duration:4+2*Math.random(),repeat:1/0,delay:2*Math.random()}},t))]}),sm=()=>(0,zf.jsxs)("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[(0,zf.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-amber-900 via-orange-800 to-red-900"}),(0,zf.jsx)("div",{className:"absolute bottom-0 left-0 w-full h-40 bg-gradient-to-t from-stone-800 to-transparent"}),(0,zf.jsx)(Mf.div,{className:"absolute bottom-0 left-0 w-32 h-32 bg-stone-700",style:{clipPath:"polygon(50% 0%, 0% 100%, 100% 100%)"},animate:{scale:[1,1.02,1]},transition:{duration:4,repeat:1/0}}),(0,zf.jsx)(Mf.div,{className:"absolute bottom-0 right-0 w-40 h-40 bg-stone-600",style:{clipPath:"polygon(50% 0%, 0% 100%, 100% 100%)"},animate:{scale:[1,1.03,1]},transition:{duration:3,repeat:1/0}}),(0,zf.jsx)(Mf.div,{className:"absolute top-20 right-20 text-3xl",animate:{rotate:[0,5,0]},transition:{duration:3,repeat:1/0},children:"\ud83c\udf0b"}),(0,zf.jsx)(Mf.div,{className:"absolute top-40 left-16 text-2xl",animate:{y:[0,-8,0]},transition:{duration:2,repeat:1/0},children:"\ud83c\udfd4\ufe0f"}),[...Array(10)].map((e,t)=>(0,zf.jsx)(Mf.div,{className:"absolute w-1 h-1 bg-amber-400 rounded-full opacity-40",style:{left:"".concat(100*Math.random(),"%"),top:"".concat(100*Math.random(),"%")},animate:{y:[0,-30,0],x:[0,10,0]},transition:{duration:5+3*Math.random(),repeat:1/0,delay:3*Math.random()}},t))]}),om=e=>{let{theme:t,children:n}=e;return(0,zf.jsxs)("div",{className:"relative min-h-screen",children:[(()=>{switch(t){case"space":default:return(0,zf.jsx)(em,{});case"forest":return(0,zf.jsx)(tm,{});case"ocean":return(0,zf.jsx)(nm,{});case"weather":return(0,zf.jsx)(rm,{});case"laboratory":return(0,zf.jsx)(am,{});case"human-body":return(0,zf.jsx)(im,{});case"earth":return(0,zf.jsx)(sm,{})}})(),(0,zf.jsx)("div",{className:"relative z-10",children:n})]})},lm=e=>{let{lessonId:t,topicId:n,children:a,onLessonComplete:i}=e;const s=S(),{currentUser:o}=_(e=>e.user),{currentLessonContent:l,isLoading:c,currentSession:u,adaptiveMode:d,showSpeedSuggestion:h,speedRecommendations:p,debugMode:f}=_(e=>e.adaptive),[m,g]=(0,r.useState)(0),[y,v]=(0,r.useState)(0),[b]=(0,r.useState)(Date.now());(0,r.useEffect)(()=>{if(o&&"disabled"!==d&&t){const e={lessonId:t,userId:o.id,userSpeed:o.learningSpeed,topicId:n};s(os(e)),s(ds({userId:o.id,lessonId:t})),setTimeout(()=>{s(cs(o.id))},3e4)}return()=>{if(u){const e=Math.floor((Date.now()-b)/1e3),t=m>.7;s(hs({completed:t})),i&&i(t,m,e),o&&s(Yi({speed:o.learningSpeed,lessonCompleted:t,engagementScore:m,completionTime:e}))}}},[null===o||void 0===o?void 0:o.learningSpeed,t,d]);const x=(0,r.useCallback)(()=>{if(!u||0===u.interactions.length)return 0;const e=Date.now()-u.startTime;return.3*Math.min(1,e/3e5)+.4*Math.min(1,u.interactions.length/10)+.3*(u.interactions.filter(e=>"complete"===e.interactionType).length>0?1:.5)},[u]),w=(0,r.useCallback)(function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!o||!u||"disabled"===d||!t)return;const r=x();g(r),v(e=>e+1);const a={userId:o.id,lessonId:t,adaptationId:null===l||void 0===l?void 0:l.trackingId,interactionType:e,interactionData:I(I({},n),{},{interactionCount:y,currentSpeed:o.learningSpeed}),engagementScore:r,timeSpentSeconds:Math.floor((Date.now()-b)/1e3)};s(ps(a)),y%3===0&&s(ls(a))},[o,u,l,t,y,x,b]),k=(0,r.useMemo)(()=>o&&l?l.uiConfig||fa(o.learningSpeed):fa(3),[o,l]),j=(0,r.useMemo)(()=>r.isValidElement(a)?r.cloneElement(a,{onInteraction:w,adaptiveContent:null===l||void 0===l?void 0:l.adaptedContent,userSpeed:(null===o||void 0===o?void 0:o.learningSpeed)||3,uiConfig:k,isAdaptive:"disabled"!==d,engagementScore:m,interactionCount:y}):a,[a,w,l,o,k,d,m,y]);if(c)return(0,zf.jsx)("div",{className:"adaptive-lesson-container loading","data-speed":(null===o||void 0===o?void 0:o.learningSpeed)||3,children:(0,zf.jsxs)("div",{className:"loading-indicator",children:[(0,zf.jsx)("div",{className:"spinner animate-spin"}),(0,zf.jsx)("p",{children:"Personalizing your learning experience..."})]})});const C=()=>{if(!h||!p.length)return null;const e=p[0];return(0,zf.jsx)("div",{className:"speed-recommendation-notification bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:(0,zf.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zf.jsxs)("div",{children:[(0,zf.jsx)("h4",{className:"font-semibold text-blue-800",children:"Learning Speed Suggestion"}),(0,zf.jsxs)("p",{className:"text-blue-600 text-sm",children:["Based on your performance, we recommend switching to speed ",e.suggestedSpeed,"."]}),(0,zf.jsxs)("p",{className:"text-blue-500 text-xs mt-1",children:[e.reason," (Confidence: ",Math.round(100*e.confidence),"%)"]})]}),(0,zf.jsxs)("div",{className:"flex gap-2",children:[(0,zf.jsx)("button",{onClick:()=>{s({type:"adaptive/acceptSpeedRecommendation",payload:e.suggestedSpeed}),s({type:"user/updateUserSpeed",payload:{newSpeed:e.suggestedSpeed,reason:"ai_suggestion"}})},className:"bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600",children:"Accept"}),(0,zf.jsx)("button",{onClick:()=>s({type:"adaptive/dismissSpeedSuggestion"}),className:"bg-gray-300 text-gray-700 px-3 py-1 rounded text-sm hover:bg-gray-400",children:"Dismiss"})]})]})})},N=()=>f?(0,zf.jsxs)("div",{className:"debug-info bg-gray-100 border rounded p-3 mb-4 text-xs font-mono",children:[(0,zf.jsx)("h5",{className:"font-bold mb-2",children:"Debug Information"}),(0,zf.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,zf.jsxs)("div",{children:["Speed: ",null===o||void 0===o?void 0:o.learningSpeed]}),(0,zf.jsxs)("div",{children:["Engagement: ",Math.round(100*m),"%"]}),(0,zf.jsxs)("div",{children:["Interactions: ",y]}),(0,zf.jsxs)("div",{children:["Session: ",null===u||void 0===u?void 0:u.sessionId]}),(0,zf.jsxs)("div",{children:["Adaptive Content: ",l?"Loaded":"None"]}),(0,zf.jsxs)("div",{children:["UI Config: ",k?"Applied":"Default"]})]})]}):null;return(0,zf.jsxs)("div",{className:"adaptive-lesson-container speed-".concat((null===o||void 0===o?void 0:o.learningSpeed)||3," ").concat(d),"data-lesson-id":t,"data-user-speed":null===o||void 0===o?void 0:o.learningSpeed,"data-adaptive-mode":d,style:{"--adaptive-font-size":(null===k||void 0===k?void 0:k.fontSize)||"standard","--adaptive-layout":(null===k||void 0===k?void 0:k.layout)||"balanced-layout","--adaptive-animation-speed":(null===k||void 0===k?void 0:k.animations)||"standard","--adaptive-color-scheme":(null===k||void 0===k?void 0:k.colors)||"vibrant"},children:[(0,zf.jsx)(N,{}),(0,zf.jsx)(C,{}),(0,zf.jsx)("div",{className:"adaptive-content-wrapper",children:j}),(0,zf.jsx)("div",{className:"interaction-overlay absolute inset-0 pointer-events-none",onMouseMove:()=>w("move"),onScroll:()=>w("scroll")})]})},cm=e=>{var t,n,a,i;let{data:s,size:o,interactive:l=!1,style:c="simple",onInteraction:u}=e;const[d,h]=(0,r.useState)(null),[p,f]=(0,r.useState)(null),m=()=>{switch(o){case"small":return 60;case"medium":default:return 80;case"large":return 100}};return(0,zf.jsxs)("div",{className:"concept-diagram ".concat(o," ").concat(c," ").concat(l?"interactive":""),children:[(0,zf.jsxs)("svg",{viewBox:"0 0 800 600",className:"diagram-svg",children:[null===(t=s.connections)||void 0===t?void 0:t.map((e,t)=>(0,zf.jsx)("line",{x1:e.from.x,y1:e.from.y,x2:e.to.x,y2:e.to.y,className:"connection ".concat(e.type||"default"),strokeWidth:"simple"===c?2:"detailed"===c?3:4},"connection-".concat(t))),null===(n=s.nodes)||void 0===n?void 0:n.map(e=>(0,zf.jsxs)("g",{className:"diagram-node",children:[(0,zf.jsx)("circle",{cx:e.x,cy:e.y,r:m()/2,className:"node ".concat(e.type||"default"," ").concat(d===e.id?"selected":""," ").concat(p===e.id?"hovered":""),onClick:()=>{return t=e.id,void(l&&(h(t),null===u||void 0===u||u("diagram_node_click",{nodeId:t,nodeData:s.nodes[t]})));var t},onMouseEnter:()=>f(e.id),onMouseLeave:()=>f(null),style:{cursor:l?"pointer":"default"}}),(0,zf.jsx)("text",{x:e.x,y:e.y,textAnchor:"middle",dominantBaseline:"central",className:"node-label ".concat(o),children:e.label})]},e.id))]}),d&&l&&(0,zf.jsxs)("div",{className:"node-details",children:[(0,zf.jsx)("h4",{children:null===(a=s.nodes.find(e=>e.id===d))||void 0===a?void 0:a.label}),(0,zf.jsx)("p",{children:null===(i=s.nodes.find(e=>e.id===d))||void 0===i?void 0:i.description})]})]})},um=e=>{let{concept:t,speed:n="medium",loops:a=1,autoPlay:i=!0,onInteraction:s}=e;const[o,l]=(0,r.useState)(i),[c,u]=(0,r.useState)(0);return(0,zf.jsxs)("div",{className:"concept-animation ".concat(n),children:[(0,zf.jsx)("div",{className:"animation-container",children:(0,zf.jsxs)("div",{className:"animation-content ".concat(t," ").concat(o?"playing":"paused"),children:["photosynthesis"===t&&(0,zf.jsx)(dm,{frame:c}),"water_cycle"===t&&(0,zf.jsx)(hm,{frame:c}),"solar_system"===t&&(0,zf.jsx)(pm,{frame:c}),"cell_division"===t&&(0,zf.jsx)(fm,{frame:c})]})}),(0,zf.jsxs)("div",{className:"animation-controls",children:[(0,zf.jsx)("button",{className:"play-pause-button",onClick:()=>{l(!o),null===s||void 0===s||s("animation_toggle",{concept:t,playing:!o})},children:o?"\u23f8\ufe0f":"\u25b6\ufe0f"}),(0,zf.jsx)("div",{className:"animation-progress",children:(0,zf.jsx)("div",{className:"progress-bar",style:{width:"".concat(c/100*100,"%"),animationDuration:"".concat((()=>{switch(n){case"slow":return 3e3;case"medium":default:return 2e3;case"fast":return 1e3}})(),"ms")}})})]})]})},dm=e=>{let{frame:t}=e;return(0,zf.jsxs)("div",{className:"photosynthesis-animation",children:[(0,zf.jsx)("div",{className:"sun ".concat(t>10?"shining":""),children:"\u2600\ufe0f"}),(0,zf.jsx)("div",{className:"plant ".concat(t>20?"growing":""),children:"\ud83c\udf31"}),(0,zf.jsx)("div",{className:"co2 ".concat(t>30?"flowing":""),children:"CO\u2082"}),(0,zf.jsx)("div",{className:"oxygen ".concat(t>40?"releasing":""),children:"O\u2082"})]})},hm=e=>{let{frame:t}=e;return(0,zf.jsxs)("div",{className:"water-cycle-animation",children:[(0,zf.jsx)("div",{className:"cloud ".concat(t>15?"moving":""),children:"\u2601\ufe0f"}),(0,zf.jsx)("div",{className:"rain ".concat(t>30?"falling":""),children:"\ud83c\udf27\ufe0f"}),(0,zf.jsx)("div",{className:"ocean ".concat(t>45?"evaporating":""),children:"\ud83c\udf0a"})]})},pm=e=>{let{frame:t}=e;return(0,zf.jsxs)("div",{className:"solar-system-animation",children:[(0,zf.jsx)("div",{className:"sun",children:"\u2b50"}),(0,zf.jsx)("div",{className:"planet earth ".concat(t>0?"orbiting":""),children:"\ud83c\udf0d"}),(0,zf.jsx)("div",{className:"planet mars ".concat(t>20?"orbiting":""),children:"\ud83d\udd34"})]})},fm=e=>{let{frame:t}=e;return(0,zf.jsx)("div",{className:"cell-division-animation",children:(0,zf.jsx)("div",{className:"cell ".concat(t>25?"dividing":""),children:(0,zf.jsx)("div",{className:"nucleus"})})})},mm=e=>{let{data:t,type:n,userSpeed:a,onInteraction:i}=e;const[s,o]=(0,r.useState)(null),l=e=>{o(e),null===i||void 0===i||i("chart_data_select",{point:e,chartType:n})};return(0,zf.jsxs)("div",{className:"interactive-chart ".concat(n," speed-").concat(a),children:[(0,zf.jsxs)("div",{className:"chart-container",children:["bar"===n&&(0,zf.jsx)(gm,{data:t,interactive:a>=3,onDataPointClick:l}),"line"===n&&(0,zf.jsx)(ym,{data:t,interactive:a>=3,onDataPointClick:l}),"pie"===n&&(0,zf.jsx)(vm,{data:t,interactive:a>=3,onDataPointClick:l})]}),s&&(0,zf.jsxs)("div",{className:"data-point-details",children:[(0,zf.jsx)("h4",{children:s.label}),(0,zf.jsxs)("p",{children:["Value: ",s.value]}),s.description&&(0,zf.jsx)("p",{children:s.description})]})]})},gm=e=>{let{data:t,interactive:n,onDataPointClick:r}=e;return(0,zf.jsx)("div",{className:"bar-chart",children:t.values.map((e,a)=>(0,zf.jsx)("div",{className:"bar ".concat(n?"interactive":""),style:{height:"".concat(e.value/t.max*100,"%")},onClick:()=>n&&(null===r||void 0===r?void 0:r(e)),children:(0,zf.jsx)("span",{className:"bar-label",children:e.label})},a))})},ym=e=>{let{data:t,interactive:n,onDataPointClick:r}=e;return(0,zf.jsxs)("svg",{className:"line-chart",viewBox:"0 0 400 200",children:[(0,zf.jsx)("polyline",{points:t.points.map((e,t)=>"".concat(40*t,",").concat(200-2*e.value)).join(" "),fill:"none",stroke:"blue",strokeWidth:"2"}),t.points.map((e,t)=>(0,zf.jsx)("circle",{cx:40*t,cy:200-2*e.value,r:"4",fill:"blue",className:n?"interactive":"",onClick:()=>n&&(null===r||void 0===r?void 0:r(e)),style:{cursor:n?"pointer":"default"}},t))]})},vm=e=>{let{data:t,interactive:n,onDataPointClick:r}=e,a=0;return(0,zf.jsx)("svg",{className:"pie-chart",viewBox:"0 0 200 200",children:t.segments.map((e,i)=>{const s=e.value/t.total*360,o=100+80*Math.cos(a*Math.PI/180),l=100+80*Math.sin(a*Math.PI/180),c=100+80*Math.cos((a+s)*Math.PI/180),u=100+80*Math.sin((a+s)*Math.PI/180),d=s>180?1:0,h="M 100 100 L ".concat(o," ").concat(l," A 80 80 0 ").concat(d," 1 ").concat(c," ").concat(u," Z");return a+=s,(0,zf.jsx)("path",{d:h,fill:e.color,className:n?"interactive":"",onClick:()=>n&&(null===r||void 0===r?void 0:r(e)),style:{cursor:n?"pointer":"default"}},i)})})},bm=e=>{let{data:t,userSpeed:n,onInteraction:a}=e;const[i,s]=(0,r.useState)(0);return(0,zf.jsxs)("div",{className:"infographic speed-".concat(n),children:[(0,zf.jsx)("h3",{className:"infographic-title",children:t.title}),(0,zf.jsx)("div",{className:"infographic-sections",children:t.sections.map((e,t)=>(0,zf.jsxs)("div",{className:"infographic-section ".concat(i===t?"active":""),onClick:()=>{s(t),null===a||void 0===a||a("infographic_section_select",{section:t,sectionData:e})},children:[(0,zf.jsx)("div",{className:"section-icon",children:e.icon}),(0,zf.jsx)("h4",{className:"section-title",children:e.title}),(0,zf.jsx)("p",{className:"section-description",children:e.description}),e.stats&&(0,zf.jsx)("div",{className:"section-stats",children:e.stats.map((e,t)=>(0,zf.jsxs)("div",{className:"stat",children:[(0,zf.jsx)("span",{className:"stat-value",children:e.value}),(0,zf.jsx)("span",{className:"stat-label",children:e.label})]},t))})]},t))})]})},xm=e=>{let{total:t,current:n,onChange:r,userSpeed:a}=e;return(0,zf.jsx)("div",{className:"visual-navigation ".concat(a<=2?"simple-dots":3===a?"interactive-dots":"compact-tabs"),children:Array.from({length:t},(e,t)=>(0,zf.jsx)("button",{className:"nav-item ".concat(n===t?"active":""),onClick:()=>r(t),children:a<=2?"\u25cf":3===a?"".concat(t+1):"Tab ".concat(t+1)},t))})},wm=e=>{let{content:t,userSpeed:n,topic:a,onInteraction:i}=e;const s=aa(n),[o,l]=(0,r.useState)(0),c=(0,r.useMemo)(()=>null!==t&&void 0!==t&&t.visual?t.visual.map((e,t)=>I(I({},e),{},{id:"visual-".concat(t),size:"extensive"===s.characteristics.visualSupport?"large":"moderate"===s.characteristics.visualSupport?"medium":"small",style:"single"===s.characteristics.complexity?"simple":"moderate"===s.characteristics.complexity?"detailed":"complex"})):[],[t,s]);return"simple-display"===t.type?(0,zf.jsx)("div",{className:"visual-content-renderer speed-".concat(n," simple-display"),children:(0,zf.jsx)("div",{className:"simple-content-container",children:(0,zf.jsxs)("div",{className:"simple-visual-element",children:[(0,zf.jsx)("div",{className:"simple-image",children:(0,zf.jsx)("span",{className:"emoji-icon",children:t.image})}),(0,zf.jsxs)("div",{className:"simple-text-content",children:[(0,zf.jsx)("h3",{className:"simple-title",children:t.title}),(0,zf.jsx)("p",{className:"simple-description",children:t.description}),(0,zf.jsxs)("div",{className:"simple-tip",children:[(0,zf.jsx)("span",{className:"tip-icon",children:"\ud83d\udca1"}),(0,zf.jsx)("span",{className:"tip-text",children:t.tip})]})]})]})})}):(0,zf.jsxs)("div",{className:"visual-content-renderer speed-".concat(n),children:[(0,zf.jsx)("div",{className:"visual-content-container",children:c.map((e,t)=>(0,zf.jsxs)("div",{className:"visual-element ".concat(e.type," ").concat(o===t?"active":""),children:["diagram"===e.type&&(0,zf.jsx)(cm,{data:e.data,size:e.size,interactive:n>=3,style:e.style,onInteraction:i}),"animation"===e.type&&(0,zf.jsx)(um,{concept:e.concept,speed:"standard"===s.uiElements.animations?"medium":"quick"===s.uiElements.animations?"fast":"slow",autoPlay:n<=2,onInteraction:i}),"chart"===e.type&&(0,zf.jsx)(mm,{data:e.data,type:e.chartType,userSpeed:n,onInteraction:i}),"infographic"===e.type&&(0,zf.jsx)(bm,{data:e.data,userSpeed:n,onInteraction:i})]},e.id))}),c.length>1&&(0,zf.jsx)(xm,{total:c.length,current:o,onChange:l,userSpeed:n})]})},Sm=e=>{let{activity:t,userSpeed:n,onComplete:a,onInteraction:i}=e;const[s,o]=(0,r.useState)(null),[l,c]=(0,r.useState)([]),[u,d]=(0,r.useState)(0),h=n<=2?"easy":3===n?"medium":"hard",p=n<=2;return(0,zf.jsxs)("div",{className:"drag-drop-activity ".concat(h),children:[(0,zf.jsx)("h3",{className:"activity-title",children:t.title}),(0,zf.jsx)("p",{className:"activity-instructions",children:t.instructions}),(0,zf.jsxs)("div",{className:"drag-drop-container",children:[(0,zf.jsxs)("div",{className:"draggable-items",children:[(0,zf.jsx)("h4",{children:"Items to Match:"}),t.items.map(e=>{const t=l.some(t=>t.item===e.id&&t.correct);return(0,zf.jsxs)("div",{className:"draggable-item ".concat(t?"matched":""," ").concat(s===e.id?"dragging":""),draggable:!t,onDragStart:()=>{return t=e.id,o(t),void(null===i||void 0===i||i("drag_start",{itemId:t,userSpeed:n}));var t},children:[(0,zf.jsxs)("div",{className:"item-content",children:[e.icon&&(0,zf.jsx)("span",{className:"item-icon",children:e.icon}),(0,zf.jsx)("span",{className:"item-label",children:e.label})]}),p&&e.hint&&(0,zf.jsx)("div",{className:"item-hint",children:e.hint})]},e.id)})]}),(0,zf.jsxs)("div",{className:"drop-targets",children:[(0,zf.jsx)("h4",{children:"Drop Zones:"}),t.targets.map(e=>{var n;const r=l.find(t=>t.target===e.id);return(0,zf.jsxs)("div",{className:"drop-target ".concat(r?r.correct?"correct":"incorrect":""),onDragOver:e=>e.preventDefault(),onDrop:()=>(e=>{if(!s)return;const n=t.correctMatches[s]===e,r={item:s,target:e,correct:n};c(e=>[...e,r]),d(e=>e+1),o(null),null===i||void 0===i||i("drop_attempt",{itemId:s,targetId:e,correct:n,attempts:u+1});const h=Object.keys(t.correctMatches).length;[...l,r].filter(e=>e.correct).length===h&&(null===a||void 0===a||a({matches:[...l,r],attempts:u+1}))})(e.id),children:[(0,zf.jsxs)("div",{className:"target-content",children:[e.icon&&(0,zf.jsx)("span",{className:"target-icon",children:e.icon}),(0,zf.jsx)("span",{className:"target-label",children:e.label})]}),r&&(0,zf.jsxs)("div",{className:"matched-item",children:[null===(n=t.items.find(e=>e.id===r.item))||void 0===n?void 0:n.label,r.correct?" \u2705":" \u274c"]})]},e.id)})]})]}),(0,zf.jsxs)("div",{className:"activity-progress",children:[(0,zf.jsxs)("span",{children:["Attempts: ",u]}),(0,zf.jsxs)("span",{children:["Correct: ",l.filter(e=>e.correct).length," / ",Object.keys(t.correctMatches).length]})]})]})},km=e=>{let{activity:t,userSpeed:n,onComplete:a,onInteraction:i}=e;const[s,o]=(0,r.useState)(t.sliders.reduce((e,t)=>(e[t.id]=t.defaultValue||t.min,e),{})),[l,c]=(0,r.useState)(null);return(0,zf.jsxs)("div",{className:"slider-activity speed-".concat(n),children:[(0,zf.jsx)("h3",{className:"activity-title",children:t.title}),(0,zf.jsx)("p",{className:"activity-instructions",children:t.instructions}),(0,zf.jsx)("div",{className:"sliders-container",children:t.sliders.map(e=>(0,zf.jsxs)("div",{className:"slider-control",children:[(0,zf.jsxs)("label",{className:"slider-label",children:[e.label,": ",s[e.id]," ",e.unit||""]}),(0,zf.jsx)("input",{type:"range",min:e.min,max:e.max,step:e.step||1,value:s[e.id],onChange:n=>((e,n)=>{const r=I(I({},s),{},{[e]:n});o(r);const l=t.calculateResult(r);c(l),null===i||void 0===i||i("slider_change",{sliderId:e,value:n,result:l}),t.targetCheck&&t.targetCheck(l)&&(null===a||void 0===a||a({values:r,result:l}))})(e.id,Number(n.target.value)),className:"slider-input"}),(0,zf.jsxs)("div",{className:"slider-range",children:[(0,zf.jsx)("span",{children:e.min}),(0,zf.jsx)("span",{children:e.max})]})]},e.id))}),l&&(0,zf.jsxs)("div",{className:"result-display",children:[(0,zf.jsx)("h4",{children:"Result:"}),(0,zf.jsx)("div",{className:"result-content",children:t.renderResult?t.renderResult(l):(0,zf.jsx)("pre",{children:JSON.stringify(l,null,2)})})]}),t.target&&(0,zf.jsxs)("div",{className:"target-display",children:[(0,zf.jsxs)("h4",{children:["Target: ",t.target.description]}),(0,zf.jsx)("div",{className:"target-status ".concat(l&&t.targetCheck&&t.targetCheck(l)?"achieved":"not-achieved"),children:l&&t.targetCheck&&t.targetCheck(l)?"\u2705 Target Achieved!":"\ud83c\udfaf Keep Adjusting"})]})]})},jm=e=>{let{activity:t,userSpeed:n,onComplete:a,onInteraction:i}=e;const[s,o]=(0,r.useState)({placed:[],available:[...t.components]}),[l,c]=(0,r.useState)(!1);return(0,zf.jsxs)("div",{className:"building-activity speed-".concat(n),children:[(0,zf.jsx)("h3",{className:"activity-title",children:t.title}),(0,zf.jsx)("p",{className:"activity-instructions",children:t.instructions}),(0,zf.jsxs)("div",{className:"building-container",children:[(0,zf.jsxs)("div",{className:"component-palette",children:[(0,zf.jsx)("h4",{children:"Available Components:"}),s.available.map(e=>(0,zf.jsxs)("div",{className:"component-item",draggable:!0,onDragStart:t=>{t.dataTransfer.setData("component",JSON.stringify(e))},children:[(0,zf.jsx)("div",{className:"component-icon",children:e.icon}),(0,zf.jsx)("div",{className:"component-label",children:e.label})]},e.id))]}),(0,zf.jsxs)("div",{className:"build-area",onDragOver:e=>e.preventDefault(),onDrop:e=>{e.preventDefault();const n=e.dataTransfer.getData("component");if(n){const r=JSON.parse(n),l=e.currentTarget.getBoundingClientRect();((e,n)=>{const r=[...s.placed,I(I({},e),{},{position:n})],l=s.available.filter(t=>t.id!==e.id);o({placed:r,available:l});const u=!t.validateBuild||t.validateBuild(r);c(u),null===i||void 0===i||i("component_place",{component:e,position:n,isValid:u}),u&&0===l.length&&(null===a||void 0===a||a({build:r,isValid:u}))})(r,{x:e.clientX-l.left,y:e.clientY-l.top})}},children:[(0,zf.jsx)("h4",{children:"Build Area:"}),s.placed.map(e=>(0,zf.jsxs)("div",{className:"placed-component",style:{position:"absolute",left:e.position.x,top:e.position.y},onClick:()=>(e=>{const t=s.placed.find(t=>t.id===e);if(!t)return;const n=s.placed.filter(t=>t.id!==e),r=[...s.available,I(I({},t),{},{position:void 0})];o({placed:n,available:r}),null===i||void 0===i||i("component_remove",{componentId:e})})(e.id),children:[(0,zf.jsx)("div",{className:"component-icon",children:e.icon}),(0,zf.jsx)("div",{className:"component-label",children:e.label})]},"placed-".concat(e.id))),0===s.placed.length&&(0,zf.jsx)("div",{className:"build-placeholder",children:"Drag components here to build your model"})]})]}),(0,zf.jsxs)("div",{className:"build-status",children:[(0,zf.jsx)("div",{className:"validation-status ".concat(l?"valid":"invalid"),children:l?"\u2705 Valid Build":"\u26a0\ufe0f Check Your Build"}),(0,zf.jsxs)("div",{className:"progress",children:[s.placed.length," / ",t.components.length," components placed"]})]})]})},_m=e=>{let{activity:t,userSpeed:n,onComplete:a,onInteraction:i}=e;const[s,o]=(0,r.useState)({hypothesis:"",variables:t.defaultVariables||{},results:[],currentTrial:0}),l=(e,t)=>{o(n=>I(I({},n),{},{variables:I(I({},n.variables),{},{[e]:t})}))};return(0,zf.jsxs)("div",{className:"experiment-activity speed-".concat(n),children:[(0,zf.jsx)("h3",{className:"activity-title",children:t.title}),(0,zf.jsx)("p",{className:"activity-instructions",children:t.instructions}),(0,zf.jsxs)("div",{className:"experiment-setup",children:[(0,zf.jsxs)("div",{className:"hypothesis-section",children:[(0,zf.jsx)("label",{children:"Your Hypothesis:"}),(0,zf.jsx)("textarea",{value:s.hypothesis,onChange:e=>o(t=>I(I({},t),{},{hypothesis:e.target.value})),placeholder:"What do you think will happen?",rows:3})]}),(0,zf.jsxs)("div",{className:"variables-section",children:[(0,zf.jsx)("h4",{children:"Experiment Variables:"}),t.variables.map(e=>(0,zf.jsxs)("div",{className:"variable-control",children:[(0,zf.jsxs)("label",{children:[e.label,":"]}),"slider"===e.type&&(0,zf.jsx)("input",{type:"range",min:e.min,max:e.max,step:e.step||1,value:s.variables[e.id]||e.default,onChange:t=>l(e.id,Number(t.target.value))}),"select"===e.type&&(0,zf.jsx)("select",{value:s.variables[e.id]||e.default,onChange:t=>l(e.id,t.target.value),children:e.options.map(e=>(0,zf.jsx)("option",{value:e.value,children:e.label},e.value))})]},e.id))]}),(0,zf.jsxs)("button",{className:"run-experiment-button",onClick:()=>{const e=t.runSimulation(s.variables),n=[...s.results,{trial:s.currentTrial+1,variables:I({},s.variables),result:e}],r=I(I({},s),{},{results:n,currentTrial:s.currentTrial+1});o(r),null===i||void 0===i||i("experiment_run",{trial:r.currentTrial,result:e}),n.length>=t.minTrials&&(null===a||void 0===a||a({hypothesis:s.hypothesis,results:n,conclusion:t.analyzeResults?t.analyzeResults(n):null}))},disabled:!s.hypothesis.trim(),children:["Run Experiment (Trial ",s.currentTrial+1,")"]})]}),s.results.length>0&&(0,zf.jsxs)("div",{className:"experiment-results",children:[(0,zf.jsx)("h4",{children:"Results:"}),(0,zf.jsx)("div",{className:"results-table",children:s.results.map((e,t)=>(0,zf.jsxs)("div",{className:"result-row",children:[(0,zf.jsxs)("span",{children:["Trial ",e.trial,":"]}),(0,zf.jsx)("span",{children:JSON.stringify(e.result)})]},t))})]})]})},Cm=e=>{let{total:t,current:n,completed:r,onChange:a,userSpeed:i}=e;return(0,zf.jsx)("div",{className:"activity-navigation speed-".concat(i),children:Array.from({length:t},(e,t)=>(0,zf.jsx)("button",{className:"nav-button ".concat(n===t?"active":""," ").concat(r.includes(t)?"completed":""),onClick:()=>a(t),children:r.includes(t)?"\u2705":t+1},t))})},Nm=e=>{let{content:t,userSpeed:n,onInteraction:a}=e;aa(n);const[i,s]=(0,r.useState)(0),[o,l]=(0,r.useState)([]),c=(null===t||void 0===t?void 0:t.interactive)||[],u=(e,t)=>{l(t=>[...t,e]),null===a||void 0===a||a("activity_complete",{activityIndex:e,result:t,userSpeed:n}),n>=4&&e<c.length-1&&setTimeout(()=>s(e+1),1e3)};return(0,zf.jsxs)("div",{className:"interactive-content-renderer speed-".concat(n),children:[(0,zf.jsx)("div",{className:"activity-container",children:c.map((e,t)=>(0,zf.jsxs)("div",{className:"activity ".concat(i===t?"active":""," ").concat(o.includes(t)?"completed":""),children:["drag-drop"===e.type&&(0,zf.jsx)(Sm,{activity:e,userSpeed:n,onComplete:e=>u(t,e),onInteraction:a}),"slider"===e.type&&(0,zf.jsx)(km,{activity:e,userSpeed:n,onComplete:e=>u(t,e),onInteraction:a}),"build"===e.type&&(0,zf.jsx)(jm,{activity:e,userSpeed:n,onComplete:e=>u(t,e),onInteraction:a}),"experiment"===e.type&&(0,zf.jsx)(_m,{activity:e,userSpeed:n,onComplete:e=>u(t,e),onInteraction:a})]},"activity-".concat(t)))}),c.length>1&&(0,zf.jsx)(Cm,{total:c.length,current:i,completed:o,onChange:s,userSpeed:n})]})},Tm=e=>{let{messages:t,currentInput:n,setCurrentInput:a,onSendMessage:i,isTyping:s,userSpeed:o,chatEndRef:l}=e;const[c,u]=(0,r.useState)(["Can you explain this further?","What's an example?","How does this relate to...?","What would happen if...?"]);return(0,zf.jsxs)("div",{className:"chat-interface",children:[(0,zf.jsxs)("div",{className:"chat-messages",children:[t.map(e=>{var t;return(0,zf.jsxs)("div",{className:"message ".concat(e.type," ").concat(null!==(t=e.metadata)&&void 0!==t&&t.isIntroduction?"introduction":""),children:[(0,zf.jsx)("div",{className:"message-avatar",children:"user"===e.type?"\ud83d\udc64":"\ud83e\udd16"}),(0,zf.jsxs)("div",{className:"message-content",children:[(0,zf.jsx)("div",{className:"message-text",children:e.content}),(0,zf.jsx)("div",{className:"message-timestamp",children:e.timestamp.toLocaleTimeString()})]})]},e.id)}),s&&(0,zf.jsxs)("div",{className:"message ai typing",children:[(0,zf.jsx)("div",{className:"message-avatar",children:"\ud83e\udd16"}),(0,zf.jsx)("div",{className:"message-content",children:(0,zf.jsxs)("div",{className:"typing-indicator",children:[(0,zf.jsx)("span",{}),(0,zf.jsx)("span",{}),(0,zf.jsx)("span",{})]})})]}),(0,zf.jsx)("div",{ref:l})]}),o>=4&&c.length>0&&(0,zf.jsxs)("div",{className:"quick-replies",children:[(0,zf.jsx)("span",{className:"quick-replies-label",children:"Quick replies:"}),c.map((e,t)=>(0,zf.jsx)("button",{className:"quick-reply-button",onClick:()=>(e=>{i(e)})(e),children:e},t))]}),(0,zf.jsxs)("div",{className:"chat-input",children:[(0,zf.jsx)("textarea",{value:n,onChange:e=>a(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),i(n))},placeholder:"Type your message... (Press Enter to send)",rows:5===o?3:2,disabled:s}),(0,zf.jsx)("button",{onClick:()=>i(n),disabled:!n.trim()||s,className:"send-button",children:"Send"})]})]})},Em=e=>{let{questions:t,userSpeed:n,onInteraction:a}=e;const[i,s]=(0,r.useState)(0),[o,l]=(0,r.useState)({}),[c,u]=(0,r.useState)([]),d=(()=>{const e=n<=3?["basic","intermediate"]:4===n?["basic","intermediate","advanced"]:["intermediate","advanced"];return t.filter(t=>e.includes(t.difficulty))})();return(0,zf.jsxs)("div",{className:"question-interface",children:[(0,zf.jsxs)("div",{className:"question-header",children:[(0,zf.jsx)("h4",{children:"Explore These Questions"}),(0,zf.jsxs)("div",{className:"question-progress",children:[Object.keys(o).length," / ",d.length," answered"]})]}),(0,zf.jsx)("div",{className:"questions-list",children:d.map((e,t)=>(0,zf.jsxs)("div",{className:"question-card ".concat(c.includes(e.id)?"expanded":""),children:[(0,zf.jsxs)("div",{className:"question-header",onClick:()=>{return t=e.id,void u(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},children:[(0,zf.jsx)("h5",{className:"question-text",children:e.question}),(0,zf.jsxs)("div",{className:"question-meta",children:[(0,zf.jsx)("span",{className:"difficulty ".concat(e.difficulty),children:e.difficulty}),(0,zf.jsx)("span",{className:"category ".concat(e.category),children:e.category})]})]}),c.includes(e.id)&&(0,zf.jsxs)("div",{className:"question-content",children:[(0,zf.jsx)("textarea",{value:o[e.id]||"",onChange:t=>{return r=e.id,i=t.target.value,l(e=>I(I({},e),{},{[r]:i})),void(null===a||void 0===a||a("question_answered",{questionId:r,answer:i,userSpeed:n}));var r,i},placeholder:"Share your thoughts...",rows:5===n?4:3}),e.followUp&&e.followUp.length>0&&(0,zf.jsxs)("div",{className:"follow-up-questions",children:[(0,zf.jsx)("h6",{children:"Follow-up questions:"}),e.followUp.map((e,t)=>(0,zf.jsx)("div",{className:"follow-up-question",children:e},t))]})]})]},e.id))})]})},Pm=e=>{var t;let{topics:n,userSpeed:a,onInteraction:i}=e;const[s,o]=(0,r.useState)(null),[l,c]=(0,r.useState)({}),[u,d]=(0,r.useState)(""),h=n.find(e=>e.id===s);return(0,zf.jsx)("div",{className:"discussion-interface",children:s?(0,zf.jsxs)("div",{className:"topic-discussion",children:[(0,zf.jsxs)("div",{className:"discussion-header",children:[(0,zf.jsx)("button",{className:"back-button",onClick:()=>o(null),children:"\u2190 Back to Topics"}),(0,zf.jsx)("h4",{children:null===h||void 0===h?void 0:h.title})]}),(0,zf.jsx)("div",{className:"discussion-posts",children:null===(t=l[s])||void 0===t?void 0:t.map(e=>(0,zf.jsxs)("div",{className:"discussion-post",children:[(0,zf.jsxs)("div",{className:"post-header",children:[(0,zf.jsx)("span",{className:"post-author",children:e.author}),(0,zf.jsx)("span",{className:"post-timestamp",children:e.timestamp.toLocaleTimeString()})]}),(0,zf.jsx)("div",{className:"post-content",children:e.content}),(0,zf.jsxs)("div",{className:"post-actions",children:[(0,zf.jsxs)("button",{className:"like-button",children:["\ud83d\udc4d ",e.likes]}),(0,zf.jsx)("button",{className:"reply-button",children:"Reply"})]})]},e.id))}),(0,zf.jsxs)("div",{className:"new-post",children:[(0,zf.jsx)("textarea",{value:u,onChange:e=>d(e.target.value),placeholder:"Share your thoughts on this topic...",rows:5===a?4:3}),(0,zf.jsx)("button",{onClick:()=>(e=>{if(!u.trim())return;const t={id:"post-".concat(Date.now()),content:u,author:"You",timestamp:new Date,likes:0,replies:[]};c(n=>I(I({},n),{},{[e]:[...n[e]||[],t]})),d(""),null===i||void 0===i||i("discussion_post_created",{topicId:e,post:t,userSpeed:a})})(s),disabled:!u.trim(),className:"post-button",children:"Post"})]})]}):(0,zf.jsxs)("div",{className:"topic-selection",children:[(0,zf.jsx)("h4",{children:"Choose a Discussion Topic"}),(0,zf.jsx)("div",{className:"topics-grid",children:n.map(e=>{var t;return(0,zf.jsxs)("div",{className:"topic-card",onClick:()=>{return t=e.id,o(t),void(null===i||void 0===i||i("discussion_topic_selected",{topicId:t,userSpeed:a}));var t},children:[(0,zf.jsx)("div",{className:"topic-icon",children:e.icon}),(0,zf.jsx)("h5",{className:"topic-title",children:e.title}),(0,zf.jsx)("p",{className:"topic-description",children:e.description}),(0,zf.jsx)("div",{className:"topic-meta",children:(0,zf.jsxs)("span",{className:"post-count",children:[(null===(t=l[e.id])||void 0===t?void 0:t.length)||0," posts"]})})]},e.id)})})]})})},Im=(e,t,n)=>{const r={greeting:["Hello! I'm here to help you learn. What would you like to explore?","Hi there! Ready to dive deeper into this topic?","Great to meet you! What questions can I help answer?"],explanation:["Let me break that down for you...","That's a great question! Here's how I'd explain it...","I can help clarify that concept..."],encouragement:["You're asking excellent questions!","That's really good thinking!","I can see you're engaging deeply with this material!"],advanced:["Let's explore the deeper implications...","That connects to several advanced concepts...","From a higher-level perspective..."]},a=e.toLowerCase();if(a.includes("hello")||a.includes("hi"))return r.greeting[Math.floor(Math.random()*r.greeting.length)];if(a.includes("explain")||a.includes("what")||a.includes("how")){const e=r.explanation[Math.floor(Math.random()*r.explanation.length)];return n>=5?e+" "+r.advanced[0]:e}return a.includes("why")||a.includes("because")?r.encouragement[Math.floor(Math.random()*r.encouragement.length)]:n>=5?"That's a sophisticated question. Let me provide a comprehensive answer...":"I understand what you're asking. Let me help explain..."},Am=e=>{let{content:t,userSpeed:n,onInteraction:a}=e;aa(n);const[i,s]=(0,r.useState)("chat"),[o,l]=(0,r.useState)([]),[c,u]=(0,r.useState)(""),[d,h]=(0,r.useState)(!1),p=(0,r.useRef)(null);(0,r.useEffect)(()=>{var e;null===(e=p.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[o]),(0,r.useEffect)(()=>{var e;if(null!==t&&void 0!==t&&null!==(e=t.conversation)&&void 0!==e&&e.introduction){const e={id:"intro",type:"ai",content:t.conversation.introduction,timestamp:new Date,metadata:{isIntroduction:!0}};l([e])}},[t]);return(0,zf.jsxs)("div",{className:"conversational-content-renderer speed-".concat(n," ").concat((()=>{switch(n){case 4:return"reading-focused";case 5:return"advanced-conversational";default:return"standard"}})()),children:[(0,zf.jsxs)("div",{className:"conversation-header",children:[(0,zf.jsx)("h3",{children:(null===t||void 0===t?void 0:t.title)||"Interactive Learning"}),(0,zf.jsxs)("div",{className:"conversation-tabs",children:[(0,zf.jsx)("button",{className:"tab ".concat("chat"===i?"active":""),onClick:()=>s("chat"),children:"\ud83d\udcac Chat"}),(0,zf.jsx)("button",{className:"tab ".concat("questions"===i?"active":""),onClick:()=>s("questions"),children:"\u2753 Questions"}),(0,zf.jsx)("button",{className:"tab ".concat("discussion"===i?"active":""),onClick:()=>s("discussion"),children:"\ud83d\udde3\ufe0f Discussion"})]})]}),(0,zf.jsxs)("div",{className:"conversation-content",children:["chat"===i&&(0,zf.jsx)(Tm,{messages:o,currentInput:c,setCurrentInput:u,onSendMessage:async e=>{if(!e.trim())return;const r={id:"user-".concat(Date.now()),type:"user",content:e,timestamp:new Date};l(e=>[...e,r]),u(""),h(!0),null===a||void 0===a||a("chat_message_sent",{message:e,userSpeed:n}),setTimeout(()=>{const a=Im(e,t,n),i={id:"ai-".concat(Date.now()),type:"ai",content:a,timestamp:new Date,metadata:{responseToUser:r.id}};l(e=>[...e,i]),h(!1)},1e3+2e3*Math.random())},isTyping:d,userSpeed:n,chatEndRef:p}),"questions"===i&&(0,zf.jsx)(Em,{questions:(null===t||void 0===t?void 0:t.questions)||[],userSpeed:n,onInteraction:a}),"discussion"===i&&(0,zf.jsx)(Pm,{topics:(null===t||void 0===t?void 0:t.discussionTopics)||[],userSpeed:n,onInteraction:a})]})]})},Lm=e=>{let{children:t}=e;return(0,zf.jsx)("div",{className:"speed-1-layout simplified-visual",children:(0,zf.jsxs)("div",{className:"main-content-column",children:[(0,zf.jsx)("div",{className:"progress-indicator-top",children:(0,zf.jsx)("div",{className:"simple-progress-bar"})}),(0,zf.jsx)("div",{className:"content-focus-area",children:t}),(0,zf.jsxs)("div",{className:"navigation-bottom",children:[(0,zf.jsx)("button",{className:"large-nav-button prev",children:"\u2190 Previous"}),(0,zf.jsx)("button",{className:"large-nav-button next",children:"Next \u2192"})]})]})})},Om=e=>{let{children:t}=e;return(0,zf.jsx)("div",{className:"speed-2-layout visual-reading",children:(0,zf.jsxs)("div",{className:"layout-container",children:[(0,zf.jsx)("div",{className:"visual-column",children:(0,zf.jsx)("div",{className:"visual-content-area"})}),(0,zf.jsxs)("div",{className:"reading-column",children:[(0,zf.jsx)("div",{className:"structured-content",children:t}),(0,zf.jsx)("div",{className:"reading-aids",children:(0,zf.jsx)("div",{className:"key-points-summary"})})]})]})})},Rm=e=>{let{children:t}=e;return(0,zf.jsx)("div",{className:"speed-3-layout visual-kinesthetic",children:(0,zf.jsxs)("div",{className:"balanced-grid",children:[(0,zf.jsx)("div",{className:"content-main",children:t}),(0,zf.jsx)("div",{className:"interactive-sidebar",children:(0,zf.jsxs)("div",{className:"interaction-zone",children:[(0,zf.jsx)("div",{className:"drag-drop-area"}),(0,zf.jsx)("div",{className:"slider-controls"})]})}),(0,zf.jsx)("div",{className:"visual-footer",children:(0,zf.jsx)("div",{className:"concept-diagram"})})]})})},Dm=e=>{let{children:t}=e;return(0,zf.jsx)("div",{className:"speed-4-layout reading-conversational",children:(0,zf.jsxs)("div",{className:"text-focused-layout",children:[(0,zf.jsx)("div",{className:"main-reading-area",children:t}),(0,zf.jsx)("div",{className:"conversational-panel",children:(0,zf.jsxs)("div",{className:"chat-interface",children:[(0,zf.jsx)("div",{className:"ai-suggestions"}),(0,zf.jsx)("div",{className:"question-prompts"})]})})]})})},Mm=e=>{let{children:t}=e;return(0,zf.jsx)("div",{className:"speed-5-layout conversational-kinesthetic",children:(0,zf.jsxs)("div",{className:"advanced-layout",children:[(0,zf.jsx)("div",{className:"primary-content",children:t}),(0,zf.jsxs)("div",{className:"experimental-zone",children:[(0,zf.jsx)("div",{className:"hypothesis-testing"}),(0,zf.jsx)("div",{className:"advanced-interactions"})]}),(0,zf.jsxs)("div",{className:"ai-collaboration",children:[(0,zf.jsx)("div",{className:"smart-chat"}),(0,zf.jsx)("div",{className:"concept-exploration"})]})]})})},zm=e=>{let{speed:t,children:n,className:r=""}=e;const a={1:Lm,2:Om,3:Rm,4:Dm,5:Mm}[t];return(0,zf.jsx)("div",{className:"adaptive-layout-wrapper ".concat(r),children:(0,zf.jsx)(a,{children:n})})},Fm=e=>{let{speed:t,children:n,columns:r}=e;const a=(()=>{if(r)return r;switch(t){case 1:return 1;case 2:case 4:default:return 2;case 3:return 3;case 5:return 4}})();return(0,zf.jsx)("div",{className:"speed-responsive-grid speed-".concat(t,"-grid"),style:{display:"grid",gridTemplateColumns:"repeat(".concat(a,", 1fr)"),gap:1===t?"2rem":5===t?"1rem":"1.5rem"},children:n})},Um=e=>{let{speed:t,onPrevious:n,onNext:r,onMenu:a}=e;const i="speed-navigation ".concat((()=>{switch(t){case 1:return"simple-large-buttons";case 2:return"visual-navigation";case 3:default:return"balanced-navigation";case 4:return"text-focused-navigation";case 5:return"advanced-navigation"}})());return(0,zf.jsx)("nav",{className:i,children:(0,zf.jsxs)("div",{className:"nav-container",children:[1===t&&(0,zf.jsxs)("div",{className:"simple-nav",children:[(0,zf.jsx)("button",{className:"nav-button large",onClick:n,children:"\u2190 Back"}),(0,zf.jsx)("button",{className:"nav-button large primary",onClick:r,children:"Continue \u2192"})]}),2===t&&(0,zf.jsxs)("div",{className:"visual-nav",children:[(0,zf.jsxs)("button",{className:"nav-button icon",onClick:n,children:[(0,zf.jsx)("span",{className:"icon",children:"\u2b05\ufe0f"}),(0,zf.jsx)("span",{className:"label",children:"Previous"})]}),(0,zf.jsxs)("button",{className:"nav-button icon",onClick:a,children:[(0,zf.jsx)("span",{className:"icon",children:"\ud83d\udcda"}),(0,zf.jsx)("span",{className:"label",children:"Menu"})]}),(0,zf.jsxs)("button",{className:"nav-button icon primary",onClick:r,children:[(0,zf.jsx)("span",{className:"label",children:"Next"}),(0,zf.jsx)("span",{className:"icon",children:"\u27a1\ufe0f"})]})]}),3===t&&(0,zf.jsxs)("div",{className:"balanced-nav",children:[(0,zf.jsx)("button",{className:"nav-button interactive",onClick:n,children:"Previous"}),(0,zf.jsx)("div",{className:"progress-indicator",children:(0,zf.jsx)("div",{className:"progress-dots"})}),(0,zf.jsx)("button",{className:"nav-button interactive primary",onClick:r,children:"Next"})]}),4===t&&(0,zf.jsxs)("div",{className:"text-nav",children:[(0,zf.jsx)("button",{className:"nav-button text",onClick:n,children:"\u2190 Previous Section"}),(0,zf.jsx)("button",{className:"nav-button text",onClick:a,children:"Table of Contents"}),(0,zf.jsx)("button",{className:"nav-button text primary",onClick:r,children:"Next Section \u2192"})]}),5===t&&(0,zf.jsxs)("div",{className:"advanced-nav",children:[(0,zf.jsx)("button",{className:"nav-button compact",onClick:n,children:"\u2190 Prev"}),(0,zf.jsxs)("div",{className:"nav-shortcuts",children:[(0,zf.jsx)("button",{className:"shortcut",onClick:a,children:"Menu"}),(0,zf.jsx)("button",{className:"shortcut",children:"Search"}),(0,zf.jsx)("button",{className:"shortcut",children:"Notes"})]}),(0,zf.jsx)("button",{className:"nav-button compact primary",onClick:r,children:"Next \u2192"})]})]})})},Vm=(e,t,n)=>{const r=n.primary,a=n.secondary,i=[];let s=1;switch(t){case 1:s=1;break;case 2:case 4:default:s=2;break;case 3:s=3;break;case 5:s=4}return 1===t?i.push({id:"simple-content",type:"visual",content:{type:"simple-display",title:e.title||"Learning Topic",description:e.description||e.content||"Let's explore this topic together!",image:e.image||"\ud83d\udd2c",tip:e.tip||"You're doing great! Keep learning!",simple:!0},priority:1,modes:[r,a]}):2===t?i.push({id:"visual-content",type:"visual",content:qm(e,t),priority:1,modes:[r,a]}):(i.push({id:"default-visual",type:"visual",content:qm(e,t),priority:1,modes:[r,a]}),t>=3&&i.push({id:"default-interactive",type:"interactive",content:Bm(e,t),priority:2,modes:[r,a]}),t>=4&&i.push({id:"default-conversational",type:"conversational",content:Wm(e,t),priority:3,modes:[r,a]})),{sections:i,gridColumns:s}},qm=(e,t)=>({title:(null===e||void 0===e?void 0:e.title)||"Visual Learning",visual:[{type:"infographic",data:{title:"Key Concepts",sections:[{icon:"\ud83d\udcda",title:"Main Idea",description:(null===e||void 0===e?void 0:e.mainIdea)||"Core concept explanation"},{icon:"\ud83d\udd0d",title:"Details",description:(null===e||void 0===e?void 0:e.details)||"Important details and examples"}]}}]}),Bm=(e,t)=>({title:(null===e||void 0===e?void 0:e.title)||"Interactive Learning",interactive:[{type:"drag-drop",title:"Match the Concepts",instructions:"Drag items to their correct categories",items:[{id:"item1",label:"Concept A",icon:"\ud83c\udd70\ufe0f"},{id:"item2",label:"Concept B",icon:"\ud83c\udd71\ufe0f"}],targets:[{id:"target1",label:"Category 1",icon:"\ud83d\udcc1"},{id:"target2",label:"Category 2",icon:"\ud83d\udcc2"}],correctMatches:{item1:"target1",item2:"target2"}}]}),Wm=(e,t)=>({title:(null===e||void 0===e?void 0:e.title)||"Discussion & Questions",conversation:{introduction:"Hi! I'm here to help you explore this topic. What questions do you have?"},questions:[{id:"q1",question:"What do you think about this concept?",category:"understanding",difficulty:"basic",followUp:["Can you think of an example?","How does this relate to what you already know?"]}],discussionTopics:[{id:"topic1",title:"Real-world Applications",description:"How can we apply this concept in everyday life?",icon:"\ud83c\udf0d"}]}),Hm=e=>({1:"\ud83d\udc22",2:"\ud83d\udc28",3:"\ud83e\udd81",4:"\ud83d\udc0e",5:"\ud83d\ude80"}[e]||"\ud83e\udd81"),Qm=e=>{switch(e){case"lesson_start":case"lesson_view":case"content_view":default:return"view";case"button_click":case"drag_start":case"drop_attempt":case"slider_change":case"chat_message_sent":case"navigation":case"component_place":return"click";case"lesson_complete":case"activity_complete":case"target_achieved":return"complete";case"lesson_skip":case"activity_skip":case"speed_suggestion_dismissed":return"skip"}},Gm=e=>{let{lessonId:t,topicId:n,content:a,onLessonComplete:i,onSpeedChange:s,onInteraction:o,aiEnhanced:l,engagementScore:c,strugglingAreas:u}=e;const d=S(),{currentUser:h}=_(e=>e.user),{currentSession:p}=_(e=>e.adaptive),f=(null===h||void 0===h?void 0:h.learningSpeed)||3,m=aa(f),g=(0,r.useMemo)(()=>Vm(a,f,m),[a,f,m]);(0,r.useEffect)(()=>{if(h&&t){const e={userId:h.id,lessonId:t,interactionType:"view",interactionData:{topicId:n,userSpeed:f,modes:[m.primary,m.secondary],timestamp:(new Date).toISOString(),action:"lesson_start"},engagementScore:0,timeSpentSeconds:0};d(ls(e))}},[t,n,f,m,d,h]);const y=(e,r)=>{if(h&&t){const a=Qm(e),i={userId:h.id,lessonId:t,interactionType:a,interactionData:I(I({},r),{},{topicId:n,userSpeed:f,timestamp:(new Date).toISOString(),originalType:e}),engagementScore:.5,timeSpentSeconds:Math.floor((Date.now()-((null===p||void 0===p?void 0:p.startTime)||Date.now()))/1e3)};d(ls(i))}o&&o(e,r)},v=e=>{y("navigation",{direction:e})};return(0,zf.jsx)("div",{className:"master-content-renderer speed-".concat(f),children:(0,zf.jsxs)(zm,{speed:f,className:"lesson-layout",children:[(0,zf.jsxs)("div",{className:"lesson-header",children:[(0,zf.jsx)("h2",{className:"lesson-title",children:(null===a||void 0===a?void 0:a.title)||"Interactive Lesson"}),(0,zf.jsxs)("div",{className:"lesson-meta",children:[(0,zf.jsxs)("span",{className:"speed-indicator",children:["Speed: ",f," ",Hm(f)]}),(0,zf.jsxs)("span",{className:"modes-indicator",children:["Modes: ",m.primary," + ",m.secondary]})]})]}),(0,zf.jsx)("div",{className:"lesson-content",children:(0,zf.jsx)(Fm,{speed:f,columns:g.gridColumns,children:(g.sections||[]).map(e=>{const t=t=>{let{children:n}=t;return(0,zf.jsx)("div",{className:"content-section ".concat(e.type," priority-").concat(e.priority),children:n},e.id)};switch(e.type){case"visual":return(0,zf.jsx)(t,{children:(0,zf.jsx)(wm,{content:e.content,userSpeed:f,topic:n,onInteraction:y})},e.id);case"interactive":return(0,zf.jsx)(t,{children:(0,zf.jsx)(Nm,{content:e.content,userSpeed:f,onInteraction:y})},e.id);case"conversational":return(0,zf.jsx)(t,{children:(0,zf.jsx)(Am,{content:e.content,userSpeed:f,onInteraction:y})},e.id);default:return null}})})}),(0,zf.jsx)("div",{className:"lesson-footer",children:(0,zf.jsx)(Um,{speed:f,onPrevious:()=>v("previous"),onNext:()=>v("next"),onMenu:()=>v("menu")})})]})})},Km=e=>{let{onNavigate:t}=e;const[n,a]=(0,r.useState)(0),i=To(),{currentTopic:s,lessonContent:o,isGeneratingContent:l,contentError:c}=Eo(e=>e.topics),{currentUser:u}=Eo(e=>e.user);if((0,r.useEffect)(()=>{!s||0!==o.length||l||c||i(Oi(s))},[null===s||void 0===s?void 0:s.id,l,c,i]),!s)return t("topics"),null;if(l||!o||0===o.length)return(0,zf.jsx)(om,{theme:s.backgroundTheme,children:(0,zf.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4",children:(0,zf.jsxs)("div",{className:"text-center",children:[(0,zf.jsx)(Ff,{size:"lg",animate:!0}),(0,zf.jsxs)(Mf.div,{className:"mt-4 text-white text-xl font-comic",animate:{opacity:[.5,1,.5]},transition:{duration:2,repeat:1/0},children:["Preparing your ",s.title," lesson... \ud83e\udd81"]})]})})});if(c)return(0,zf.jsx)(om,{theme:s.backgroundTheme,children:(0,zf.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4",children:(0,zf.jsxs)("div",{className:"text-center bg-white/90 backdrop-blur rounded-3xl p-6 max-w-md",children:[(0,zf.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\ude14"}),(0,zf.jsx)("h2",{className:"font-comic text-xl font-bold text-gray-800 mb-2",children:"Oops! Something went wrong"}),(0,zf.jsx)("p",{className:"text-gray-600 mb-4",children:"I couldn't generate the lesson content. Let's try again!"}),(0,zf.jsx)(Uf,{onClick:()=>{i(Ui()),i(Oi(s))},className:"w-full mb-2",children:"Try Again"}),(0,zf.jsx)("button",{onClick:()=>t("topics"),className:"text-gray-500 text-sm underline",children:"Choose Different Topic"})]})})});const d=o[n],h=(n+1)/o.length*100;if(!d)return(0,zf.jsx)(om,{theme:s.backgroundTheme,children:(0,zf.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4",children:(0,zf.jsxs)("div",{className:"text-center",children:[(0,zf.jsx)(Ff,{size:"lg",animate:!0}),(0,zf.jsx)(Mf.div,{className:"mt-4 text-white text-xl font-comic",animate:{opacity:[.5,1,.5]},transition:{duration:2,repeat:1/0},children:"Loading lesson content... \ud83e\udd81"})]})})});return(0,zf.jsx)("div",{className:"lesson-screen-wrapper",children:(0,zf.jsx)(lm,{topicId:s.id,children:(0,zf.jsx)(Jf,{mode:"wait",children:(0,zf.jsx)(Mf.div,{initial:{opacity:0,x:100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},children:(0,zf.jsx)(Gm,{topicId:s.id,content:{title:(null===d||void 0===d?void 0:d.title)||"Loading...",description:(null===d||void 0===d?void 0:d.content)||"Loading content...",tip:(null===d||void 0===d?void 0:d.tip)||"Keep exploring and learning!",image:(null===d||void 0===d?void 0:d.image)||"\ud83d\udd2c",sections:[{type:"visual",content:{type:"concept-animation",title:(null===d||void 0===d?void 0:d.title)||"Concept",description:(null===d||void 0===d?void 0:d.content)||"Loading content...",animation:"photosynthesis",controls:["play","pause","reset"],frames:[{id:"step1",title:"Step 1",description:"Understanding the basics",visual:(null===d||void 0===d?void 0:d.image)||"\ud83d\udd2c"}]}}]},onLessonComplete:e=>{console.log("Lesson completed:",e),u&&o&&(n<o.length-1?(a(n+1),i(Ia({userId:u.id,topicId:s.id,progressData:{progress_percentage:h+100/o.length}}))):(i(Ia({userId:u.id,topicId:s.id,progressData:{progress_percentage:100,completed:!0}})),t("home")))},onSpeedChange:e=>{console.log("Speed changed to:",e)}})},n)})})})},Jm=e=>{let{question:t,options:n,selectedAnswer:r,correctAnswer:a,onAnswerSelect:i,showResult:s=!1,disabled:o=!1}=e;const l=e=>{let t="w-full p-4 rounded-xl border-2 text-left font-medium transition-all duration-300 cursor-pointer tilt-3d";return o&&(t+=" cursor-not-allowed"),"".concat(t,s?e===a?" bg-success-100 border-success-500 text-success-800":e===r&&e!==a?" bg-red-100 border-red-500 text-red-800":" bg-gray-100 border-gray-300 text-gray-600":r===e?" bg-primary-100 border-primary-500 text-primary-800 shadow-md":" bg-white border-gray-200 text-gray-700 hover:border-primary-300 hover:shadow-sm")},c=e=>s?e===a?(0,zf.jsx)("span",{className:"text-success-500 text-xl",children:"\u2713"}):e===r&&e!==a?(0,zf.jsx)("span",{className:"text-red-500 text-xl",children:"\u2717"}):null:null;return(0,zf.jsxs)(Mf.div,{className:"card w-full max-w-2xl mx-auto quiz-card-3d",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3},children:[(0,zf.jsx)("h2",{className:"text-xl font-comic font-bold text-gray-800 mb-6",children:t}),(0,zf.jsx)("div",{className:"space-y-3",children:n.map((e,t)=>(0,zf.jsx)(Mf.button,{className:l(t),onClick:()=>!o&&i(t),disabled:o,whileHover:o?{}:{scale:1.02},whileTap:o?{}:{scale:.98},initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:.1*t},children:(0,zf.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zf.jsx)("span",{children:e}),c(t)]})},t))})]})},$m=e=>{let{onNavigate:t}=e;const n=To(),{currentTopic:a,quizQuestions:i,isGeneratingQuiz:s,quizError:o}=(Eo(e=>e.quiz),Eo(e=>e.topics)),[l,c]=(0,r.useState)(void 0),[u,d]=(0,r.useState)(!1),[h,p]=(0,r.useState)(!1),[f,m]=(0,r.useState)(0),[g,y]=(0,r.useState)(0),[v,b]=(0,r.useState)(!1),{currentUser:x}=Eo(e=>e.user);if((0,r.useEffect)(()=>{if(a)return 0!==i.length||s||o||n(Ri(a)),()=>{n(ei())};t("topics")},[n,null===a||void 0===a?void 0:a.id,s,o,t]),!a)return t("topics"),null;if(s||0===i.length)return(0,zf.jsx)(om,{theme:a.backgroundTheme,children:(0,zf.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4",children:(0,zf.jsxs)("div",{className:"text-center",children:[(0,zf.jsx)(Ff,{size:"lg",animate:!0}),(0,zf.jsxs)(Mf.div,{className:"mt-4 text-white text-xl font-comic",animate:{opacity:[.5,1,.5]},transition:{duration:2,repeat:1/0},children:["Preparing your ",a.title," quiz... \ud83e\udd81"]})]})})});if(o)return(0,zf.jsx)(om,{theme:a.backgroundTheme,children:(0,zf.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4",children:(0,zf.jsxs)("div",{className:"text-center bg-white/90 backdrop-blur rounded-3xl p-6 max-w-md",children:[(0,zf.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\ude14"}),(0,zf.jsx)("h2",{className:"font-comic text-xl font-bold text-gray-800 mb-2",children:"Oops! Something went wrong"}),(0,zf.jsx)("p",{className:"text-gray-600 mb-4",children:"I couldn't generate the quiz questions. Let's try again!"}),(0,zf.jsx)(Uf,{onClick:()=>{n(Ui()),n(Ri(a))},className:"w-full mb-2",children:"Try Again"}),(0,zf.jsx)("button",{onClick:()=>t("topics"),className:"text-gray-500 text-sm underline",children:"Choose Different Topic"})]})})});const w=i[f],S=(i.length,()=>{const e=g/i.length*100;return 100===e?"Perfect! You're a ".concat(a.title," expert! \ud83c\udf1f"):e>=80?"Great job! You really understand ".concat(a.title,"! \ud83c\udf89"):e>=60?"Good work! Keep learning about ".concat(a.title,"! \ud83d\udc4d"):"Nice try! Want to learn more about ".concat(a.title,"? \ud83e\udd14")});return v?(0,zf.jsx)(om,{theme:a.backgroundTheme,children:(0,zf.jsx)("div",{className:"min-h-screen p-4",children:(0,zf.jsx)("div",{className:"max-w-md mx-auto pt-8",children:(0,zf.jsxs)(Mf.div,{className:"bg-white/95 backdrop-blur rounded-3xl p-8 text-center shadow-xl",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5},children:[(0,zf.jsx)(Mf.div,{className:"text-6xl mb-4",animate:{rotate:[0,10,-10,0]},transition:{duration:1,repeat:3},children:"\ud83c\udf89"}),(0,zf.jsx)("h2",{className:"font-comic text-2xl font-bold text-gray-800 mb-4",children:"Quiz Complete!"}),(0,zf.jsxs)("div",{className:"bg-gradient-to-r from-primary-100 to-secondary-100 rounded-2xl p-4 mb-4",children:[(0,zf.jsxs)("div",{className:"text-3xl font-bold text-primary-600 mb-2",children:[g,"/",i.length]}),(0,zf.jsx)("p",{className:"text-gray-600",children:S()})]}),(0,zf.jsx)("div",{className:"flex justify-center mb-6",children:(0,zf.jsx)(Ff,{size:"md",animate:!0})}),(0,zf.jsxs)("div",{className:"space-y-3",children:[(0,zf.jsx)(Uf,{onClick:()=>t("lesson"),className:"w-full",variant:"secondary",icon:"\ud83d\udcda",children:"Review Lesson"}),(0,zf.jsx)(Uf,{onClick:()=>t("home"),className:"w-full",icon:"\ud83c\udfe0",children:"Go Home"})]})]})})})}):(0,zf.jsx)(om,{theme:a.backgroundTheme,children:(0,zf.jsxs)("div",{className:"min-h-screen p-4",children:[(0,zf.jsxs)(Mf.header,{className:"flex items-center justify-between mb-6",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[(0,zf.jsx)(Mf.button,{className:"bg-white/20 backdrop-blur rounded-full p-3",onClick:()=>t("home"),whileHover:{scale:1.1},whileTap:{scale:.9},children:(0,zf.jsx)("span",{className:"text-white text-xl",children:"\u2190"})}),(0,zf.jsx)("div",{className:"flex-1 mx-4",children:(0,zf.jsx)(Vf,{current:f+1,total:i.length,color:"secondary",showPercentage:!1})}),(0,zf.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zf.jsx)("div",{className:"bg-white/20 backdrop-blur rounded-2xl px-3 py-2",children:(0,zf.jsxs)("span",{className:"text-white font-bold text-sm",children:[f+1,"/",i.length]})}),(0,zf.jsx)(Xf,{})]})]}),(0,zf.jsxs)(Mf.div,{className:"text-center mb-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:[(0,zf.jsxs)("h1",{className:"font-comic text-2xl font-bold text-white mb-2",children:["SciFly ",a.title," Quiz \ud83e\udde9"]}),(0,zf.jsx)("p",{className:"text-white/80",children:"Test what you've learned!"})]}),(0,zf.jsx)(Mf.div,{className:"mb-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:(0,zf.jsx)(Jf,{mode:"wait",children:(0,zf.jsx)(Jm,{question:w.question,options:w.options,selectedAnswer:l,correctAnswer:w.correctAnswer,onAnswerSelect:e=>{h||(c(e),d(!0),p(!0),e===w.correctAnswer&&y(g+1))},showResult:u,disabled:h},f)})}),u&&(0,zf.jsxs)(Mf.div,{className:"flex items-start gap-4 mb-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:[(0,zf.jsx)(Ff,{size:"sm",animate:!0}),(0,zf.jsx)("div",{className:"chat-bubble flex-1",children:(0,zf.jsx)("p",{className:"text-gray-700 text-sm",children:l===w.correctAnswer?"Correct! ".concat(w.explanation," \ud83c\udf89"):"Not quite! ".concat(w.explanation," Keep trying! \ud83d\udcaa")})})]}),u&&(0,zf.jsx)(Mf.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:(0,zf.jsx)(Uf,{onClick:()=>{f<i.length-1?(m(f+1),c(void 0),d(!1),p(!1)):(b(!0),g===i.length&&x&&n(Ci({userId:x.id,achievementKey:"quiz_master"})))},className:"w-full",variant:f===i.length-1?"success":"primary",icon:f===i.length-1?"\ud83c\udfc1":"\u2192",children:f===i.length-1?"Finish Quiz":"Next Question"})})]})})},Ym=e=>{let{onNavigate:t}=e;const n=To(),{messages:a,isTyping:i,suggestedQuestions:s,isLoading:o}=Eo(e=>e.chat),{currentUser:l}=Eo(e=>e.user),{currentTopic:c}=Eo(e=>e.topics),[u,d]=(0,r.useState)(""),h=(0,r.useRef)(null);(0,r.useEffect)(()=>{var e;null===(e=h.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[a,i]);const p=e=>{const t=e||u.trim();t&&l&&(n(fi(t)),n(di({userId:l.id,message:t,topicId:null===c||void 0===c?void 0:c.id})),n(_i({userId:l.id,achievementKey:"curious_mind",progress:1})),d(""))};return(0,zf.jsxs)("div",{className:"min-h-screen space-background flex flex-col relative",children:[(0,zf.jsx)(qf,{}),(0,zf.jsxs)(Mf.header,{className:"flex items-center justify-between p-4 bg-white/20 backdrop-blur",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[(0,zf.jsxs)("div",{className:"flex items-center gap-4",children:[(0,zf.jsx)(Mf.button,{className:"bg-white/20 backdrop-blur rounded-full p-2",onClick:()=>t("home"),whileHover:{scale:1.1},whileTap:{scale:.9},children:(0,zf.jsx)("span",{className:"text-white text-xl",children:"\u2190"})}),(0,zf.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zf.jsx)(Ff,{size:"sm",animate:!0}),(0,zf.jsxs)("div",{children:[(0,zf.jsx)("h1",{className:"font-comic text-xl font-bold text-white",children:"SciFly Chat with Simba \ud83d\ude80"}),(0,zf.jsx)("p",{className:"text-white/80 text-sm",children:i?"Simba is typing...":"Ask me anything about science!"})]})]})]}),(0,zf.jsx)(Xf,{})]}),(0,zf.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[(0,zf.jsx)(Jf,{children:a.map((e,t)=>{return(0,zf.jsx)(Mf.div,{className:"flex ".concat("user"===e.sender?"justify-end":"justify-start"),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1*t},children:(0,zf.jsxs)("div",{className:"max-w-xs lg:max-w-md px-4 py-3 rounded-2xl ".concat("user"===e.sender?"bg-primary-500 text-white rounded-br-none":"bg-white text-gray-800 rounded-bl-none shadow-md"),children:[(0,zf.jsx)("p",{className:"text-sm leading-relaxed",children:e.text}),(0,zf.jsx)("p",{className:"text-xs mt-1 ".concat("user"===e.sender?"text-white/70":"text-gray-500"),children:(n=e.timestamp,new Date(n).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))})]})},e.id);var n})}),i&&(0,zf.jsx)(Mf.div,{className:"flex justify-start",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:(0,zf.jsx)("div",{className:"bg-white text-gray-800 rounded-2xl rounded-bl-none shadow-md px-4 py-3",children:(0,zf.jsxs)("div",{className:"flex space-x-1",children:[(0,zf.jsx)(Mf.div,{className:"w-2 h-2 bg-gray-400 rounded-full",animate:{scale:[1,1.2,1]},transition:{duration:1,repeat:1/0,delay:0}}),(0,zf.jsx)(Mf.div,{className:"w-2 h-2 bg-gray-400 rounded-full",animate:{scale:[1,1.2,1]},transition:{duration:1,repeat:1/0,delay:.2}}),(0,zf.jsx)(Mf.div,{className:"w-2 h-2 bg-gray-400 rounded-full",animate:{scale:[1,1.2,1]},transition:{duration:1,repeat:1/0,delay:.4}})]})})}),(0,zf.jsx)("div",{ref:h})]}),!o&&a.length<=3&&(0,zf.jsxs)(Mf.div,{className:"p-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[(0,zf.jsx)("p",{className:"text-white/80 text-sm mb-3 text-center",children:"Try asking about:"}),(0,zf.jsx)("div",{className:"flex flex-wrap gap-2 justify-center",children:s.slice(0,3).map((e,t)=>(0,zf.jsx)(Mf.button,{className:"bg-white/20 backdrop-blur text-white text-xs px-3 py-2 rounded-full border border-white/30",onClick:()=>(e=>{p(e)})(e),whileHover:{scale:1.05,backgroundColor:"rgba(255,255,255,0.3)"},whileTap:{scale:.95},initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1*t},children:e},t))})]}),(0,zf.jsxs)(Mf.div,{className:"p-4 bg-white/20 backdrop-blur",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[(0,zf.jsxs)("div",{className:"flex gap-3",children:[(0,zf.jsx)("input",{type:"text",value:u,onChange:e=>d(e.target.value),onKeyPress:e=>"Enter"===e.key&&p(),placeholder:"Ask Simba about science...",disabled:o,className:"flex-1 bg-white/90 backdrop-blur rounded-2xl px-4 py-3 text-gray-800 placeholder-gray-500 border-none outline-none focus:ring-2 focus:ring-white/50"}),(0,zf.jsx)(Mf.button,{onClick:()=>p(),disabled:!u.trim()||o,className:"bg-primary-500 text-white rounded-2xl px-6 py-3 font-bold disabled:opacity-50 disabled:cursor-not-allowed",whileHover:o?{}:{scale:1.05},whileTap:o?{}:{scale:.95},children:(0,zf.jsx)("span",{className:"text-lg",children:"\ud83d\udce4"})})]}),(0,zf.jsx)("div",{className:"flex justify-center mt-3",children:(0,zf.jsx)(Mf.button,{className:"bg-white/20 backdrop-blur rounded-full p-3 border border-white/30",whileHover:{scale:1.1},whileTap:{scale:.9},children:(0,zf.jsx)("span",{className:"text-white text-xl",children:"\ud83c\udfa4"})})})]})]})},Xm=e=>{let{title:t,description:n,icon:r,unlocked:a,progress:i,maxProgress:s,onClick:o}=e;const l=i/s*100;return(0,zf.jsxs)(Mf.div,{className:"relative p-4 rounded-2xl border-2 cursor-pointer transition-all duration-300 achievement-badge-3d ".concat(a?"bg-gradient-to-br from-secondary-50 to-secondary-100 border-secondary-300 shadow-lg":"bg-gray-100 border-gray-300"," ").concat(a?"pulse-3d":""),onClick:o,whileHover:{scale:1.05},whileTap:{scale:.95},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[(0,zf.jsx)("div",{className:"flex justify-center mb-3",children:(0,zf.jsx)(Mf.div,{className:"w-16 h-16 rounded-full flex items-center justify-center text-2xl ".concat(a?"bg-secondary-200":"bg-gray-200"),animate:a?{rotate:[0,5,-5,0]}:{},transition:{duration:.5},children:(0,zf.jsx)("span",{className:a?"":"grayscale opacity-50",children:r})})}),(0,zf.jsx)("h3",{className:"font-comic font-bold text-center mb-2 ".concat(a?"text-gray-800":"text-gray-500"),children:t}),(0,zf.jsx)("p",{className:"text-sm text-center mb-3 ".concat(a?"text-gray-600":"text-gray-400"),children:n}),!a&&s>1&&(0,zf.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-2",children:(0,zf.jsx)(Mf.div,{className:"bg-primary-500 h-2 rounded-full",style:{width:"".concat(l,"%")},initial:{width:0},animate:{width:"".concat(l,"%")},transition:{duration:.5}})}),!a&&s>1&&(0,zf.jsxs)("p",{className:"text-xs text-gray-500 text-center",children:[i,"/",s]}),a&&(0,zf.jsx)(Mf.div,{className:"absolute -top-2 -right-2 w-6 h-6 bg-secondary-500 rounded-full flex items-center justify-center",initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500,damping:30},children:(0,zf.jsx)("span",{className:"text-white text-sm",children:"\u2713"})}),!a&&0===i&&(0,zf.jsx)("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-gray-400 rounded-full flex items-center justify-center",children:(0,zf.jsx)("span",{className:"text-white text-sm",children:"\ud83d\udd12"})})]})},Zm=e=>{let{onNavigate:t}=e;const n=To(),{achievements:a,totalUnlocked:i,isLoading:s,error:o}=Eo(e=>e.achievements),{currentUser:l}=Eo(e=>e.user),c=a.length,u=c>0?i/c*100:0,d=a.filter(e=>e.unlocked),h=a.filter(e=>!e.unlocked);return(0,r.useEffect)(()=>{!l||0!==a.length||s||o||n(ji(l.id))},[n,l,a.length,s,o]),s?(0,zf.jsx)("div",{className:"min-h-screen space-background flex items-center justify-center p-4",children:(0,zf.jsxs)("div",{className:"text-center",children:[(0,zf.jsx)(Ff,{size:"lg",animate:!0}),(0,zf.jsx)(Mf.div,{className:"mt-4 text-white text-xl font-comic",animate:{opacity:[.5,1,.5]},transition:{duration:2,repeat:1/0},children:"Loading your achievements... \ud83c\udfc6"})]})}):s||0!==a.length?(0,zf.jsxs)("div",{className:"min-h-screen space-background p-4",children:[(0,zf.jsxs)(Mf.header,{className:"flex items-center justify-between mb-6",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[(0,zf.jsxs)("div",{className:"flex items-center gap-4",children:[(0,zf.jsx)(Mf.button,{className:"bg-white/20 backdrop-blur rounded-full p-3",onClick:()=>t("home"),whileHover:{scale:1.1},whileTap:{scale:.9},children:(0,zf.jsx)("span",{className:"text-white text-xl",children:"\u2190"})}),(0,zf.jsx)("h1",{className:"font-comic text-2xl font-bold text-white",children:"SciFly Achievements \ud83c\udfc6"})]}),(0,zf.jsx)(Xf,{})]}),(0,zf.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,zf.jsxs)(Mf.div,{className:"bg-white/95 backdrop-blur rounded-3xl p-6 mb-6 shadow-xl",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:[(0,zf.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,zf.jsx)(Ff,{size:"md",animate:!0}),(0,zf.jsxs)("div",{className:"flex-1",children:[(0,zf.jsx)("h2",{className:"font-comic text-xl font-bold text-gray-800 mb-2",children:"Your Progress"}),(0,zf.jsx)(Vf,{current:i,total:c,label:"Achievements Unlocked",color:"secondary",animate:!0})]})]}),(0,zf.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,zf.jsxs)("div",{className:"bg-gradient-to-br from-secondary-100 to-secondary-200 rounded-2xl p-3",children:[(0,zf.jsx)("div",{className:"text-2xl font-bold text-secondary-600",children:i}),(0,zf.jsx)("p",{className:"text-xs text-gray-600",children:"Unlocked"})]}),(0,zf.jsxs)("div",{className:"bg-gradient-to-br from-primary-100 to-primary-200 rounded-2xl p-3",children:[(0,zf.jsx)("div",{className:"text-2xl font-bold text-primary-600",children:c-i}),(0,zf.jsx)("p",{className:"text-xs text-gray-600",children:"Remaining"})]}),(0,zf.jsxs)("div",{className:"bg-gradient-to-br from-success-100 to-success-200 rounded-2xl p-3",children:[(0,zf.jsxs)("div",{className:"text-2xl font-bold text-success-600",children:[Math.round(u),"%"]}),(0,zf.jsx)("p",{className:"text-xs text-gray-600",children:"Complete"})]})]})]}),d.length>0&&(0,zf.jsxs)(Mf.div,{className:"mb-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:[(0,zf.jsxs)("h3",{className:"font-comic text-lg font-bold text-white mb-4 flex items-center gap-2",children:[(0,zf.jsx)("span",{children:"\ud83c\udfc6"})," Unlocked Achievements"]}),(0,zf.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:d.map((e,t)=>(0,zf.jsx)(Mf.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.1*t},children:(0,zf.jsx)(Xm,{title:e.title,description:e.description,icon:e.icon,unlocked:e.unlocked,progress:e.progress,maxProgress:e.maxProgress})},e.id))})]}),(0,zf.jsxs)(Mf.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:[(0,zf.jsxs)("h3",{className:"font-comic text-lg font-bold text-white mb-4 flex items-center gap-2",children:[(0,zf.jsx)("span",{children:"\ud83d\udd12"})," Keep Going!"]}),(0,zf.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:h.map((e,t)=>(0,zf.jsx)(Mf.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.1*t},children:(0,zf.jsx)(Xm,{title:e.title,description:e.description,icon:e.icon,unlocked:e.unlocked,progress:e.progress,maxProgress:e.maxProgress})},e.id))})]}),i>0&&(0,zf.jsx)(Mf.div,{className:"mt-8 text-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},children:(0,zf.jsx)(Mf.button,{className:"bg-gradient-to-r from-secondary-500 to-secondary-600 text-white font-bold py-3 px-8 rounded-2xl shadow-lg",whileHover:{scale:1.05},whileTap:{scale:.95},children:"\ud83c\udf1f Share Your Progress"})}),(0,zf.jsx)(Mf.div,{className:"mt-6 text-center",initial:{opacity:0},animate:{opacity:1},transition:{delay:1},children:(0,zf.jsx)("div",{className:"bg-white/20 backdrop-blur rounded-2xl p-4",children:(0,zf.jsx)("p",{className:"text-white/90 text-sm",children:0===i?"Start your science journey to unlock your first achievement! \ud83d\ude80":i===c?"Amazing! You've unlocked all achievements! You're a true scientist! \ud83c\udf93":"Great progress! ".concat(c-i," more achievements to go! \ud83d\udcaa")})})})]})]}):(0,zf.jsxs)("div",{className:"min-h-screen space-background p-4",children:[(0,zf.jsxs)(Mf.header,{className:"flex items-center justify-between mb-6",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[(0,zf.jsxs)("div",{className:"flex items-center gap-4",children:[(0,zf.jsx)(Mf.button,{className:"bg-white/20 backdrop-blur rounded-full p-3",onClick:()=>t("home"),whileHover:{scale:1.1},whileTap:{scale:.9},children:(0,zf.jsx)("span",{className:"text-white text-xl",children:"\u2190"})}),(0,zf.jsx)("h1",{className:"font-comic text-2xl font-bold text-white",children:"SciFly Achievements \ud83c\udfc6"})]}),(0,zf.jsx)(Xf,{})]}),(0,zf.jsx)("div",{className:"max-w-md mx-auto text-center",children:(0,zf.jsxs)(Mf.div,{className:"bg-white/95 backdrop-blur rounded-3xl p-8 shadow-xl",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[(0,zf.jsx)(Ff,{size:"lg",animate:!0}),(0,zf.jsx)("h2",{className:"font-comic text-xl font-bold text-gray-800 mt-4 mb-2",children:"Achievements Coming Soon! \ud83d\udea7"}),(0,zf.jsx)("p",{className:"text-gray-600 mb-6",children:o?"We're having trouble loading achievements right now. The database might need to be set up with seed data.":"Achievement system is being prepared for you! Keep learning and check back soon!"}),(0,zf.jsx)(Mf.button,{className:"bg-primary-500 text-white font-bold py-3 px-6 rounded-2xl",onClick:()=>t("home"),whileHover:{scale:1.05},whileTap:{scale:.95},children:"Continue Learning \ud83d\ude80"})]})})]})},eg=e=>{let{isOpen:t,onClose:n,initialMode:a}=e;const[i,s]=(0,r.useState)("signup"===a),[o,l]=(0,r.useState)({email:"",password:"",confirmPassword:"",name:""}),c=To(),{isLoading:u,error:d,isAuthenticated:h}=Eo(e=>e.user);(0,r.useEffect)(()=>(t?(s("signup"===a),l({email:"",password:"",confirmPassword:"",name:""}),c(ns()),document.body.classList.add("modal-open")):document.body.classList.remove("modal-open"),()=>{document.body.classList.remove("modal-open")}),[t,a,c]),(0,r.useEffect)(()=>{h&&t&&n()},[h,t,n]);const p=()=>i&&o.password&&o.password.length<6?"Password must be at least 6 characters":i&&o.confirmPassword&&o.password!==o.confirmPassword?"Passwords do not match":null;return(0,zf.jsx)(Jf,{children:t&&(0,zf.jsx)(Mf.div,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4 modal-backdrop",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2,ease:"easeInOut"},onClick:n,children:(0,zf.jsxs)(Mf.div,{className:"bg-white/95 backdrop-blur rounded-3xl shadow-2xl max-w-md w-full modal-content",initial:{scale:.85,opacity:0,y:40},animate:{scale:1,opacity:1,y:0},exit:{scale:.85,opacity:0,y:40},transition:{duration:.3,ease:[.23,1,.32,1],delay:t?.1:0},onClick:e=>e.stopPropagation(),children:[(0,zf.jsxs)("div",{className:"bg-gradient-to-r from-primary-500 to-secondary-500 rounded-t-3xl p-6 text-center relative",children:[(0,zf.jsx)("button",{onClick:n,className:"absolute top-4 right-4 text-white/80 hover:text-white text-2xl leading-none",children:"\xd7"}),(0,zf.jsx)(Ff,{size:"md",animate:!0}),(0,zf.jsx)("h1",{className:"font-comic text-xl font-bold text-white mt-3",children:i?"Join SciFly! \ud83d\ude80":"Welcome Back! \ud83e\udd81"}),(0,zf.jsx)("p",{className:"text-white/90 mt-1 text-sm",children:i?"Create your science adventure account":"Sign in to continue learning"})]}),(0,zf.jsx)("div",{className:"p-6",children:(0,zf.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),c(ns()),i){if(o.password!==o.confirmPassword)return;if(o.password.length<6)return;try{const e=await c(Wi({email:o.email,password:o.password,name:o.name,learningSpeed:3})).unwrap();console.log("Signup successful:",e)}catch(d){console.error("Sign up failed:",d)}}else try{await c(Hi({email:o.email,password:o.password})).unwrap()}catch(d){console.error("Sign in failed:",d)}},className:"space-y-4",children:[(0,zf.jsx)(Jf,{children:i&&(0,zf.jsxs)(Mf.div,{initial:{opacity:0,height:0,marginBottom:0},animate:{opacity:1,height:"auto",marginBottom:16},exit:{opacity:0,height:0,marginBottom:0},transition:{duration:.4,ease:"easeInOut",opacity:{duration:.2}},style:{overflow:"hidden"},children:[(0,zf.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Name"}),(0,zf.jsx)("input",{type:"text",value:o.name,onChange:e=>l(I(I({},o),{},{name:e.target.value})),placeholder:"Enter your name...",className:"w-full px-4 py-3 rounded-2xl border-2 border-gray-200 focus:border-primary-500 focus:outline-none",required:i,autoFocus:!0})]})}),(0,zf.jsxs)("div",{children:[(0,zf.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),(0,zf.jsx)("input",{type:"email",value:o.email,onChange:e=>l(I(I({},o),{},{email:e.target.value})),placeholder:"your@email.com",className:"w-full px-4 py-3 rounded-2xl border-2 border-gray-200 focus:border-primary-500 focus:outline-none",required:!0,autoFocus:!i})]}),(0,zf.jsxs)("div",{children:[(0,zf.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),(0,zf.jsx)("input",{type:"password",value:o.password,onChange:e=>l(I(I({},o),{},{password:e.target.value})),placeholder:"Enter password...",className:"w-full px-4 py-3 rounded-2xl border-2 border-gray-200 focus:border-primary-500 focus:outline-none",required:!0})]}),(0,zf.jsx)(Jf,{children:i&&(0,zf.jsxs)(Mf.div,{initial:{opacity:0,height:0,marginBottom:0},animate:{opacity:1,height:"auto",marginBottom:16},exit:{opacity:0,height:0,marginBottom:0},transition:{duration:.4,ease:"easeInOut",opacity:{duration:.2}},style:{overflow:"hidden"},children:[(0,zf.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),(0,zf.jsx)("input",{type:"password",value:o.confirmPassword,onChange:e=>l(I(I({},o),{},{confirmPassword:e.target.value})),placeholder:"Confirm password...",className:"w-full px-4 py-3 rounded-2xl border-2 border-gray-200 focus:border-primary-500 focus:outline-none",required:i})]})}),(0,zf.jsx)(Jf,{children:p()&&(0,zf.jsx)(Mf.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.3,ease:"easeOut"},className:"text-red-500 text-sm text-center",children:p()})}),(0,zf.jsx)(Jf,{children:d&&(0,zf.jsx)(Mf.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.3,ease:"easeOut"},className:"text-red-500 text-sm text-center bg-red-50 p-3 rounded-2xl",children:d})}),(0,zf.jsxs)("button",{type:"submit",disabled:!(o.email&&o.password&&(!i||o.name.trim()&&o.password===o.confirmPassword&&o.password.length>=6))||u,className:"w-full bg-gradient-to-r from-primary-500 to-secondary-500 text-white rounded-2xl py-3 px-6 font-bold hover:from-primary-600 hover:to-secondary-600 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center justify-center gap-2",children:[(0,zf.jsx)("span",{children:i?"\ud83d\ude80":"\ud83e\udd81"}),u?i?"Creating Account...":"Signing In...":i?"Create Account":"Sign In"]}),(0,zf.jsxs)("div",{className:"text-center pt-2",children:[(0,zf.jsx)("p",{className:"text-gray-600 text-sm",children:i?"Already have an account?":"Don't have an account?"}),(0,zf.jsx)("button",{type:"button",onClick:()=>{s(!i),c(ns()),l({email:"",password:"",confirmPassword:"",name:""})},className:"text-primary-600 font-bold text-sm hover:text-primary-700 transition-colors",children:i?"Sign In":"Sign Up"})]})]})})]})})})},tg=()=>{const[e,t]=(0,r.useState)(!1),[n,a]=(0,r.useState)("signup"),i=()=>{a("signup"),t(!0)},s=()=>{a("signin"),t(!0)};return(0,zf.jsxs)("div",{className:"min-h-screen space-background relative overflow-hidden",children:[(0,zf.jsx)(qf,{}),(0,zf.jsxs)(Mf.nav,{className:"flex justify-between items-center p-6 relative z-10",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},children:[(0,zf.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zf.jsx)(Mf.div,{animate:{rotate:[0,5,-5,0]},transition:{duration:2,repeat:1/0},children:"\ud83d\ude80"}),(0,zf.jsx)("h1",{className:"font-comic text-2xl font-bold text-white",children:"SciFly"})]}),(0,zf.jsxs)("div",{className:"flex gap-3",children:[(0,zf.jsx)(Mf.button,{onClick:s,className:"text-white hover:text-primary-200 transition-colors font-medium",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Sign In"}),(0,zf.jsx)(Uf,{onClick:i,size:"sm",variant:"secondary",children:"Get Started"})]})]}),(0,zf.jsxs)("div",{className:"container mx-auto px-6 py-12 relative z-10",children:[(0,zf.jsxs)("div",{className:"text-center max-w-4xl mx-auto",children:[(0,zf.jsxs)(Mf.div,{className:"mb-8",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},children:[(0,zf.jsx)("div",{className:"flex justify-center mb-6",children:(0,zf.jsx)(Ff,{size:"lg",animate:!0})}),(0,zf.jsxs)("h1",{className:"font-comic text-5xl md:text-6xl font-bold text-white mb-6 leading-tight",children:["Science Learning",(0,zf.jsx)("br",{}),(0,zf.jsx)("span",{className:"bg-gradient-to-r from-yellow-400 via-orange-400 to-pink-400 bg-clip-text text-transparent font-extrabold animate-pulse",style:{WebkitBackgroundClip:"text",filter:"drop-shadow(0 2px 4px rgba(255,255,255,0.3))"},children:"Made Fun! \ud83d\ude80"})]}),(0,zf.jsx)("p",{className:"text-xl text-white/90 mb-8 max-w-2xl mx-auto leading-relaxed",children:"Join Simba on an amazing science adventure! Learn at your own pace with interactive lessons, AI-powered assistance, and personalized content that makes science exciting."}),(0,zf.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[(0,zf.jsx)(Uf,{onClick:i,size:"lg",className:"w-full sm:w-auto",icon:"\ud83d\ude80",children:"Start Learning for Free"}),(0,zf.jsx)(Mf.button,{onClick:s,className:"text-white border-2 border-white/30 hover:border-white/60 rounded-2xl px-8 py-4 font-bold transition-all backdrop-blur",whileHover:{scale:1.05,backgroundColor:"rgba(255,255,255,0.1)"},whileTap:{scale:.95},children:"I Already Have an Account"})]})]}),(0,zf.jsx)(Mf.div,{className:"mb-16",initial:{opacity:0,y:40},animate:{opacity:1,y:0},transition:{duration:.8,delay:.4},children:(0,zf.jsx)("div",{className:"bg-white/10 backdrop-blur rounded-3xl p-8 max-w-3xl mx-auto",children:(0,zf.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-center",children:[(0,zf.jsxs)("div",{className:"text-white",children:[(0,zf.jsx)("div",{className:"text-4xl mb-3",children:"\ud83d\udcda"}),(0,zf.jsx)("div",{className:"font-bold text-lg",children:"10+ Topics"}),(0,zf.jsx)("div",{className:"text-sm opacity-80",children:"From gravity to ecosystems"})]}),(0,zf.jsxs)("div",{className:"text-white",children:[(0,zf.jsx)("div",{className:"text-4xl mb-3",children:"\ud83c\udfaf"}),(0,zf.jsx)("div",{className:"font-bold text-lg",children:"Adaptive Learning"}),(0,zf.jsx)("div",{className:"text-sm opacity-80",children:"Personalized to your speed"})]}),(0,zf.jsxs)("div",{className:"text-white",children:[(0,zf.jsx)("div",{className:"text-4xl mb-3",children:"\ud83c\udfc6"}),(0,zf.jsx)("div",{className:"font-bold text-lg",children:"Achievement System"}),(0,zf.jsx)("div",{className:"text-sm opacity-80",children:"Unlock badges & rewards"})]})]})})})]}),(0,zf.jsxs)(Mf.section,{className:"mb-16",initial:{opacity:0,y:40},animate:{opacity:1,y:0},transition:{duration:.8,delay:.6},children:[(0,zf.jsx)("h2",{className:"font-comic text-3xl font-bold text-white text-center mb-12",children:"Why Kids Love SciFly \u2728"}),(0,zf.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 max-w-5xl mx-auto",children:[{icon:"\ud83e\uddea",title:"Interactive Science Lessons",description:"Learn with fun, engaging content tailored to your learning speed"},{icon:"\ud83e\udd16",title:"AI-Powered Learning",description:"Chat with Simba, your AI science companion who answers all your questions"},{icon:"\ud83c\udfc6",title:"Achievements & Progress",description:"Unlock badges and track your progress as you master science concepts"},{icon:"\u26a1",title:"Personalized Experience",description:"Content adapts to your learning style - from careful explorer to lightning fast"}].map((e,t)=>(0,zf.jsxs)(Mf.div,{className:"bg-white/10 backdrop-blur rounded-3xl p-6 text-white",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.8+.1*t},whileHover:{scale:1.02,backgroundColor:"rgba(255,255,255,0.15)"},children:[(0,zf.jsx)("div",{className:"text-4xl mb-4",children:e.icon}),(0,zf.jsx)("h3",{className:"font-bold text-xl mb-3",children:e.title}),(0,zf.jsx)("p",{className:"text-white/90 leading-relaxed",children:e.description})]},t))})]}),(0,zf.jsx)(Mf.section,{className:"mb-16",initial:{opacity:0,y:40},animate:{opacity:1,y:0},transition:{duration:.8,delay:1},children:(0,zf.jsxs)("div",{className:"bg-white/10 backdrop-blur rounded-3xl p-8 max-w-4xl mx-auto text-center",children:[(0,zf.jsx)("h3",{className:"font-comic text-2xl font-bold text-white mb-6",children:"Choose Your Learning Adventure \ud83c\udfaf"}),(0,zf.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-3 md:grid-cols-5 gap-4",children:[{emoji:"\ud83d\udc22",name:"Careful Explorer",desc:"Take your time"},{emoji:"\ud83d\udc28",name:"Steady Learner",desc:"Balanced pace"},{emoji:"\ud83e\udd81",name:"Balanced Student",desc:"Perfect mix"},{emoji:"\ud83d\udc0e",name:"Quick Thinker",desc:"Fast learner"},{emoji:"\ud83d\ude80",name:"Lightning Fast",desc:"Super quick"}].map((e,t)=>(0,zf.jsxs)(Mf.div,{className:"bg-white/10 rounded-2xl p-4 text-white",whileHover:{scale:1.05,backgroundColor:"rgba(255,255,255,0.2)"},transition:{duration:.2},children:[(0,zf.jsx)("div",{className:"text-3xl mb-2",children:e.emoji}),(0,zf.jsx)("div",{className:"font-bold text-sm",children:e.name}),(0,zf.jsx)("div",{className:"text-xs opacity-80",children:e.desc})]},t))})]})}),(0,zf.jsx)(Mf.section,{className:"text-center",initial:{opacity:0,y:40},animate:{opacity:1,y:0},transition:{duration:.8,delay:1.2},children:(0,zf.jsxs)("div",{className:"bg-gradient-to-r from-primary-500/20 to-secondary-500/20 backdrop-blur rounded-3xl p-8 max-w-2xl mx-auto",children:[(0,zf.jsx)("h3",{className:"font-comic text-3xl font-bold text-white mb-4",children:"Ready to Blast Off? \ud83d\ude80"}),(0,zf.jsx)("p",{className:"text-white/90 text-lg mb-6",children:"Join thousands of young scientists exploring the amazing world of science!"}),(0,zf.jsx)(Uf,{onClick:i,size:"lg",className:"w-full sm:w-auto",icon:"\ud83c\udf89",children:"Create Free Account"}),(0,zf.jsx)("p",{className:"text-white/70 text-sm mt-4",children:"No credit card required \u2022 100% Free \u2022 Kid-friendly"})]})})]}),(0,zf.jsx)(eg,{isOpen:e,onClose:()=>t(!1),initialMode:n})]})},ng=()=>{const[e,t]=(0,r.useState)(3),n=To(),{showOnboarding:a,currentUser:i,isLoading:s}=Eo(e=>e.user);return a&&i?(0,zf.jsx)(Jf,{children:(0,zf.jsx)(Mf.div,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,zf.jsxs)(Mf.div,{className:"bg-white rounded-3xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},transition:{duration:.3},children:[(0,zf.jsxs)("div",{className:"bg-gradient-to-r from-primary-500 to-secondary-500 rounded-t-3xl p-6 text-center",children:[(0,zf.jsx)(Ff,{size:"lg",animate:!0}),(0,zf.jsxs)("h1",{className:"font-comic text-2xl font-bold text-white mt-4",children:["Welcome to SciFly, ",i.name,"! \ud83d\ude80"]}),(0,zf.jsx)("p",{className:"text-white/90 mt-2",children:"Let's personalize your learning experience!"})]}),(0,zf.jsx)("div",{className:"p-6",children:(0,zf.jsxs)(Mf.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[(0,zf.jsxs)("div",{className:"text-center",children:[(0,zf.jsx)("h2",{className:"font-comic text-xl font-bold text-gray-800 mb-2",children:"How do you like to learn? \ud83c\udfaf"}),(0,zf.jsx)("p",{className:"text-gray-600",children:"This helps us create lessons that are perfect for you!"})]}),(0,zf.jsx)("div",{className:"space-y-3",children:[{value:1,title:"Careful Explorer \ud83d\udc22",description:"I like to take my time and understand everything step by step",detail:"Perfect for students who prefer thorough explanations and multiple examples"},{value:2,title:"Steady Learner \ud83d\udc28",description:"I enjoy learning at a comfortable pace with good explanations",detail:"Great for students who like detailed content but not too slow"},{value:3,title:"Balanced Student \ud83e\udd81",description:"I learn best with a mix of explanation and practice",detail:"Ideal for most students who want balanced content"},{value:4,title:"Quick Thinker \ud83d\udc0e",description:"I pick up concepts quickly and like to move fast",detail:"Perfect for students who grasp concepts easily"},{value:5,title:"Lightning Fast \ud83d\ude80",description:"I understand things immediately and want to race ahead!",detail:"For advanced students who need minimal explanation"}].map(n=>(0,zf.jsx)(Mf.div,{className:"p-4 rounded-2xl border-2 cursor-pointer transition-all ".concat(e===n.value?"border-primary-500 bg-primary-50":"border-gray-200 hover:border-gray-300"),onClick:()=>t(n.value),whileHover:{scale:1.02},whileTap:{scale:.98},children:(0,zf.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zf.jsxs)("div",{className:"flex-1",children:[(0,zf.jsx)("h3",{className:"font-bold text-gray-800",children:n.title}),(0,zf.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:n.description}),(0,zf.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:n.detail})]}),(0,zf.jsx)("div",{className:"w-6 h-6 rounded-full border-2 flex items-center justify-center ".concat(e===n.value?"border-primary-500 bg-primary-500":"border-gray-300"),children:e===n.value&&(0,zf.jsx)("div",{className:"w-2 h-2 bg-white rounded-full"})})]})},n.value))}),(0,zf.jsxs)("div",{className:"flex gap-3",children:[(0,zf.jsx)("button",{onClick:()=>{n(ts())},className:"px-4 py-2 text-gray-500 hover:text-gray-700",children:"Skip for now"}),(0,zf.jsx)(Uf,{onClick:async()=>{if(i)try{await n(Ji({learning_speed:e.toString()})).unwrap()}catch(t){console.error("Failed to update learning speed:",t)}},disabled:s,className:"flex-1",icon:"\ud83c\udf89",children:s?"Saving...":"Start Learning!"})]})]})})]})})}):null},rg=()=>{const[e,t]=(0,r.useState)("home"),n=To(),{currentUser:a,isAuthenticated:i,isLoading:s,showOnboarding:o}=Eo(e=>e.user);(0,r.useEffect)(()=>{n(Gi());const e=e=>{let t=!1;const{data:{subscription:n}}=xa.onAuthStateChange((n,r)=>{const a=(null===r||void 0===r?void 0:r.user)||null;e(es(a)),t&&(a&&"SIGNED_IN"===n?e(Gi()):a||"SIGNED_OUT"!==n||e(is())),t||(t=!0)});return()=>null===n||void 0===n?void 0:n.unsubscribe()},t=e(n);return()=>{"function"===typeof t&&t()}},[n]);const l=e=>{t(e)};return s?(0,zf.jsx)("div",{className:"min-h-screen space-background flex items-center justify-center",children:(0,zf.jsxs)("div",{className:"text-center",children:[(0,zf.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\ude80"}),(0,zf.jsx)("div",{className:"text-white text-xl font-comic",children:"Loading SciFly..."})]})}):i?(0,zf.jsxs)("div",{className:"App",children:[(()=>{switch(e){case"home":default:return(0,zf.jsx)(Zf,{onNavigate:l});case"lesson":return(0,zf.jsx)(Km,{onNavigate:l});case"quiz":return(0,zf.jsx)($m,{onNavigate:l});case"chat":return(0,zf.jsx)(Ym,{onNavigate:l});case"achievements":return(0,zf.jsx)(Zm,{onNavigate:l})}})(),(0,zf.jsx)(ng,{})]}):(0,zf.jsx)(tg,{})},ag=()=>(0,zf.jsx)(g,{store:No,children:(0,zf.jsx)(rg,{})});a.createRoot(document.getElementById("root")).render((0,zf.jsx)(r.StrictMode,{children:(0,zf.jsx)(ag,{})}))})();
//# sourceMappingURL=main.ad7988d6.js.map